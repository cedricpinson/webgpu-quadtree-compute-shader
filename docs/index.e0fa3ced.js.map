{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,e,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,S,E,C,E,O,G,E,W,E,Q,C,C,I,E,C,E,E,E,S,I,G,E,E,Q,I,G,E,E,O,I,G,E,E,a,I,G,E,E,M,I,G,E,E,W,I,G,E,E,Y,I,G,E,E,S,I,G,E,E,U,I,G,E,E,c,I,G,E,E,W,I,G,E,E,Y,I,G,E,E,Q,I,G,E,E,S,I,G,E,E,U,I,G,E,E,U,I,G,E,E,U,I,G,E,E,kB,I,G,E,E,c,I,G,E,E,e,I,G,E,E,gB,I,G,E,E,gB,I,G,E,E,gB,I,G,E,E,0B,I,G,E,E,Y,I,G,E,E,iB,I,G,E,E,a,I,G,E,E,c,I,G,E,E,+B,I,G,E,E,qC,I,G,E,E,W,I,G,E,E,U,I,G,E,E,gB,I,G,E,E,c,I,G,E,E,gB,I,G,E,E,6B,I,G,E,E,U,I,G,E,E,Q,I,G,E,E,U,I,G,E,E,S,I,G,E,E,W,I,G,E,E,M,I,G,E,E,O,I,G,E,E,M,I,G,E,E,W,I,G,E,E,iB,I,G,E,E,uB,I,G,E,E,c,I,G,E,E,S,I,G,E,E,M,I,I,E,E,M,I,IGMO,IAAI,EAAa,AAAwB,aAAxB,OAAO,aAA+B,aAAe,MAClE,EAAS,KAAK,ODKlB,SAAS,IACd,IAAI,EAAM,IAAI,EAAoB,IAqBlC,OAnBI,GAAuB,eACzB,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,GAAG,CAAG,EACV,CAAG,CAAC,GAAG,CAAG,EACV,CAAG,CAAC,GAAG,CAAG,EACV,CAAG,CAAC,GAAG,CAAG,GAGZ,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,EAAE,CAAG,EACT,CAAG,CAAC,GAAG,CAAG,EACV,CAAG,CAAC,GAAG,CAAG,EACH,CACT,CAQO,SAAS,EAAM,CAAC,EACrB,IAAI,EAAM,IAAI,EAAoB,IAiBlC,OAhBA,CAAG,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CACT,EAAK,CAAC,CAAC,EAAE,CACT,EAAK,CAAC,CAAC,EAAE,CACT,EAAK,CAAC,CAAC,EAAE,CACT,EAAK,CAAC,CAAC,EAAE,CACT,EAAK,CAAC,CAAC,EAAE,CACb,OAAO,KAAK,IAAI,EAAK,IAAO,ADrrBT,KCqrB4B,KAAK,IAAI,EAAK,KAAK,IAAI,GAAK,KAAK,IAAI,KAAQ,KAAK,IAAI,EAAK,IAAO,ADrrB9F,KCqrBiH,KAAK,IAAI,EAAK,KAAK,IAAI,GAAK,KAAK,IAAI,KAAQ,KAAK,IAAI,EAAK,IAAO,ADrrBnL,KCqrBsM,KAAK,IAAI,EAAK,KAAK,IAAI,GAAK,KAAK,IAAI,GAChQ,C,E,G,S,I,I,E,G,Q,I,I,E,G,S,I,I,E,G,a,I,I,E,G,O,I,I,E,G,M,I,I,E,G,M,I,I,E,G,W,I,I,E,G,W,I,I,E,G,S,I,I,E,G,O,I,I,E,G,Q,I,I,E,G,M,I,I,E,G,M,I,I,E,G,Q,I,I,E,G,Q,I,I,E,G,c,I,I,E,G,W,I,I,E,G,kB,I,I,E,G,gB,I,I,E,G,S,I,I,E,G,U,I,I,E,G,Y,I,I,E,G,M,I,I,E,G,Q,I,I,E,G,O,I,I,E,G,U,I,I,E,G,S,I,I,E,G,S,I,I,E,G,gB,I,I,E,G,gB,I,I,E,G,gB,I,I,E,G,U,I,I,E,G,U,I,I,E,G,U,I,I,E,G,Q,I,I,E,G,O,I,I,E,G,M,I,I,E,G,c,I,I,E,G,S,I,I,E,G,M,I,I,E,G,M,I,I,E,G,M,I,I,E,G,O,I,I,E,G,U,I,I,E,G,M,I,I,E,G,S,I,I,E,G,U,I,IAMO,IAAI,GAAM,GAMN,GAAM,GAMN,GAAM,GAMN,GAAO,GAMP,GAAU,GAMV,GAAM,GAMN,GAAS,GAcT,GAAU,WACnB,IAAI,EAAM,KACV,OAAO,SAAU,CAAC,CAAE,CAAM,CAAE,CAAM,CAAE,CAAK,CAAE,CAAE,CAAE,CAAG,EAChD,IAAI,EAAG,EAgBP,IAdK,GACH,CAAA,EAAS,CAAA,EAGN,GACH,CAAA,EAAS,CAAA,EAIT,EADE,EACE,KAAK,IAAI,EAAQ,EAAS,EAAQ,EAAE,QAEpC,EAAE,OAGH,EAAI,EAAQ,EAAI,EAAG,GAAK,EAC3B,CA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","sources":["<anon>","src/main.ts","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","src/utils.ts","src/app.ts","src/quadtree.ts","src/quadtree-types.ts","src/quadtree-debug.ts","node_modules/@parcel/runtime-js/lib/bundles/runtime-5843e888fb622e48.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-c37ac721ff3547dd.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-f8a88c41dd5c17de.js","node_modules/tweakpane/dist/tweakpane.js","src/drag.ts","src/manipulator.ts","src/smooth-inputs.ts"],"sourcesContent":["function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $26675c4f95835ef1$exports = {};\n\n$parcel$export($26675c4f95835ef1$exports, \"create\", () => $26675c4f95835ef1$export$185802fd694ee1f5);\n$parcel$export($26675c4f95835ef1$exports, \"clone\", () => $26675c4f95835ef1$export$9cd59f9826255e47);\n$parcel$export($26675c4f95835ef1$exports, \"copy\", () => $26675c4f95835ef1$export$784d13d8ee351f07);\n$parcel$export($26675c4f95835ef1$exports, \"fromValues\", () => $26675c4f95835ef1$export$a82be99ed2a44a7d);\n$parcel$export($26675c4f95835ef1$exports, \"set\", () => $26675c4f95835ef1$export$adaa4cf7ef1b65be);\n$parcel$export($26675c4f95835ef1$exports, \"identity\", () => $26675c4f95835ef1$export$f0954fd7d5368655);\n$parcel$export($26675c4f95835ef1$exports, \"transpose\", () => $26675c4f95835ef1$export$9cb09a71b7d66923);\n$parcel$export($26675c4f95835ef1$exports, \"invert\", () => $26675c4f95835ef1$export$6897c284b6f9f4dc);\n$parcel$export($26675c4f95835ef1$exports, \"adjoint\", () => $26675c4f95835ef1$export$33f3c024b4ae00a1);\n$parcel$export($26675c4f95835ef1$exports, \"determinant\", () => $26675c4f95835ef1$export$a04698f914c55ed9);\n$parcel$export($26675c4f95835ef1$exports, \"multiply\", () => $26675c4f95835ef1$export$2060d2db72cce88f);\n$parcel$export($26675c4f95835ef1$exports, \"translate\", () => $26675c4f95835ef1$export$d73ee8ef04f5226a);\n$parcel$export($26675c4f95835ef1$exports, \"scale\", () => $26675c4f95835ef1$export$dcdf75081b88279d);\n$parcel$export($26675c4f95835ef1$exports, \"rotate\", () => $26675c4f95835ef1$export$bb628a54ab399bc9);\n$parcel$export($26675c4f95835ef1$exports, \"rotateX\", () => $26675c4f95835ef1$export$a59c8716592e09af);\n$parcel$export($26675c4f95835ef1$exports, \"rotateY\", () => $26675c4f95835ef1$export$cf71e4d4ca4d1cfd);\n$parcel$export($26675c4f95835ef1$exports, \"rotateZ\", () => $26675c4f95835ef1$export$ea6eae3365de5b9c);\n$parcel$export($26675c4f95835ef1$exports, \"fromTranslation\", () => $26675c4f95835ef1$export$bc9e79e74e9fddf6);\n$parcel$export($26675c4f95835ef1$exports, \"fromScaling\", () => $26675c4f95835ef1$export$832ca188ffb1955d);\n$parcel$export($26675c4f95835ef1$exports, \"fromRotation\", () => $26675c4f95835ef1$export$926fc125ff3c666c);\n$parcel$export($26675c4f95835ef1$exports, \"fromXRotation\", () => $26675c4f95835ef1$export$dd47cc2f828c32ef);\n$parcel$export($26675c4f95835ef1$exports, \"fromYRotation\", () => $26675c4f95835ef1$export$7dc997d67d2b7f33);\n$parcel$export($26675c4f95835ef1$exports, \"fromZRotation\", () => $26675c4f95835ef1$export$ad5ddaedc8f405df);\n$parcel$export($26675c4f95835ef1$exports, \"fromRotationTranslation\", () => $26675c4f95835ef1$export$9545ac307f2a256b);\n$parcel$export($26675c4f95835ef1$exports, \"fromQuat2\", () => $26675c4f95835ef1$export$ff497f2be31cc6a);\n$parcel$export($26675c4f95835ef1$exports, \"getTranslation\", () => $26675c4f95835ef1$export$202e99f82f7f0395);\n$parcel$export($26675c4f95835ef1$exports, \"getScaling\", () => $26675c4f95835ef1$export$71dc54d92bd04b57);\n$parcel$export($26675c4f95835ef1$exports, \"getRotation\", () => $26675c4f95835ef1$export$df3937d3b537df0a);\n$parcel$export($26675c4f95835ef1$exports, \"fromRotationTranslationScale\", () => $26675c4f95835ef1$export$ddf9c55c9f2be172);\n$parcel$export($26675c4f95835ef1$exports, \"fromRotationTranslationScaleOrigin\", () => $26675c4f95835ef1$export$1def1f860edc4b1f);\n$parcel$export($26675c4f95835ef1$exports, \"fromQuat\", () => $26675c4f95835ef1$export$2ff2bbe382249af7);\n$parcel$export($26675c4f95835ef1$exports, \"frustum\", () => $26675c4f95835ef1$export$89b5708c387cac6c);\n$parcel$export($26675c4f95835ef1$exports, \"perspectiveNO\", () => $26675c4f95835ef1$export$4cf19729ec9a96b8);\n$parcel$export($26675c4f95835ef1$exports, \"perspective\", () => $26675c4f95835ef1$export$541149539f3a4684);\n$parcel$export($26675c4f95835ef1$exports, \"perspectiveZO\", () => $26675c4f95835ef1$export$294bba99a6af0c0c);\n$parcel$export($26675c4f95835ef1$exports, \"perspectiveFromFieldOfView\", () => $26675c4f95835ef1$export$58ae211c788e338f);\n$parcel$export($26675c4f95835ef1$exports, \"orthoNO\", () => $26675c4f95835ef1$export$c5f65ef3eb668f27);\n$parcel$export($26675c4f95835ef1$exports, \"ortho\", () => $26675c4f95835ef1$export$4f2167e613cfc87b);\n$parcel$export($26675c4f95835ef1$exports, \"orthoZO\", () => $26675c4f95835ef1$export$b1d31ea7b4d854e);\n$parcel$export($26675c4f95835ef1$exports, \"lookAt\", () => $26675c4f95835ef1$export$d924e14fd6d9aa66);\n$parcel$export($26675c4f95835ef1$exports, \"targetTo\", () => $26675c4f95835ef1$export$aa67782f4dc9e52c);\n$parcel$export($26675c4f95835ef1$exports, \"str\", () => $26675c4f95835ef1$export$42d51816ce590c93);\n$parcel$export($26675c4f95835ef1$exports, \"frob\", () => $26675c4f95835ef1$export$326827e8268e9cdb);\n$parcel$export($26675c4f95835ef1$exports, \"add\", () => $26675c4f95835ef1$export$e16d8520af44a096);\n$parcel$export($26675c4f95835ef1$exports, \"subtract\", () => $26675c4f95835ef1$export$4e2d2ead65e5f7e3);\n$parcel$export($26675c4f95835ef1$exports, \"multiplyScalar\", () => $26675c4f95835ef1$export$c697bed75648cdb7);\n$parcel$export($26675c4f95835ef1$exports, \"multiplyScalarAndAdd\", () => $26675c4f95835ef1$export$553579f63bdd7137);\n$parcel$export($26675c4f95835ef1$exports, \"exactEquals\", () => $26675c4f95835ef1$export$f2599a5cf1109d8);\n$parcel$export($26675c4f95835ef1$exports, \"equals\", () => $26675c4f95835ef1$export$e9bab7fafb253603);\n$parcel$export($26675c4f95835ef1$exports, \"mul\", () => $26675c4f95835ef1$export$6e3a27864ab166fe);\n$parcel$export($26675c4f95835ef1$exports, \"sub\", () => $26675c4f95835ef1$export$f93b5905241a7cca);\n/**\n * Common utilities\n * @module glMatrix\n */ // Configuration Constants\nvar $78ae820aa9ececfa$export$fd293b15f47e270 = 0.000001;\nvar $78ae820aa9ececfa$export$b67359430d3b1b2 = typeof Float32Array !== \"undefined\" ? Float32Array : Array;\nvar $78ae820aa9ececfa$export$5ada478c8a628231 = Math.random;\nfunction $78ae820aa9ececfa$export$cb2c0eb57f5e532c(type) {\n    $78ae820aa9ececfa$export$b67359430d3b1b2 = type;\n}\nvar $78ae820aa9ececfa$var$degree = Math.PI / 180;\nfunction $78ae820aa9ececfa$export$408b8ee5959eefd5(a) {\n    return a * $78ae820aa9ececfa$var$degree;\n}\nfunction $78ae820aa9ececfa$export$e9bab7fafb253603(a, b) {\n    return Math.abs(a - b) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function() {\n    var y = 0, i = arguments.length;\n    while(i--)y += arguments[i] * arguments[i];\n    return Math.sqrt(y);\n};\n\n\nfunction $26675c4f95835ef1$export$185802fd694ee1f5() {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(16);\n    if ($78ae820aa9ececfa$export$b67359430d3b1b2 != Float32Array) {\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n    }\n    out[0] = 1;\n    out[5] = 1;\n    out[10] = 1;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$9cd59f9826255e47(a) {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\nfunction $26675c4f95835ef1$export$784d13d8ee351f07(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\nfunction $26675c4f95835ef1$export$a82be99ed2a44a7d(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(16);\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\nfunction $26675c4f95835ef1$export$adaa4cf7ef1b65be(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\nfunction $26675c4f95835ef1$export$f0954fd7d5368655(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$9cb09a71b7d66923(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3];\n        var a12 = a[6], a13 = a[7];\n        var a23 = a[11];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    return out;\n}\nfunction $26675c4f95835ef1$export$6897c284b6f9f4dc(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n    var b00 = a00 * a11 - a01 * a10;\n    var b01 = a00 * a12 - a02 * a10;\n    var b02 = a00 * a13 - a03 * a10;\n    var b03 = a01 * a12 - a02 * a11;\n    var b04 = a01 * a13 - a03 * a11;\n    var b05 = a02 * a13 - a03 * a12;\n    var b06 = a20 * a31 - a21 * a30;\n    var b07 = a20 * a32 - a22 * a30;\n    var b08 = a20 * a33 - a23 * a30;\n    var b09 = a21 * a32 - a22 * a31;\n    var b10 = a21 * a33 - a23 * a31;\n    var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) return null;\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n}\nfunction $26675c4f95835ef1$export$33f3c024b4ae00a1(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n    out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n    out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n    out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n    out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n    out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n    out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n    return out;\n}\nfunction $26675c4f95835ef1$export$a04698f914c55ed9(a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n    var b00 = a00 * a11 - a01 * a10;\n    var b01 = a00 * a12 - a02 * a10;\n    var b02 = a00 * a13 - a03 * a10;\n    var b03 = a01 * a12 - a02 * a11;\n    var b04 = a01 * a13 - a03 * a11;\n    var b05 = a02 * a13 - a03 * a12;\n    var b06 = a20 * a31 - a21 * a30;\n    var b07 = a20 * a32 - a22 * a30;\n    var b08 = a20 * a33 - a23 * a30;\n    var b09 = a21 * a32 - a22 * a31;\n    var b10 = a21 * a33 - a23 * a31;\n    var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\nfunction $26675c4f95835ef1$export$2060d2db72cce88f(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15]; // Cache only the current line of the second matrix\n    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[4];\n    b1 = b[5];\n    b2 = b[6];\n    b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[8];\n    b1 = b[9];\n    b2 = b[10];\n    b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[12];\n    b1 = b[13];\n    b2 = b[14];\n    b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\nfunction $26675c4f95835ef1$export$d73ee8ef04f5226a(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n    var a00, a01, a02, a03;\n    var a10, a11, a12, a13;\n    var a20, a21, a22, a23;\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0];\n        a01 = a[1];\n        a02 = a[2];\n        a03 = a[3];\n        a10 = a[4];\n        a11 = a[5];\n        a12 = a[6];\n        a13 = a[7];\n        a20 = a[8];\n        a21 = a[9];\n        a22 = a[10];\n        a23 = a[11];\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a03;\n        out[4] = a10;\n        out[5] = a11;\n        out[6] = a12;\n        out[7] = a13;\n        out[8] = a20;\n        out[9] = a21;\n        out[10] = a22;\n        out[11] = a23;\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n}\nfunction $26675c4f95835ef1$export$dcdf75081b88279d(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\nfunction $26675c4f95835ef1$export$bb628a54ab399bc9(out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2];\n    var len = Math.hypot(x, y, z);\n    var s, c, t;\n    var a00, a01, a02, a03;\n    var a10, a11, a12, a13;\n    var a20, a21, a22, a23;\n    var b00, b01, b02;\n    var b10, b11, b12;\n    var b20, b21, b22;\n    if (len < $78ae820aa9ececfa$export$fd293b15f47e270) return null;\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11]; // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;\n    b01 = y * x * t + z * s;\n    b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;\n    b11 = y * y * t + c;\n    b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;\n    b21 = y * z * t - x * s;\n    b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\nfunction $26675c4f95835ef1$export$a59c8716592e09af(out, a, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    } // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n}\nfunction $26675c4f95835ef1$export$cf71e4d4ca4d1cfd(out, a, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    } // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n}\nfunction $26675c4f95835ef1$export$ea6eae3365de5b9c(out, a, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    } // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n}\nfunction $26675c4f95835ef1$export$bc9e79e74e9fddf6(out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$832ca188ffb1955d(out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = v[1];\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = v[2];\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$926fc125ff3c666c(out, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2];\n    var len = Math.hypot(x, y, z);\n    var s, c, t;\n    if (len < $78ae820aa9ececfa$export$fd293b15f47e270) return null;\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c; // Perform rotation-specific matrix multiplication\n    out[0] = x * x * t + c;\n    out[1] = y * x * t + z * s;\n    out[2] = z * x * t - y * s;\n    out[3] = 0;\n    out[4] = x * y * t - z * s;\n    out[5] = y * y * t + c;\n    out[6] = z * y * t + x * s;\n    out[7] = 0;\n    out[8] = x * z * t + y * s;\n    out[9] = y * z * t - x * s;\n    out[10] = z * z * t + c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$dd47cc2f828c32ef(out, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = c;\n    out[6] = s;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = -s;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$7dc997d67d2b7f33(out, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = 0;\n    out[2] = -s;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = s;\n    out[9] = 0;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$ad5ddaedc8f405df(out, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -s;\n    out[5] = c;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$9545ac307f2a256b(out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$ff497f2be31cc6a(out, a) {\n    var translation = new $78ae820aa9ececfa$export$b67359430d3b1b2(3);\n    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];\n    var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n    if (magnitude > 0) {\n        translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n        translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n        translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n    } else {\n        translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n        translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n        translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n    }\n    $26675c4f95835ef1$export$9545ac307f2a256b(out, a, translation);\n    return out;\n}\nfunction $26675c4f95835ef1$export$202e99f82f7f0395(out, mat) {\n    out[0] = mat[12];\n    out[1] = mat[13];\n    out[2] = mat[14];\n    return out;\n}\nfunction $26675c4f95835ef1$export$71dc54d92bd04b57(out, mat) {\n    var m11 = mat[0];\n    var m12 = mat[1];\n    var m13 = mat[2];\n    var m21 = mat[4];\n    var m22 = mat[5];\n    var m23 = mat[6];\n    var m31 = mat[8];\n    var m32 = mat[9];\n    var m33 = mat[10];\n    out[0] = Math.hypot(m11, m12, m13);\n    out[1] = Math.hypot(m21, m22, m23);\n    out[2] = Math.hypot(m31, m32, m33);\n    return out;\n}\nfunction $26675c4f95835ef1$export$df3937d3b537df0a(out, mat) {\n    var scaling = new $78ae820aa9ececfa$export$b67359430d3b1b2(3);\n    $26675c4f95835ef1$export$71dc54d92bd04b57(scaling, mat);\n    var is1 = 1 / scaling[0];\n    var is2 = 1 / scaling[1];\n    var is3 = 1 / scaling[2];\n    var sm11 = mat[0] * is1;\n    var sm12 = mat[1] * is2;\n    var sm13 = mat[2] * is3;\n    var sm21 = mat[4] * is1;\n    var sm22 = mat[5] * is2;\n    var sm23 = mat[6] * is3;\n    var sm31 = mat[8] * is1;\n    var sm32 = mat[9] * is2;\n    var sm33 = mat[10] * is3;\n    var trace = sm11 + sm22 + sm33;\n    var S = 0;\n    if (trace > 0) {\n        S = Math.sqrt(trace + 1.0) * 2;\n        out[3] = 0.25 * S;\n        out[0] = (sm23 - sm32) / S;\n        out[1] = (sm31 - sm13) / S;\n        out[2] = (sm12 - sm21) / S;\n    } else if (sm11 > sm22 && sm11 > sm33) {\n        S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n        out[3] = (sm23 - sm32) / S;\n        out[0] = 0.25 * S;\n        out[1] = (sm12 + sm21) / S;\n        out[2] = (sm31 + sm13) / S;\n    } else if (sm22 > sm33) {\n        S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n        out[3] = (sm31 - sm13) / S;\n        out[0] = (sm12 + sm21) / S;\n        out[1] = 0.25 * S;\n        out[2] = (sm23 + sm32) / S;\n    } else {\n        S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n        out[3] = (sm12 - sm21) / S;\n        out[0] = (sm31 + sm13) / S;\n        out[1] = (sm23 + sm32) / S;\n        out[2] = 0.25 * S;\n    }\n    return out;\n}\nfunction $26675c4f95835ef1$export$ddf9c55c9f2be172(out, q, v, s) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    var sx = s[0];\n    var sy = s[1];\n    var sz = s[2];\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$1def1f860edc4b1f(out, q, v, s, o) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    var sx = s[0];\n    var sy = s[1];\n    var sz = s[2];\n    var ox = o[0];\n    var oy = o[1];\n    var oz = o[2];\n    var out0 = (1 - (yy + zz)) * sx;\n    var out1 = (xy + wz) * sx;\n    var out2 = (xz - wy) * sx;\n    var out4 = (xy - wz) * sy;\n    var out5 = (1 - (xx + zz)) * sy;\n    var out6 = (yz + wx) * sy;\n    var out8 = (xz + wy) * sz;\n    var out9 = (yz - wx) * sz;\n    var out10 = (1 - (xx + yy)) * sz;\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = 0;\n    out[4] = out4;\n    out[5] = out5;\n    out[6] = out6;\n    out[7] = 0;\n    out[8] = out8;\n    out[9] = out9;\n    out[10] = out10;\n    out[11] = 0;\n    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$2ff2bbe382249af7(out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var yx = y * x2;\n    var yy = y * y2;\n    var zx = z * x2;\n    var zy = z * y2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$89b5708c387cac6c(out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left);\n    var tb = 1 / (top - bottom);\n    var nf = 1 / (near - far);\n    out[0] = near * 2 * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = near * 2 * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = far * near * 2 * nf;\n    out[15] = 0;\n    return out;\n}\nfunction $26675c4f95835ef1$export$4cf19729ec9a96b8(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2), nf;\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[15] = 0;\n    if (far != null && far !== Infinity) {\n        nf = 1 / (near - far);\n        out[10] = (far + near) * nf;\n        out[14] = 2 * far * near * nf;\n    } else {\n        out[10] = -1;\n        out[14] = -2 * near;\n    }\n    return out;\n}\nvar $26675c4f95835ef1$export$541149539f3a4684 = $26675c4f95835ef1$export$4cf19729ec9a96b8;\nfunction $26675c4f95835ef1$export$294bba99a6af0c0c(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2), nf;\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[15] = 0;\n    if (far != null && far !== Infinity) {\n        nf = 1 / (near - far);\n        out[10] = far * nf;\n        out[14] = far * near * nf;\n    } else {\n        out[10] = -1;\n        out[14] = -near;\n    }\n    return out;\n}\nfunction $26675c4f95835ef1$export$58ae211c788e338f(out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n    var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n    var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n    var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n    var xScale = 2.0 / (leftTan + rightTan);\n    var yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n}\nfunction $26675c4f95835ef1$export$c5f65ef3eb668f27(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right);\n    var bt = 1 / (bottom - top);\n    var nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\nvar $26675c4f95835ef1$export$4f2167e613cfc87b = $26675c4f95835ef1$export$c5f65ef3eb668f27;\nfunction $26675c4f95835ef1$export$b1d31ea7b4d854e(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right);\n    var bt = 1 / (bottom - top);\n    var nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = near * nf;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$d924e14fd6d9aa66(out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n    var eyex = eye[0];\n    var eyey = eye[1];\n    var eyez = eye[2];\n    var upx = up[0];\n    var upy = up[1];\n    var upz = up[2];\n    var centerx = center[0];\n    var centery = center[1];\n    var centerz = center[2];\n    if (Math.abs(eyex - centerx) < $78ae820aa9ececfa$export$fd293b15f47e270 && Math.abs(eyey - centery) < $78ae820aa9ececfa$export$fd293b15f47e270 && Math.abs(eyez - centerz) < $78ae820aa9ececfa$export$fd293b15f47e270) return $26675c4f95835ef1$export$f0954fd7d5368655(out);\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n    len = 1 / Math.hypot(z0, z1, z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.hypot(x0, x1, x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n    len = Math.hypot(y0, y1, y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$aa67782f4dc9e52c(out, eye, target, up) {\n    var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];\n    var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];\n    var len = z0 * z0 + z1 * z1 + z2 * z2;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n    }\n    var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;\n    len = x0 * x0 + x1 * x1 + x2 * x2;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    out[0] = x0;\n    out[1] = x1;\n    out[2] = x2;\n    out[3] = 0;\n    out[4] = z1 * x2 - z2 * x1;\n    out[5] = z2 * x0 - z0 * x2;\n    out[6] = z0 * x1 - z1 * x0;\n    out[7] = 0;\n    out[8] = z0;\n    out[9] = z1;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = eyex;\n    out[13] = eyey;\n    out[14] = eyez;\n    out[15] = 1;\n    return out;\n}\nfunction $26675c4f95835ef1$export$42d51816ce590c93(a) {\n    return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\nfunction $26675c4f95835ef1$export$326827e8268e9cdb(a) {\n    return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\nfunction $26675c4f95835ef1$export$e16d8520af44a096(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n}\nfunction $26675c4f95835ef1$export$4e2d2ead65e5f7e3(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n}\nfunction $26675c4f95835ef1$export$c697bed75648cdb7(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n}\nfunction $26675c4f95835ef1$export$553579f63bdd7137(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    out[4] = a[4] + b[4] * scale;\n    out[5] = a[5] + b[5] * scale;\n    out[6] = a[6] + b[6] * scale;\n    out[7] = a[7] + b[7] * scale;\n    out[8] = a[8] + b[8] * scale;\n    out[9] = a[9] + b[9] * scale;\n    out[10] = a[10] + b[10] * scale;\n    out[11] = a[11] + b[11] * scale;\n    out[12] = a[12] + b[12] * scale;\n    out[13] = a[13] + b[13] * scale;\n    out[14] = a[14] + b[14] * scale;\n    out[15] = a[15] + b[15] * scale;\n    return out;\n}\nfunction $26675c4f95835ef1$export$f2599a5cf1109d8(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\nfunction $26675c4f95835ef1$export$e9bab7fafb253603(a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n    var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];\n    var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];\n    var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];\n    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];\n    var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];\n    var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];\n    return Math.abs(a0 - b0) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\nvar $26675c4f95835ef1$export$6e3a27864ab166fe = $26675c4f95835ef1$export$2060d2db72cce88f;\nvar $26675c4f95835ef1$export$f93b5905241a7cca = $26675c4f95835ef1$export$4e2d2ead65e5f7e3;\n\nvar $ab7f6dc0910e1ef7$exports = {};\n\n$parcel$export($ab7f6dc0910e1ef7$exports, \"create\", () => $ab7f6dc0910e1ef7$export$185802fd694ee1f5);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"clone\", () => $ab7f6dc0910e1ef7$export$9cd59f9826255e47);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"length\", () => $ab7f6dc0910e1ef7$export$f24224f1c91d8156);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"fromValues\", () => $ab7f6dc0910e1ef7$export$a82be99ed2a44a7d);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"copy\", () => $ab7f6dc0910e1ef7$export$784d13d8ee351f07);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"set\", () => $ab7f6dc0910e1ef7$export$adaa4cf7ef1b65be);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"add\", () => $ab7f6dc0910e1ef7$export$e16d8520af44a096);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"subtract\", () => $ab7f6dc0910e1ef7$export$4e2d2ead65e5f7e3);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"multiply\", () => $ab7f6dc0910e1ef7$export$2060d2db72cce88f);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"divide\", () => $ab7f6dc0910e1ef7$export$cd007d971a5a2143);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"ceil\", () => $ab7f6dc0910e1ef7$export$803ce6b71a0a94b2);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"floor\", () => $ab7f6dc0910e1ef7$export$a3fe094919f356fd);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"min\", () => $ab7f6dc0910e1ef7$export$96ec731ed4dcb222);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"max\", () => $ab7f6dc0910e1ef7$export$8960430cfd85939f);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"round\", () => $ab7f6dc0910e1ef7$export$2077e0241d6afd3c);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"scale\", () => $ab7f6dc0910e1ef7$export$dcdf75081b88279d);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"scaleAndAdd\", () => $ab7f6dc0910e1ef7$export$19cedf1da84ba854);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"distance\", () => $ab7f6dc0910e1ef7$export$9f17032d917177de);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"squaredDistance\", () => $ab7f6dc0910e1ef7$export$88e6ebb4fe54f538);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"squaredLength\", () => $ab7f6dc0910e1ef7$export$ab44e1323ffc8376);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"negate\", () => $ab7f6dc0910e1ef7$export$aef51622e549b8b0);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"inverse\", () => $ab7f6dc0910e1ef7$export$70ae2c07e401031b);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"normalize\", () => $ab7f6dc0910e1ef7$export$a3295358bff77e);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"dot\", () => $ab7f6dc0910e1ef7$export$94132a0e348806d4);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"cross\", () => $ab7f6dc0910e1ef7$export$bb646b20bb93d339);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"lerp\", () => $ab7f6dc0910e1ef7$export$3a89f8d6f6bf6c9f);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"hermite\", () => $ab7f6dc0910e1ef7$export$ae8865616f30561c);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"bezier\", () => $ab7f6dc0910e1ef7$export$b9c5f84610baddaf);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"random\", () => $ab7f6dc0910e1ef7$export$4385e60b38654f68);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"transformMat4\", () => $ab7f6dc0910e1ef7$export$5ffbd13800309d59);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"transformMat3\", () => $ab7f6dc0910e1ef7$export$f0bfa0a0024626ee);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"transformQuat\", () => $ab7f6dc0910e1ef7$export$c32adef9e939ce85);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"rotateX\", () => $ab7f6dc0910e1ef7$export$a59c8716592e09af);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"rotateY\", () => $ab7f6dc0910e1ef7$export$cf71e4d4ca4d1cfd);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"rotateZ\", () => $ab7f6dc0910e1ef7$export$ea6eae3365de5b9c);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"angle\", () => $ab7f6dc0910e1ef7$export$944b09d2ad10b378);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"zero\", () => $ab7f6dc0910e1ef7$export$7f9972325ebfd559);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"str\", () => $ab7f6dc0910e1ef7$export$42d51816ce590c93);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"exactEquals\", () => $ab7f6dc0910e1ef7$export$f2599a5cf1109d8);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"equals\", () => $ab7f6dc0910e1ef7$export$e9bab7fafb253603);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"sub\", () => $ab7f6dc0910e1ef7$export$f93b5905241a7cca);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"mul\", () => $ab7f6dc0910e1ef7$export$6e3a27864ab166fe);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"div\", () => $ab7f6dc0910e1ef7$export$159d9494db57879b);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"dist\", () => $ab7f6dc0910e1ef7$export$6c4a311cc157c764);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"sqrDist\", () => $ab7f6dc0910e1ef7$export$2422cd6c492a8b3a);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"len\", () => $ab7f6dc0910e1ef7$export$fc1400facf92c78);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"sqrLen\", () => $ab7f6dc0910e1ef7$export$99d8dd3f32a3435);\n$parcel$export($ab7f6dc0910e1ef7$exports, \"forEach\", () => $ab7f6dc0910e1ef7$export$4b80e395e36b5a56);\n\nfunction $ab7f6dc0910e1ef7$export$185802fd694ee1f5() {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(3);\n    if ($78ae820aa9ececfa$export$b67359430d3b1b2 != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n    }\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$9cd59f9826255e47(a) {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$f24224f1c91d8156(a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    return Math.hypot(x, y, z);\n}\nfunction $ab7f6dc0910e1ef7$export$a82be99ed2a44a7d(x, y, z) {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$784d13d8ee351f07(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$adaa4cf7ef1b65be(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$e16d8520af44a096(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$4e2d2ead65e5f7e3(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$2060d2db72cce88f(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$cd007d971a5a2143(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$803ce6b71a0a94b2(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$a3fe094919f356fd(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$96ec731ed4dcb222(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$8960430cfd85939f(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$2077e0241d6afd3c(out, a) {\n    out[0] = Math.round(a[0]);\n    out[1] = Math.round(a[1]);\n    out[2] = Math.round(a[2]);\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$dcdf75081b88279d(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$19cedf1da84ba854(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$9f17032d917177de(a, b) {\n    var x = b[0] - a[0];\n    var y = b[1] - a[1];\n    var z = b[2] - a[2];\n    return Math.hypot(x, y, z);\n}\nfunction $ab7f6dc0910e1ef7$export$88e6ebb4fe54f538(a, b) {\n    var x = b[0] - a[0];\n    var y = b[1] - a[1];\n    var z = b[2] - a[2];\n    return x * x + y * y + z * z;\n}\nfunction $ab7f6dc0910e1ef7$export$ab44e1323ffc8376(a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    return x * x + y * y + z * z;\n}\nfunction $ab7f6dc0910e1ef7$export$aef51622e549b8b0(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$70ae2c07e401031b(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$a3295358bff77e(out, a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var len = x * x + y * y + z * z;\n    if (len > 0) //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$94132a0e348806d4(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction $ab7f6dc0910e1ef7$export$bb646b20bb93d339(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2];\n    var bx = b[0], by = b[1], bz = b[2];\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$3a89f8d6f6bf6c9f(out, a, b, t) {\n    var ax = a[0];\n    var ay = a[1];\n    var az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$ae8865616f30561c(out, a, b, c, d, t) {\n    var factorTimes2 = t * t;\n    var factor1 = factorTimes2 * (2 * t - 3) + 1;\n    var factor2 = factorTimes2 * (t - 2) + t;\n    var factor3 = factorTimes2 * (t - 1);\n    var factor4 = factorTimes2 * (3 - 2 * t);\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$b9c5f84610baddaf(out, a, b, c, d, t) {\n    var inverseFactor = 1 - t;\n    var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n    var factorTimes2 = t * t;\n    var factor1 = inverseFactorTimesTwo * inverseFactor;\n    var factor2 = 3 * t * inverseFactorTimesTwo;\n    var factor3 = 3 * factorTimes2 * inverseFactor;\n    var factor4 = factorTimes2 * t;\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$4385e60b38654f68(out, scale) {\n    scale = scale || 1.0;\n    var r = $78ae820aa9ececfa$export$5ada478c8a628231() * 2.0 * Math.PI;\n    var z = $78ae820aa9ececfa$export$5ada478c8a628231() * 2.0 - 1.0;\n    var zScale = Math.sqrt(1.0 - z * z) * scale;\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$5ffbd13800309d59(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$f0bfa0a0024626ee(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$c32adef9e939ce85(out, a, q) {\n    // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n    var qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n    var x = a[0], y = a[1], z = a[2]; // var qvec = [qx, qy, qz];\n    // var uv = vec3.cross([], qvec, a);\n    var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n    var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n    var w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2; // vec3.scale(uuv, uuv, 2);\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$a59c8716592e09af(out, a, b, rad) {\n    var p = [], r = []; //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2]; //perform rotation\n    r[0] = p[0];\n    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$cf71e4d4ca4d1cfd(out, a, b, rad) {\n    var p = [], r = []; //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2]; //perform rotation\n    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n    r[1] = p[1];\n    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$ea6eae3365de5b9c(out, a, b, rad) {\n    var p = [], r = []; //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2]; //perform rotation\n    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n    r[2] = p[2]; //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$944b09d2ad10b378(a, b) {\n    var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && $ab7f6dc0910e1ef7$export$94132a0e348806d4(a, b) / mag;\n    return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\nfunction $ab7f6dc0910e1ef7$export$7f9972325ebfd559(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    return out;\n}\nfunction $ab7f6dc0910e1ef7$export$42d51816ce590c93(a) {\n    return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\nfunction $ab7f6dc0910e1ef7$export$f2599a5cf1109d8(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\nfunction $ab7f6dc0910e1ef7$export$e9bab7fafb253603(a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2];\n    var b0 = b[0], b1 = b[1], b2 = b[2];\n    return Math.abs(a0 - b0) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\nvar $ab7f6dc0910e1ef7$export$f93b5905241a7cca = $ab7f6dc0910e1ef7$export$4e2d2ead65e5f7e3;\nvar $ab7f6dc0910e1ef7$export$6e3a27864ab166fe = $ab7f6dc0910e1ef7$export$2060d2db72cce88f;\nvar $ab7f6dc0910e1ef7$export$159d9494db57879b = $ab7f6dc0910e1ef7$export$cd007d971a5a2143;\nvar $ab7f6dc0910e1ef7$export$6c4a311cc157c764 = $ab7f6dc0910e1ef7$export$9f17032d917177de;\nvar $ab7f6dc0910e1ef7$export$2422cd6c492a8b3a = $ab7f6dc0910e1ef7$export$88e6ebb4fe54f538;\nvar $ab7f6dc0910e1ef7$export$fc1400facf92c78 = $ab7f6dc0910e1ef7$export$f24224f1c91d8156;\nvar $ab7f6dc0910e1ef7$export$99d8dd3f32a3435 = $ab7f6dc0910e1ef7$export$ab44e1323ffc8376;\nvar $ab7f6dc0910e1ef7$export$4b80e395e36b5a56 = function() {\n    var vec = $ab7f6dc0910e1ef7$export$185802fd694ee1f5();\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if (!stride) stride = 3;\n        if (!offset) offset = 0;\n        if (count) l = Math.min(count * stride + offset, a.length);\n        else l = a.length;\n        for(i = offset; i < l; i += stride){\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            vec[2] = a[i + 2];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n            a[i + 2] = vec[2];\n        }\n        return a;\n    };\n}();\n\nvar $e38eb280d3b76273$exports = {};\n\n$parcel$export($e38eb280d3b76273$exports, \"create\", () => $e38eb280d3b76273$export$185802fd694ee1f5);\n$parcel$export($e38eb280d3b76273$exports, \"clone\", () => $e38eb280d3b76273$export$9cd59f9826255e47);\n$parcel$export($e38eb280d3b76273$exports, \"fromValues\", () => $e38eb280d3b76273$export$a82be99ed2a44a7d);\n$parcel$export($e38eb280d3b76273$exports, \"copy\", () => $e38eb280d3b76273$export$784d13d8ee351f07);\n$parcel$export($e38eb280d3b76273$exports, \"set\", () => $e38eb280d3b76273$export$adaa4cf7ef1b65be);\n$parcel$export($e38eb280d3b76273$exports, \"add\", () => $e38eb280d3b76273$export$e16d8520af44a096);\n$parcel$export($e38eb280d3b76273$exports, \"subtract\", () => $e38eb280d3b76273$export$4e2d2ead65e5f7e3);\n$parcel$export($e38eb280d3b76273$exports, \"multiply\", () => $e38eb280d3b76273$export$2060d2db72cce88f);\n$parcel$export($e38eb280d3b76273$exports, \"divide\", () => $e38eb280d3b76273$export$cd007d971a5a2143);\n$parcel$export($e38eb280d3b76273$exports, \"ceil\", () => $e38eb280d3b76273$export$803ce6b71a0a94b2);\n$parcel$export($e38eb280d3b76273$exports, \"floor\", () => $e38eb280d3b76273$export$a3fe094919f356fd);\n$parcel$export($e38eb280d3b76273$exports, \"min\", () => $e38eb280d3b76273$export$96ec731ed4dcb222);\n$parcel$export($e38eb280d3b76273$exports, \"max\", () => $e38eb280d3b76273$export$8960430cfd85939f);\n$parcel$export($e38eb280d3b76273$exports, \"round\", () => $e38eb280d3b76273$export$2077e0241d6afd3c);\n$parcel$export($e38eb280d3b76273$exports, \"scale\", () => $e38eb280d3b76273$export$dcdf75081b88279d);\n$parcel$export($e38eb280d3b76273$exports, \"scaleAndAdd\", () => $e38eb280d3b76273$export$19cedf1da84ba854);\n$parcel$export($e38eb280d3b76273$exports, \"distance\", () => $e38eb280d3b76273$export$9f17032d917177de);\n$parcel$export($e38eb280d3b76273$exports, \"squaredDistance\", () => $e38eb280d3b76273$export$88e6ebb4fe54f538);\n$parcel$export($e38eb280d3b76273$exports, \"length\", () => $e38eb280d3b76273$export$f24224f1c91d8156);\n$parcel$export($e38eb280d3b76273$exports, \"squaredLength\", () => $e38eb280d3b76273$export$ab44e1323ffc8376);\n$parcel$export($e38eb280d3b76273$exports, \"negate\", () => $e38eb280d3b76273$export$aef51622e549b8b0);\n$parcel$export($e38eb280d3b76273$exports, \"inverse\", () => $e38eb280d3b76273$export$70ae2c07e401031b);\n$parcel$export($e38eb280d3b76273$exports, \"normalize\", () => $e38eb280d3b76273$export$a3295358bff77e);\n$parcel$export($e38eb280d3b76273$exports, \"dot\", () => $e38eb280d3b76273$export$94132a0e348806d4);\n$parcel$export($e38eb280d3b76273$exports, \"cross\", () => $e38eb280d3b76273$export$bb646b20bb93d339);\n$parcel$export($e38eb280d3b76273$exports, \"lerp\", () => $e38eb280d3b76273$export$3a89f8d6f6bf6c9f);\n$parcel$export($e38eb280d3b76273$exports, \"random\", () => $e38eb280d3b76273$export$4385e60b38654f68);\n$parcel$export($e38eb280d3b76273$exports, \"transformMat4\", () => $e38eb280d3b76273$export$5ffbd13800309d59);\n$parcel$export($e38eb280d3b76273$exports, \"transformQuat\", () => $e38eb280d3b76273$export$c32adef9e939ce85);\n$parcel$export($e38eb280d3b76273$exports, \"zero\", () => $e38eb280d3b76273$export$7f9972325ebfd559);\n$parcel$export($e38eb280d3b76273$exports, \"str\", () => $e38eb280d3b76273$export$42d51816ce590c93);\n$parcel$export($e38eb280d3b76273$exports, \"exactEquals\", () => $e38eb280d3b76273$export$f2599a5cf1109d8);\n$parcel$export($e38eb280d3b76273$exports, \"equals\", () => $e38eb280d3b76273$export$e9bab7fafb253603);\n$parcel$export($e38eb280d3b76273$exports, \"sub\", () => $e38eb280d3b76273$export$f93b5905241a7cca);\n$parcel$export($e38eb280d3b76273$exports, \"mul\", () => $e38eb280d3b76273$export$6e3a27864ab166fe);\n$parcel$export($e38eb280d3b76273$exports, \"div\", () => $e38eb280d3b76273$export$159d9494db57879b);\n$parcel$export($e38eb280d3b76273$exports, \"dist\", () => $e38eb280d3b76273$export$6c4a311cc157c764);\n$parcel$export($e38eb280d3b76273$exports, \"sqrDist\", () => $e38eb280d3b76273$export$2422cd6c492a8b3a);\n$parcel$export($e38eb280d3b76273$exports, \"len\", () => $e38eb280d3b76273$export$fc1400facf92c78);\n$parcel$export($e38eb280d3b76273$exports, \"sqrLen\", () => $e38eb280d3b76273$export$99d8dd3f32a3435);\n$parcel$export($e38eb280d3b76273$exports, \"forEach\", () => $e38eb280d3b76273$export$4b80e395e36b5a56);\n\nfunction $e38eb280d3b76273$export$185802fd694ee1f5() {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(4);\n    if ($78ae820aa9ececfa$export$b67359430d3b1b2 != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n    }\n    return out;\n}\nfunction $e38eb280d3b76273$export$9cd59f9826255e47(a) {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$a82be99ed2a44a7d(x, y, z, w) {\n    var out = new $78ae820aa9ececfa$export$b67359430d3b1b2(4);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\nfunction $e38eb280d3b76273$export$784d13d8ee351f07(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$adaa4cf7ef1b65be(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\nfunction $e38eb280d3b76273$export$e16d8520af44a096(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$4e2d2ead65e5f7e3(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$2060d2db72cce88f(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    out[3] = a[3] * b[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$cd007d971a5a2143(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    out[3] = a[3] / b[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$803ce6b71a0a94b2(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    out[3] = Math.ceil(a[3]);\n    return out;\n}\nfunction $e38eb280d3b76273$export$a3fe094919f356fd(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    out[3] = Math.floor(a[3]);\n    return out;\n}\nfunction $e38eb280d3b76273$export$96ec731ed4dcb222(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    out[3] = Math.min(a[3], b[3]);\n    return out;\n}\nfunction $e38eb280d3b76273$export$8960430cfd85939f(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    out[3] = Math.max(a[3], b[3]);\n    return out;\n}\nfunction $e38eb280d3b76273$export$2077e0241d6afd3c(out, a) {\n    out[0] = Math.round(a[0]);\n    out[1] = Math.round(a[1]);\n    out[2] = Math.round(a[2]);\n    out[3] = Math.round(a[3]);\n    return out;\n}\nfunction $e38eb280d3b76273$export$dcdf75081b88279d(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n}\nfunction $e38eb280d3b76273$export$19cedf1da84ba854(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    return out;\n}\nfunction $e38eb280d3b76273$export$9f17032d917177de(a, b) {\n    var x = b[0] - a[0];\n    var y = b[1] - a[1];\n    var z = b[2] - a[2];\n    var w = b[3] - a[3];\n    return Math.hypot(x, y, z, w);\n}\nfunction $e38eb280d3b76273$export$88e6ebb4fe54f538(a, b) {\n    var x = b[0] - a[0];\n    var y = b[1] - a[1];\n    var z = b[2] - a[2];\n    var w = b[3] - a[3];\n    return x * x + y * y + z * z + w * w;\n}\nfunction $e38eb280d3b76273$export$f24224f1c91d8156(a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var w = a[3];\n    return Math.hypot(x, y, z, w);\n}\nfunction $e38eb280d3b76273$export$ab44e1323ffc8376(a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var w = a[3];\n    return x * x + y * y + z * z + w * w;\n}\nfunction $e38eb280d3b76273$export$aef51622e549b8b0(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = -a[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$70ae2c07e401031b(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    out[3] = 1.0 / a[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$a3295358bff77e(out, a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var w = a[3];\n    var len = x * x + y * y + z * z + w * w;\n    if (len > 0) len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n    return out;\n}\nfunction $e38eb280d3b76273$export$94132a0e348806d4(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\nfunction $e38eb280d3b76273$export$bb646b20bb93d339(out, u, v, w) {\n    var A = v[0] * w[1] - v[1] * w[0], B = v[0] * w[2] - v[2] * w[0], C = v[0] * w[3] - v[3] * w[0], D = v[1] * w[2] - v[2] * w[1], E = v[1] * w[3] - v[3] * w[1], F = v[2] * w[3] - v[3] * w[2];\n    var G = u[0];\n    var H = u[1];\n    var I = u[2];\n    var J = u[3];\n    out[0] = H * F - I * E + J * D;\n    out[1] = -(G * F) + I * C - J * B;\n    out[2] = G * E - H * C + J * A;\n    out[3] = -(G * D) + H * B - I * A;\n    return out;\n}\nfunction $e38eb280d3b76273$export$3a89f8d6f6bf6c9f(out, a, b, t) {\n    var ax = a[0];\n    var ay = a[1];\n    var az = a[2];\n    var aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n}\nfunction $e38eb280d3b76273$export$4385e60b38654f68(out, scale) {\n    scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n    // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n    // http://projecteuclid.org/euclid.aoms/1177692644;\n    var v1, v2, v3, v4;\n    var s1, s2;\n    do {\n        v1 = $78ae820aa9ececfa$export$5ada478c8a628231() * 2 - 1;\n        v2 = $78ae820aa9ececfa$export$5ada478c8a628231() * 2 - 1;\n        s1 = v1 * v1 + v2 * v2;\n    }while (s1 >= 1);\n    do {\n        v3 = $78ae820aa9ececfa$export$5ada478c8a628231() * 2 - 1;\n        v4 = $78ae820aa9ececfa$export$5ada478c8a628231() * 2 - 1;\n        s2 = v3 * v3 + v4 * v4;\n    }while (s2 >= 1);\n    var d = Math.sqrt((1 - s1) / s2);\n    out[0] = scale * v1;\n    out[1] = scale * v2;\n    out[2] = scale * v3 * d;\n    out[3] = scale * v4 * d;\n    return out;\n}\nfunction $e38eb280d3b76273$export$5ffbd13800309d59(out, a, m) {\n    var x = a[0], y = a[1], z = a[2], w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n}\nfunction $e38eb280d3b76273$export$c32adef9e939ce85(out, a, q) {\n    var x = a[0], y = a[1], z = a[2];\n    var qx = q[0], qy = q[1], qz = q[2], qw = q[3]; // calculate quat * vec\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    out[3] = a[3];\n    return out;\n}\nfunction $e38eb280d3b76273$export$7f9972325ebfd559(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    return out;\n}\nfunction $e38eb280d3b76273$export$42d51816ce590c93(a) {\n    return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\nfunction $e38eb280d3b76273$export$f2599a5cf1109d8(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\nfunction $e38eb280d3b76273$export$e9bab7fafb253603(a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    return Math.abs(a0 - b0) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= $78ae820aa9ececfa$export$fd293b15f47e270 * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\nvar $e38eb280d3b76273$export$f93b5905241a7cca = $e38eb280d3b76273$export$4e2d2ead65e5f7e3;\nvar $e38eb280d3b76273$export$6e3a27864ab166fe = $e38eb280d3b76273$export$2060d2db72cce88f;\nvar $e38eb280d3b76273$export$159d9494db57879b = $e38eb280d3b76273$export$cd007d971a5a2143;\nvar $e38eb280d3b76273$export$6c4a311cc157c764 = $e38eb280d3b76273$export$9f17032d917177de;\nvar $e38eb280d3b76273$export$2422cd6c492a8b3a = $e38eb280d3b76273$export$88e6ebb4fe54f538;\nvar $e38eb280d3b76273$export$fc1400facf92c78 = $e38eb280d3b76273$export$f24224f1c91d8156;\nvar $e38eb280d3b76273$export$99d8dd3f32a3435 = $e38eb280d3b76273$export$ab44e1323ffc8376;\nvar $e38eb280d3b76273$export$4b80e395e36b5a56 = function() {\n    var vec = $e38eb280d3b76273$export$185802fd694ee1f5();\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if (!stride) stride = 4;\n        if (!offset) offset = 0;\n        if (count) l = Math.min(count * stride + offset, a.length);\n        else l = a.length;\n        for(i = offset; i < l; i += stride){\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            vec[2] = a[i + 2];\n            vec[3] = a[i + 3];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n            a[i + 2] = vec[2];\n            a[i + 3] = vec[3];\n        }\n        return a;\n    };\n}();\n\n\n\nconst $f43313d21d3fd8e2$export$729c8b7179294ba = {\n    pane: null,\n    config: {\n        maxLod: 9,\n        projectToEarth: false,\n        evaluateLodIn3D: false,\n        evaluateRealCamera: false,\n        displayTexture: 0,\n        gridResolution: 1,\n        lodScaleFactor: 2.0,\n        debug: false,\n        debugBuffers: false,\n        elevationScale: 1.0,\n        position: {\n            x: 0.0,\n            y: 0.0\n        },\n        wireframe: true,\n        frameNumber: 0,\n        pause: false,\n        frameTime: 0,\n        updateQuadTree: 0,\n        renderQuadTree: 0,\n        pauseTree: 0,\n        rotate: false,\n        camera: {\n            start: [\n                -0.5,\n                -0.5\n            ],\n            stop: [\n                0.5,\n                0.5\n            ],\n            current: [\n                0,\n                0\n            ],\n            t: 0.0,\n            duration: 120.0\n        }\n    },\n    manipulator: {},\n    wgpu: null,\n    projectionMatrix: null,\n    modelMatrix: null\n};\n\n\nasync function $df5bef30413a053b$export$fe58198efe02b173(path) {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\" // to avoid CORS if used with Canvas\n    ;\n    img.src = path;\n    await img.decode();\n    const imageBitmap = await createImageBitmap(img);\n    return imageBitmap;\n}\nfunction $df5bef30413a053b$export$37b981a8c575f415(image, inputFormat) {\n    let textureFormat = \"rgba8unorm\";\n    if (inputFormat) textureFormat = inputFormat;\n    let texture = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createTexture({\n        size: [\n            image.width,\n            image.height,\n            1\n        ],\n        format: textureFormat,\n        usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT\n    });\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.queue.copyExternalImageToTexture({\n        source: image\n    }, {\n        texture: texture\n    }, [\n        image.width,\n        image.height\n    ]);\n    return texture;\n}\nfunction $df5bef30413a053b$var$checkSupport() {\n    if (!navigator.gpu) {\n        document.body.innerHTML = `\n            <h1>WebGPU not supported!</h1>\n            <div>\n                SPIR-V WebGPU is currently only supported in <a href=\"https://www.google.com/chrome/canary/\">Chrome Canary</a>\n                with the flag \"enable-unsafe-webgpu\" enabled.\n            </div>\n            <div>\n                See the <a href=\"https://github.com/gpuweb/gpuweb/wiki/Implementation-Status\">Implementation Status</a> page for more details.\n            </div>\n        `;\n        throw new Error(\"WebGPU not supported\");\n    }\n}\n// got the code from https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n// I dont get all the details but it works, I am not interested to understand the details right now\nfunction $df5bef30413a053b$export$a8f8dc61d19909b3(canvas, resizeCallback) {\n    function onResize(entries) {\n        for (const entry of entries){\n            let width;\n            let height;\n            let dpr = window.devicePixelRatio;\n            let dprSupport = false;\n            if (entry.devicePixelContentBoxSize) {\n                // NOTE: Only this path gives the correct answer\n                // The other paths are an imperfect fallback\n                // for browsers that don't provide anyway to do this\n                width = entry.devicePixelContentBoxSize[0].inlineSize;\n                height = entry.devicePixelContentBoxSize[0].blockSize;\n                dpr = 1; // it's already in width and height\n                dprSupport = true;\n            } else if (entry.contentBoxSize) {\n                if (entry.contentBoxSize[0]) {\n                    width = entry.contentBoxSize[0].inlineSize;\n                    height = entry.contentBoxSize[0].blockSize;\n                } else {\n                    // legacy\n                    width = entry.contentBoxSize.inlineSize;\n                    height = entry.contentBoxSize.blockSize;\n                }\n            } else {\n                // legacy\n                width = entry.contentRect.width;\n                height = entry.contentRect.height;\n            }\n            const displayWidth = Math.round(width * dpr);\n            const displayHeight = Math.round(height * dpr);\n            resizeCallback(displayWidth, displayHeight);\n            if (!dprSupport) console.log(\"no dpi support\");\n        }\n    }\n    const resizeObserver = new ResizeObserver(onResize);\n    resizeObserver.observe(canvas, {\n        box: \"content-box\"\n    });\n}\nfunction $df5bef30413a053b$export$29e6d74775fd6f12(device, buffer) {\n    const size = buffer.size;\n    // Get a GPU buffer for reading in an unmapped state.\n    const gpuReadBuffer = device.createBuffer({\n        size: size,\n        usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n    });\n    const copyEncoder = device.createCommandEncoder();\n    copyEncoder.copyBufferToBuffer(buffer /* source buffer */ , 0 /* source offset */ , gpuReadBuffer /* destination buffer */ , 0 /* destination offset */ , size /* size */ );\n    // Submit copy commands.\n    const copyCommands = copyEncoder.finish();\n    device.queue.submit([\n        copyCommands\n    ]);\n    return gpuReadBuffer;\n}\nfunction $df5bef30413a053b$export$b3b9e358ea9e926c(projection, canvas) {\n    const w = canvas.width;\n    const h = canvas.height;\n    //    mat4.ortho(projection, -w * 0.5, w * 0.5, -h * 0.5, h * 0.5, -10, 10);\n    (0, $26675c4f95835ef1$exports).ortho(projection, -w * 0.5, w * 0.5, -h * 0.5, h * 0.5, -1000, 1000);\n}\nasync function $df5bef30413a053b$export$ec48efc62e183f53(canvas) {\n    $df5bef30413a053b$var$checkSupport();\n    const adapter = await navigator.gpu.requestAdapter();\n    let device = null;\n    let hasQueryTimer = false;\n    try {\n        device = await adapter.requestDevice({\n            requiredFeatures: Array(\"timestamp-query\")\n        });\n        hasQueryTimer = true;\n        console.info(\"timestamp enabled\");\n    } catch (err) {\n        console.error(err);\n        device = await adapter.requestDevice();\n        console.info(\"timestamp query not enabled\");\n    }\n    console.log(device.limits);\n    var wgpu = {\n        device: device,\n        context: canvas.getContext(\"webgpu\"),\n        adapter: adapter,\n        canvas: canvas,\n        hasQueryTimer: hasQueryTimer\n    };\n    wgpu.context.configure({\n        device: device,\n        format: navigator.gpu.getPreferredCanvasFormat(),\n        alphaMode: \"opaque\"\n    });\n    return wgpu;\n}\nfunction $df5bef30413a053b$export$e620933a198f7bc(data, filename = \"export.json\") {\n    if (!data) {\n        console.error(\"Console.save: No data\");\n        return;\n    }\n    if (typeof data === \"object\") data = JSON.stringify(data, undefined, 4);\n    var blob = new Blob([\n        data\n    ], {\n        type: \"text/json\"\n    }), e = document.createEvent(\"MouseEvents\"), a = document.createElement(\"a\");\n    a.download = filename;\n    a.href = window.URL.createObjectURL(blob);\n    a.dataset.downloadurl = [\n        \"text/json\",\n        a.download,\n        a.href\n    ].join(\":\");\n    e.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    a.dispatchEvent(e);\n}\n\n\n\n\n// a node is:\n// u32 , u32\n// node, index\nconst $2fbafa2571df286a$export$d7101d2a8b0d91b1 = Uint32Array.BYTES_PER_ELEMENT * 2;\n// webgpu minimum binding is 16 bytes\nconst $2fbafa2571df286a$export$5fbe264087b547e8 = Math.max(Uint32Array.BYTES_PER_ELEMENT * 43, 176);\n// 2 +-+-+     // 2 5 8\n// 1 +-+-+     // 1 4 7\n// 0 +-+-+     // 0 3 6\n// triangles: [\n//     0, 1, 4,\n//     0, 4, 3,\n//     1, 2, 5,\n//     1, 5, 4,\n//     3, 4, 7,\n//     3, 7, 6,\n//     4, 5, 8,\n//     4, 8, 7,\n// ],\n// triangles: [\n//     0, 4, 1,\n//     0, 3, 4,\n//     1, 5, 2,\n//     1, 4, 5,\n//     3, 7, 4,\n//     3, 6, 7,\n//     4, 8, 5,\n//     4, 7, 8,\n// ],\nconst $2fbafa2571df286a$export$f8417bee550c7247 = {\n    vertices: [\n        0.0,\n        0.0,\n        0.0,\n        0.0,\n        0.0,\n        0.5,\n        0.0,\n        1.0,\n        0.0,\n        1.0,\n        0.0,\n        1.0,\n        0.5,\n        0.0,\n        1.0,\n        0.0,\n        0.5,\n        0.5,\n        1.0,\n        1.0,\n        0.5,\n        1.0,\n        1.0,\n        1.0,\n        1.0,\n        0.0,\n        1.0,\n        0.0,\n        1.0,\n        0.5,\n        1.0,\n        1.0,\n        1.0,\n        1.0,\n        1.0,\n        1.0\n    ],\n    triangles: [\n        0,\n        4,\n        1,\n        0,\n        3,\n        4,\n        1,\n        5,\n        2,\n        1,\n        4,\n        5,\n        3,\n        7,\n        4,\n        3,\n        6,\n        7,\n        4,\n        8,\n        5,\n        4,\n        7,\n        8\n    ],\n    lines: [\n        0,\n        1,\n        1,\n        2,\n        2,\n        5,\n        5,\n        8,\n        8,\n        7,\n        7,\n        6,\n        6,\n        3,\n        3,\n        0,\n        0,\n        4,\n        1,\n        5,\n        4,\n        8,\n        3,\n        7,\n        1,\n        4,\n        5,\n        4,\n        7,\n        4,\n        3,\n        4\n    ]\n};\n// 1 +-+     // 1 2\n// 0 +-+     // 0 3\nconst $2fbafa2571df286a$export$30880409f0d88fa1 = {\n    vertices: [\n        0.0,\n        0.0,\n        0.0,\n        0.0,\n        0.0,\n        1.0,\n        0.0,\n        1.0,\n        1.0,\n        1.0,\n        1.0,\n        1.0,\n        1.0,\n        0.0,\n        1.0,\n        0.0\n    ],\n    triangles: [\n        0,\n        2,\n        1,\n        0,\n        3,\n        2\n    ],\n    lines: [\n        0,\n        1,\n        1,\n        2,\n        2,\n        0,\n        2,\n        3,\n        3,\n        0\n    ]\n};\n\n\n\n\n// indirect data is used to store next compute indirect dispatch\n// u32, u32, u32, u32\n// x,   y,   z,   numQuads\nconst $9eb94756a2bdee36$var$IndirectSize = 4 * Uint32Array.BYTES_PER_ELEMENT;\n// vertex is a vec4\n// f32, f32, f32, f32\nconst $9eb94756a2bdee36$var$VertexSize = 4 * Float32Array.BYTES_PER_ELEMENT;\nconst $9eb94756a2bdee36$var$VertexQuadSize = 6 * $9eb94756a2bdee36$var$VertexSize;\nfunction $9eb94756a2bdee36$export$11c5c94a76e900b4(commandEncoder, quadTree, prevBufferIndex, currentBufferIndex) {\n    // node buffer size is 2 * uint32 * maxNodes + 4 uint32 for indirect dispatch\n    const nodeBufferSize = (0, $2fbafa2571df286a$export$d7101d2a8b0d91b1) * quadTree.maxNodes;\n    const bufferSize = nodeBufferSize + $9eb94756a2bdee36$var$IndirectSize;\n    // we encode node + dispatch in one debug buffer\n    const copyComputeShaderBuffer = function(commandEncoder, nodeBuffer, dispatchBuffer, name) {\n        console.log(`write ${nodeBuffer.label} : ${name}`);\n        // dispatchIndirect buffer\n        const debugBuffer = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBuffer({\n            size: bufferSize,\n            usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ,\n            label: nodeBuffer.label\n        });\n        // Encode commands for copying buffer to buffer.\n        commandEncoder.copyBufferToBuffer(nodeBuffer /* source buffer */ , 0 /* source offset */ , debugBuffer /* destination buffer */ , 0 /* destination offset */ , nodeBufferSize /* size */ );\n        // Encode commands for copying dispatch.\n        commandEncoder.copyBufferToBuffer(dispatchBuffer /* source buffer */ , 0 /* source offset */ , debugBuffer /* destination buffer */ , nodeBufferSize /* destination offset */ , $9eb94756a2bdee36$var$IndirectSize /* size */ );\n        return debugBuffer;\n    };\n    const prevNodeBuffer = quadTree.nodeBuffers[prevBufferIndex].nodeBuffer;\n    const prevDispatchBuffer = quadTree.nodeBuffers[prevBufferIndex].dispatchIndirect;\n    const currentNodeBuffer = quadTree.nodeBuffers[currentBufferIndex].nodeBuffer;\n    const currentDispatchBuffer = quadTree.nodeBuffers[currentBufferIndex].dispatchIndirect;\n    return [\n        copyComputeShaderBuffer(commandEncoder, prevNodeBuffer, prevDispatchBuffer, \"previous\"),\n        copyComputeShaderBuffer(commandEncoder, currentNodeBuffer, currentDispatchBuffer, \"current\")\n    ];\n}\nfunction $9eb94756a2bdee36$var$undilate(x) {\n    x = (x | x >> 1) & 0x33333333;\n    x = (x | x >> 2) & 0x0f0f0f0f;\n    x = (x | x >> 4) & 0x00ff00ff;\n    x = (x | x >> 8) & 0x0000ffff;\n    return x & 0x0000ffff;\n}\n// # functions with 16 are the technics with the bit to start the node encoding\n// # this is this version I am interested by.\n// #\n// # ---- ---- ---- ---- ---- ---- 0111 0000\n// #                                ^ leading bit to start encoding\n// #\n// # '0b01 11 10 01'      -> 121 in the format with leading bit to start encoding\n// #     -\nfunction $9eb94756a2bdee36$var$firstLeadingBit(n) {\n    if (n == 0) return -1;\n    let ndx = 0;\n    while(1 < n){\n        n = n >> 1;\n        ndx += 1;\n    }\n    return ndx;\n}\nfunction $9eb94756a2bdee36$var$decode(key) {\n    let leading_bit = $9eb94756a2bdee36$var$firstLeadingBit(key);\n    let level = leading_bit >> 1;\n    // # remove level bit\n    let k = ~(1 << leading_bit);\n    k = k & key;\n    let x = $9eb94756a2bdee36$var$undilate(k & 0x55555555);\n    let y = $9eb94756a2bdee36$var$undilate(k >> 1 & 0x55555555);\n    return [\n        level,\n        x,\n        y\n    ];\n}\nfunction $9eb94756a2bdee36$var$createCoord(key_tupple) {\n    let size = 1.0 / (1 << key_tupple[0]);\n    let x = key_tupple[1] * size;\n    let y = key_tupple[2] * size;\n    return [\n        x,\n        y,\n        size\n    ];\n}\nasync function $9eb94756a2bdee36$export$1a4bdd241c653de4(debugBuffers, maxNodes, frameNumber) {\n    // node buffer size is uint32 * maxNodes + 4 uint32 for indirect dispatch\n    const nodeBufferSize = (0, $2fbafa2571df286a$export$d7101d2a8b0d91b1) * maxNodes;\n    const bufferSize = nodeBufferSize + $9eb94756a2bdee36$var$IndirectSize;\n    // const dec2bin = function (dec) {\n    //     return (dec >>> 0).toString(2);\n    // };\n    const dec2bin = function(nMask) {\n        // nMask must be between -2147483648 and 2147483647\n        for(var nFlag = 0, nShifted = nMask, sMask = \"\"; nFlag < 32; nFlag++, sMask += String(nShifted >>> 31), nShifted <<= 1);\n        return sMask;\n    };\n    const dumpBuffer = async function(buffer, label) {\n        await buffer.mapAsync(GPUMapMode.READ);\n        const arrayBuffer = buffer.getMappedRange();\n        const nodesData = new Uint32Array(arrayBuffer, 0, nodeBufferSize / Uint32Array.BYTES_PER_ELEMENT);\n        const indirectData = new Uint32Array(arrayBuffer, nodeBufferSize, $9eb94756a2bdee36$var$IndirectSize / Uint32Array.BYTES_PER_ELEMENT);\n        const numQuads = indirectData[3];\n        const l = `${label} : numQuads ${numQuads} : (${indirectData[0]}, ${indirectData[1]}, ${indirectData[2]}, ${indirectData[3]})`;\n        console.groupCollapsed(l);\n        for(let i = 0; i < numQuads; i++){\n            const bin = dec2bin(nodesData[i * 2]);\n            const nodeData = $9eb94756a2bdee36$var$decode(nodesData[i * 2]);\n            const coord = $9eb94756a2bdee36$var$createCoord(nodeData);\n            const indx = nodesData[i * 2 + 1];\n            const data = `index ${i}: ${bin} : ${indx} : [ ${coord[0]}, ${coord[1]}, ${coord[2]}]`;\n            console.log(data);\n        }\n        console.groupEnd();\n        buffer.unmap();\n        buffer.destroy();\n        return true;\n    };\n    const label = `compute data frame: ${frameNumber}`;\n    console.groupCollapsed(label);\n    dumpBuffer(debugBuffers[0], \"previousBuffer\");\n    dumpBuffer(debugBuffers[1], \"currentBuffer\");\n    console.groupEnd();\n    return true;\n}\nfunction $9eb94756a2bdee36$export$95ba341d062b47b0(commandEncoder, vertexBuffer, indirectBuffer) {\n    // 256 quads\n    // 6 vertices -> 2 triangles\n    // 16 -> vertex size\n    // + 4 * 4 for the indirect data\n    const vertexBufferSize = 256 * $9eb94756a2bdee36$var$VertexQuadSize;\n    const bufferSize = vertexBufferSize + $9eb94756a2bdee36$var$IndirectSize;\n    const gpuDebugBuffer = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBuffer({\n        size: bufferSize,\n        usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n    });\n    // Encode commands for copying buffer to buffer.\n    commandEncoder.copyBufferToBuffer(vertexBuffer /* source buffer */ , 0 /* source offset */ , gpuDebugBuffer /* destination buffer */ , 0 /* destination offset */ , vertexBufferSize /* size */ );\n    // Encode commands for copying buffer to buffer.\n    commandEncoder.copyBufferToBuffer(indirectBuffer /* source buffer */ , 0 /* source offset */ , gpuDebugBuffer /* destination buffer */ , vertexBufferSize /* destination offset */ , $9eb94756a2bdee36$var$IndirectSize /* size */ );\n    return gpuDebugBuffer;\n}\nasync function $9eb94756a2bdee36$export$5e2add62028aae40(debugBuffer, frameNumber) {\n    await debugBuffer.mapAsync(GPUMapMode.READ);\n    const arrayBuffer = debugBuffer.getMappedRange();\n    const verticesData = new Float32Array(arrayBuffer, 0, 256 * $9eb94756a2bdee36$var$VertexQuadSize / Float32Array.BYTES_PER_ELEMENT);\n    const indirectData = new Uint32Array(arrayBuffer, 24576, $9eb94756a2bdee36$var$IndirectSize / Uint32Array.BYTES_PER_ELEMENT);\n    const label = `render data : frame ${frameNumber}`;\n    console.groupCollapsed(label);\n    for(let j = 0; j < verticesData.length / 4; j++){\n        const x = verticesData[j * 4 + 0];\n        const y = verticesData[j * 4 + 1];\n        const z = verticesData[j * 4 + 2];\n        const index = verticesData[j * 4 + 3];\n        const vertex = `qindex ${index} : ${x}:${y}:${z}`;\n        console.log(vertex);\n    }\n    // vertexCount: atomic<u32>,\n    // instanceCount: u32,\n    // firstVertex: u32,\n    // firstInstance: u32,\n    const vertexCount = indirectData[0];\n    const instanceCount = indirectData[1];\n    const firstVertex = indirectData[2];\n    const firstInstance = indirectData[3];\n    const indirect = `vertexCount ${vertexCount} instanceCount ${instanceCount} firstVertex ${firstVertex} firstInstance ${firstInstance}`;\n    console.log(indirect);\n    console.groupEnd();\n    debugBuffer.unmap();\n    debugBuffer.destroy();\n    return true;\n}\n\n\n\nvar $2cb80031daad6395$exports = {};\n$2cb80031daad6395$exports = \"// const COLOR_FACTOR : f32 = 1.0;\\n\\nstruct VertexOut {\\n    @builtin(position) position : vec4<f32>,\\n    @location(0) color          : vec4<f32>,\\n    @location(1) uv             : vec2<f32>,\\n    @location(2) pos2d          : vec2<f32>,\\n};\\n\\n// https://lospec.com/palette-list/resurrect-64\\nconst colorTable64 = array< vec4<f32>, 64> (\\n    vec4<f32>(46/255.0, 34/255.0, 47/255.0, 1.0),\\n    vec4<f32>(62/255.0, 53/255.0, 70/255.0, 1.0),\\n    vec4<f32>(98/255.0, 85/255.0, 101/255.0, 1.0),\\n    vec4<f32>(150/255.0, 108/255.0, 108/255.0, 1.0),\\n    vec4<f32>(171/255.0, 148/255.0, 122/255.0, 1.0),\\n    vec4<f32>(105/255.0, 79/255.0, 98/255.0, 1.0),\\n    vec4<f32>(127/255.0, 112/255.0, 138/255.0, 1.0),\\n    vec4<f32>(155/255.0, 171/255.0, 178/255.0, 1.0),\\n    vec4<f32>(199/255.0, 220/255.0, 208/255.0, 1.0),\\n    vec4<f32>(255/255.0, 255/255.0, 255/255.0, 1.0),\\n    vec4<f32>(110/255.0, 39/255.0, 39/255.0, 1.0),\\n    vec4<f32>(179/255.0, 56/255.0, 49/255.0, 1.0),\\n    vec4<f32>(234/255.0, 79/255.0, 54/255.0, 1.0),\\n    vec4<f32>(245/255.0, 125/255.0, 74/255.0, 1.0),\\n    vec4<f32>(174/255.0, 35/255.0, 52/255.0, 1.0),\\n    vec4<f32>(232/255.0, 59/255.0, 59/255.0, 1.0),\\n    vec4<f32>(251/255.0, 107/255.0, 29/255.0, 1.0),\\n    vec4<f32>(247/255.0, 150/255.0, 23/255.0, 1.0),\\n    vec4<f32>(249/255.0, 194/255.0, 43/255.0, 1.0),\\n    vec4<f32>(122/255.0, 48/255.0, 69/255.0, 1.0),\\n    vec4<f32>(158/255.0, 69/255.0, 57/255.0, 1.0),\\n    vec4<f32>(205/255.0, 104/255.0, 61/255.0, 1.0),\\n    vec4<f32>(230/255.0, 144/255.0, 78/255.0, 1.0),\\n    vec4<f32>(251/255.0, 185/255.0, 84/255.0, 1.0),\\n    vec4<f32>(76/255.0, 62/255.0, 36/255.0, 1.0),\\n    vec4<f32>(103/255.0, 102/255.0, 51/255.0, 1.0),\\n    vec4<f32>(162/255.0, 169/255.0, 71/255.0, 1.0),\\n    vec4<f32>(213/255.0, 224/255.0, 75/255.0, 1.0),\\n    vec4<f32>(251/255.0, 255/255.0, 134/255.0, 1.0),\\n    vec4<f32>(22/255.0, 90/255.0, 76/255.0, 1.0),\\n    vec4<f32>(35/255.0, 144/255.0, 99/255.0, 1.0),\\n    vec4<f32>(30/255.0, 188/255.0, 115/255.0, 1.0),\\n    vec4<f32>(145/255.0, 219/255.0, 105/255.0, 1.0),\\n    vec4<f32>(205/255.0, 223/255.0, 108/255.0, 1.0),\\n    vec4<f32>(49/255.0, 54/255.0, 56/255.0, 1.0),\\n    vec4<f32>(55/255.0, 78/255.0, 74/255.0, 1.0),\\n    vec4<f32>(84/255.0, 126/255.0, 100/255.0, 1.0),\\n    vec4<f32>(146/255.0, 169/255.0, 132/255.0, 1.0),\\n    vec4<f32>(178/255.0, 186/255.0, 144/255.0, 1.0),\\n    vec4<f32>(11/255.0, 94/255.0, 101/255.0, 1.0),\\n    vec4<f32>(11/255.0, 138/255.0, 143/255.0, 1.0),\\n    vec4<f32>(14/255.0, 175/255.0, 155/255.0, 1.0),\\n    vec4<f32>(48/255.0, 225/255.0, 185/255.0, 1.0),\\n    vec4<f32>(143/255.0, 248/255.0, 226/255.0, 1.0),\\n    vec4<f32>(50/255.0, 51/255.0, 83/255.0, 1.0),\\n    vec4<f32>(72/255.0, 74/255.0, 119/255.0, 1.0),\\n    vec4<f32>(77/255.0, 101/255.0, 180/255.0, 1.0),\\n    vec4<f32>(77/255.0, 155/255.0, 230/255.0, 1.0),\\n    vec4<f32>(143/255.0, 211/255.0, 255/255.0, 1.0),\\n    vec4<f32>(69/255.0, 41/255.0, 63/255.0, 1.0),\\n    vec4<f32>(107/255.0, 62/255.0, 117/255.0, 1.0),\\n    vec4<f32>(144/255.0, 94/255.0, 169/255.0, 1.0),\\n    vec4<f32>(168/255.0, 132/255.0, 243/255.0, 1.0),\\n    vec4<f32>(234/255.0, 173/255.0, 237/255.0, 1.0),\\n    vec4<f32>(117/255.0, 60/255.0, 84/255.0, 1.0),\\n    vec4<f32>(162/255.0, 75/255.0, 111/255.0, 1.0),\\n    vec4<f32>(207/255.0, 101/255.0, 127/255.0, 1.0),\\n    vec4<f32>(237/255.0, 128/255.0, 153/255.0, 1.0),\\n    vec4<f32>(131/255.0, 28/255.0, 93/255.0, 1.0),\\n    vec4<f32>(195/255.0, 36/255.0, 84/255.0, 1.0),\\n    vec4<f32>(240/255.0, 79/255.0, 120/255.0, 1.0),\\n    vec4<f32>(246/255.0, 129/255.0, 129/255.0, 1.0),\\n    vec4<f32>(252/255.0, 167/255.0, 144/255.0, 1.0),\\n    vec4<f32>(253/255.0, 203/255.0, 176/255.0, 1.0)\\n);\\n\\n\\n@group(0) @binding(0) var<storage, read> instances: array<Node>;\\n@group(0) @binding(1) var<uniform> config: Config;\\n@group(0) @binding(2) var textureSampler: sampler;\\n@group(0) @binding(3) var elevationTexture: texture_2d<f32>;\\n@group(0) @binding(4) var earthTexture: texture_2d<f32>;\\n\\n// compute vertex morphed in the grid space [0-1]\\nfn computeVertexMorph(nodeMeta: NodeMeta, gridVertex: vec4<f32>) -> vec2<f32> {\\n\\n    // evaluate distance of the vertex relative to the node\\n    var dist = 0.0;\\n    let positionInGrid = gridVertex.xy * vec2<f32>(nodeMeta.size) + nodeMeta.corner.xy + nodeMeta.offset;\\n    let cameraPosition = config.cameraPosition;\\n    if (config.evaluateLodIn3D == 1) {\\n        let nodePosition = convertLatLongTo3D(toLatLong(positionInGrid));\\n        if (config.evaluateRealCamera == 1) {\\n            dist = distance(cameraPosition.xyz, nodePosition);\\n        }  else {\\n            let position = convertLatLongTo3D(toLatLong(cameraPosition.xy));\\n            dist = distance(position, nodePosition);\\n        }\\n    } else {\\n        dist = distance(cameraPosition.xy, positionInGrid);\\n    }\\n\\n    let morph = computeMorphFactor(dist, nodeMeta);\\n\\n    // temporary for debugging LOD on earth size model\\n    // let morph = 0.0;\\n    return mix(gridVertex.xy, gridVertex.zw, vec2<f32>(morph));\\n}\\n\\n@vertex\\nfn vertex_main(@location(0) vertex: vec4<f32>,\\n               @builtin(instance_index) instanceIndex: u32 ) -> VertexOut\\n{\\n    var output : VertexOut;\\n\\n    let node = instances[instanceIndex].node;\\n    let nodeData = instances[instanceIndex].nodeData;\\n\\n    let quadData = getQuadData(node);\\n    let quadLevel = quadData.z;\\n\\n    // we use 2 quads to create a panorama\\n    // nodeData = 0 for the 1st\\n    // nodeData = 1 for the 2nd\\n    var quadOffset = vec2<f32>( f32(nodeData & 1), 0.0);\\n\\n    let nodeMeta = extractNodeData(instances[instanceIndex]);\\n    let pos = ( computeVertexMorph(nodeMeta, vertex) + vec2<f32>(quadData.xy) ) * computeNodeSize(quadData.z) + quadOffset;\\n\\n    let uv = vec2<f32>(pos.xy[0] * 0.5, 1.0-pos.xy[1]);\\n    let elevation = config.elevationScale * textureSampleLevel(elevationTexture, textureSampler, uv, 0).r;\\n\\n    if (config.projectToEarth == 1) {\\n        let posProjected = convertLatLongTo3D(toLatLongAlt(pos, elevation * 9000.0));\\n        output.position = config.projectionMatrix * (config.modelMatrix * vec4<f32>(posProjected,1.0));\\n    } else {\\n        output.position = config.projectionMatrix * (config.modelMatrix * vec4<f32>(pos.xy, 0.0,1.0));\\n    }\\n\\n    output.pos2d = pos;\\n    output.uv = uv;\\n\\n    // COLOR_FACTOR change when drawing wireframe\\n    if (COLOR_FACTOR < 1.0) { // to avoid z fithing on the wireframe\\n        if (config.projectToEarth == 1) {\\n            output.position.z -= output.position.z * 0.2;\\n        } else {\\n            output.position.z -= 0.0001;\\n        }\\n    }\\n    // output.color = colorTable64[quadLevel%64];\\n    output.color = colorTable64[(quadLevel + 32 * (nodeData & 1))%64];\\n    return output;\\n}\\n\\n@fragment\\nfn fragment_main(fragData: VertexOut) -> @location(0) vec4<f32>\\n{\\n\\n    var data : vec4<f32>;\\n    if (config.displayTexture == 0) {\\n        data = textureSample(earthTexture, textureSampler, fragData.uv);\\n    } else if (config.displayTexture == 1) {\\n        data = vec4<f32>(textureSample(elevationTexture, textureSampler, fragData.uv).r);\\n    } else {\\n        data = fragData.color;\\n    }\\n\\n    if (config.evaluateRealCamera == 0 && distance(fragData.pos2d, config.cameraPosition.xy) < 0.0005 ) {\\n        return vec4(1.0,0.0,1.0,1.0);\\n    }\\n\\n    var color : vec4<f32>;\\n    if (COLOR_FACTOR < 1.0) {\\n        color = (data + vec4<f32>(1.0,1.0,0.0,1.0)) * 1.0/3.0;\\n    } else {\\n        color = data;\\n    }\\n    return color;\\n}\\n\";\n\n\nvar $85f3cc3873902ef9$exports = {};\n$85f3cc3873902ef9$exports = \"\\n// this is injected by JS\\n// const WORKGROUP_BIT_SHIFT : u32 = WORKGROUP_BIT_SHIFT_VALUE;\\n// const WORKGROUP_SIZE : u32 = WORKGROUP_SIZE_VALUE;\\n\\nstruct IndirectDrawCall {\\n    indexCount: u32,\\n    instanceCount: atomic<u32>,\\n    firstIndex: u32,\\n    baseVertex: u32,\\n    firstInstance: u32,\\n    padding0: u32,\\n    padding1: u32,\\n    padding2: u32\\n};\\n\\nstruct IndirectDraw {\\n    quads: IndirectDrawCall,\\n    wireframes: IndirectDrawCall\\n};\\n\\nstruct IndirectDispatch {\\n    x: atomic<u32>,\\n    y: atomic<u32>,\\n    z: atomic<u32>,\\n    count: atomic<u32>,\\n};\\n\\nstruct PreviousDispatch {\\n    x: u32,\\n    y: u32,\\n    z: u32,\\n    count: u32,\\n};\\n\\n@group(0) @binding(0) var<storage, read> inputNodes : array<Node>;\\n@group(0) @binding(1) var<storage, read> previousIndirect : PreviousDispatch;\\n@group(0) @binding(2) var<storage, read_write> outputNodes : array<Node>;\\n@group(0) @binding(3) var<storage, read_write> outputIndirect : IndirectDispatch;\\n@group(0) @binding(4) var<uniform> config : Config;\\n\\n@group(0) @binding(5) var<storage, read_write>  instanceBuffer : array<Node>;\\n@group(0) @binding(6) var<storage, read_write>  indirectDraw : IndirectDraw;\\n\\nfn addInstance(node: u32, nodeData: u32, instanceIndex: u32) {\\n    instanceBuffer[instanceIndex].node = node;\\n    instanceBuffer[instanceIndex].nodeData = nodeData;\\n}\\n\\n\\nfn addChildren(nodeIndex: u32) {\\n    var index : u32 = atomicAdd(&outputIndirect.count, 4u);\\n    // if we have a workgroup of 8 and we have a count of 10\\n    // we need 2 dispatch. to do this simply we divide by 4 and add 1\\n    atomicMax(&outputIndirect.x, ( (index + 4) >> WORKGROUP_BIT_SHIFT ) + 1);\\n    let children = getChildren(inputNodes[nodeIndex].node);\\n\\n    // copy & generate quads\\n    // TODO add culling on the draw quad buffer\\n    let instanceIndex = atomicAdd(&indirectDraw.quads.instanceCount, 4u);\\n    atomicAdd(&indirectDraw.wireframes.instanceCount, 4u);\\n    for (var i : u32 = 0; i < 4; i++) {\\n        outputNodes[index + i].node = children[i];\\n        outputNodes[index + i].nodeData = inputNodes[nodeIndex].nodeData;\\n        addInstance(children[i], inputNodes[nodeIndex].nodeData, instanceIndex + i);\\n    }\\n}\\n\\nfn addParentNode(nodeIndex: u32) {\\n    let node = getParent(inputNodes[nodeIndex].node);\\n\\n    let index = atomicAdd(&outputIndirect.count, 1u);\\n    atomicMax(&outputIndirect.x, ( (index + 1) >> WORKGROUP_BIT_SHIFT ) + 1);\\n\\n    outputNodes[index].node = node;\\n    outputNodes[index].nodeData = inputNodes[nodeIndex].nodeData;\\n\\n    // TODO add culling on the draw quad buffer\\n    atomicAdd(&indirectDraw.wireframes.instanceCount, 1u);\\n    let instanceIndex = atomicAdd(&indirectDraw.quads.instanceCount, 1u);\\n    addInstance(node, inputNodes[nodeIndex].nodeData, instanceIndex);\\n}\\n\\nfn copyNode(nodeIndex: u32) {\\n\\n    let index = atomicAdd(&outputIndirect.count, 1u);\\n    atomicMax(&outputIndirect.x, ( (index + 1) >> WORKGROUP_BIT_SHIFT ) + 1);\\n\\n    let node = inputNodes[nodeIndex].node;\\n    outputNodes[index].node = node;\\n    outputNodes[index].nodeData = inputNodes[nodeIndex].nodeData;\\n\\n    // TODO add culling on the draw quad buffer\\n    atomicAdd(&indirectDraw.wireframes.instanceCount, 1u);\\n    let instanceIndex = atomicAdd(&indirectDraw.quads.instanceCount, 1u);\\n    addInstance(node, inputNodes[nodeIndex].nodeData, instanceIndex);\\n}\\n\\n@compute @workgroup_size(WORKGROUP_SIZE)\\nfn main(@builtin(global_invocation_id) GlobalInvocationID : vec3<u32>) {\\n    let nodeIndex : u32 = GlobalInvocationID.x;\\n\\n    let maxNodes = previousIndirect.count;\\n    if (nodeIndex >= maxNodes) {\\n        return;\\n    }\\n\\n    let node = inputNodes[nodeIndex].node;\\n    let parent = getParent(node);\\n\\n    let currentNodeMeta = extractNodeData(inputNodes[nodeIndex]);\\n    let nodeSize = currentNodeMeta.size;\\n    let nodeLevel = currentNodeMeta.level;\\n\\n    let parentNodeMeta = extractNodeData(Node(parent, inputNodes[nodeIndex].nodeData));\\n    let parentSize = parentNodeMeta.size;\\n\\n\\n    var position = config.cameraPosition.xyz;\\n    if (config.evaluateLodIn3D == 1 && config.evaluateRealCamera == 0) {\\n        position = convertLatLongTo3D(toLatLong(position.xy));\\n    }\\n\\n    let nodeFactor = scaleFactor(nodeDistance(position.xyz, currentNodeMeta));\\n    let parentFactor = scaleFactor(nodeDistance(position.xyz, parentNodeMeta));\\n\\n    if ( NodeK * nodeSize >= nodeFactor && nodeLevel < NodeMaxLevel) {\\n        addChildren(nodeIndex);\\n    } else if ( NodeK * parentSize < parentFactor && nodeLevel != 0) {\\n        if (isChildZeroKey(node)) {\\n            addParentNode(nodeIndex);\\n        }\\n    } else {\\n        copyNode(nodeIndex);\\n    }\\n}\\n\";\n\n\nvar $3c5ae847ce8d0006$exports = {};\n$3c5ae847ce8d0006$exports = \"\\nconst NodeMaxLevel = 14;\\n\\n // extending this number helps to expand the zone for a LOD when evaluating\\n // distance in 3D\\nconst NodeK = 16;\\n\\nconst EarthRadius = 6378137.0;                     // Radius of the Earth (in meters)\\nconst PI = 3.14159265359;\\n\\nstruct Node {\\n    node: u32,\\n    nodeData: u32\\n};\\n\\nstruct Config {\\n    projectionMatrix: mat4x4<f32>,\\n    modelMatrix: mat4x4<f32>,\\n    cameraPosition: vec4<f32>,\\n    projectToEarth: u32,\\n    evaluateLodIn3D: u32,\\n    displayTexture: u32,\\n    elevationScale: f32,\\n    evaluateRealCamera: u32,\\n    lodScaleFactor: f32,\\n};\\n\\n\\nfn undilate(v : u32) -> u32 {\\n    var x = v;\\n    x = ( x | ( x >> 1)) & 0x33333333;\\n    x = ( x | ( x >> 2)) & 0x0f0f0f0f;\\n    x = ( x | ( x >> 4)) & 0x00ff00ff;\\n    x = ( x | ( x >> 8)) & 0x0000ffff;\\n    return x & 0x0000ffff;\\n}\\n\\n// return vec3\\n// x,y,level\\n// to compute real coordinate use others functions\\nfn getQuadData(node: u32) -> vec3<u32> {\\n    let leadingBit : u32 = firstLeadingBit(node);\\n    let level = leadingBit >> 1;\\n    let mask : u32 = ~(1u << leadingBit);\\n    let coordData = node & mask;\\n    // x and y are coord uint32 data\\n    // z is the size\\n    let xys = vec3<u32>( undilate( coordData & 0x55555555),\\n                         undilate( (coordData >> 1) & 0x55555555),\\n                         level );\\n    return xys;\\n}\\n\\nfn computeNodeSize(level: u32) -> f32 {\\n    return 1.0/f32(1 << level);\\n}\\n\\nfn computeNodeCenter(quadData: vec3<u32>) -> vec2<f32> {\\n    let size = computeNodeSize(quadData.z);\\n    let corner = vec2<f32>(quadData.xy) * vec2<f32>(size);\\n    return (vec2<f32>(quadData.xy) + vec2<f32>(0.5)) * vec2<f32>(size);\\n}\\n\\nfn isChildZeroKey(node: u32) -> bool {\\n    return (node & 3) == 0;\\n}\\n\\nfn getChildren(node: u32) -> vec4<u32> {\\n    let k = node << 2;\\n    return vec4<u32>(\\n        k,\\n        k | 0x1,\\n        k | 0x2,\\n        k | 0x3,\\n    );\\n}\\n\\nfn getParent(node: u32) -> u32 {\\n    return node >> 2;\\n\\n}\\n\\nfn scaleFactor(z: f32) -> f32 {\\n    return config.lodScaleFactor*z;\\n    // s(z) = 2z tan ( α / 2 )\\n    const x = (PI * 0.5);\\n    let x2 = 2.0 * tan( x * 0.5 );\\n    // it means x2 = 2 for 90 fov\\n    return z * x2;\\n}\\n\\nstruct NodeMeta {\\n    node: u32,\\n    size: f32,\\n    level: u32,\\n    coord: vec2<u32>,\\n    corner: vec2<f32>,\\n    center: vec2<f32>,\\n    offset: vec2<f32>\\n};\\n\\nfn extractNodeData(nodePacked: Node) -> NodeMeta {\\n    let leadingBit : u32 = firstLeadingBit(nodePacked.node);\\n    let level = leadingBit >> 1;\\n    let mask : u32 = ~(1u << leadingBit);\\n    let coordData = nodePacked.node & mask;\\n    // x and y are coord uint32 data\\n    // z is the size\\n    let xys = vec3<u32>( undilate( coordData & 0x55555555),\\n                         undilate( (coordData >> 1) & 0x55555555),\\n                         level );\\n\\n    var nodeMeta : NodeMeta;\\n    nodeMeta.node = nodePacked.node;\\n    nodeMeta.level = level;\\n    nodeMeta.size = 1.0/f32(1 << level);\\n    nodeMeta.coord = vec2<u32>(undilate( coordData & 0x55555555),\\n                               undilate( (coordData >> 1) & 0x55555555));\\n    nodeMeta.offset = vec2<f32>( f32(nodePacked.nodeData & 1), 0.0);\\n    nodeMeta.corner = vec2<f32>(nodeMeta.coord.xy) * vec2<f32>(nodeMeta.size);\\n    nodeMeta.center = (vec2<f32>(nodeMeta.coord.xy) + vec2<f32>(0.5)) * vec2<f32>(nodeMeta.size);\\n    return nodeMeta;\\n}\\n\\n// convert [0-2, 0-1] to lat/long\\nfn toLatLong(coord : vec2<f32>) -> vec3<f32> {\\n    return vec3<f32>( PI*(coord[1] - 0.5f), PI*(coord[0] - 1.0f), 0.0);\\n}\\n\\nfn toRect(latLong : vec2<f32>) -> vec2<f32> {\\n    return vec2<f32>( (latLong[1]/PI + 1.0) % 2.0, (latLong[0]/PI + 0.5) % 1.0);\\n}\\n\\nfn toLatLongAlt(coord : vec2<f32>, altitude: f32) -> vec3<f32> {\\n    return vec3<f32>( PI*(coord[1] - 0.5f), PI*(coord[0] - 1.0f), altitude);\\n}\\n\\nfn convertLatLongTo3D(coord : vec3<f32>) -> vec3<f32>\\n{\\n    let latitude = coord[0];\\n    let longitude = coord[1];\\n    let altitude = coord[2];\\n\\n    // const radius = 1.0;\\n    const radius = EarthRadius;                     // Radius of the Earth (in meters)\\n    const flatteningFactor = 1.0/298.257223563;   // Flattening factor WGS84 Model\\n    let cosLat = cos(latitude);\\n    let sinLat = sin(latitude);\\n    const FF = (1.0-flatteningFactor) * (1.0-flatteningFactor);\\n    let C = 1.0/sqrt(cosLat * cosLat + FF * sinLat * sinLat);\\n    let S = C * FF;\\n\\n    // let x = (radius * C) * cosLat * cos(longitude);\\n    // let y = (radius * C) * cosLat * sin(longitude);\\n    // let z = (radius * S) * sinLat;\\n\\n    // var sinLatitude = Math.sin(latitude);\\n    //     var cosLatitude = Math.cos(latitude);\\n    //     var N =\\n    //         this._radiusEquator /\\n    //         Math.sqrt(1.0 - this._eccentricitySquared * sinLatitude * sinLatitude);\\n    //     var X = (N + height) * cosLatitude * Math.cos(longitude);\\n    //     var Y = (N + height) * cosLatitude * Math.sin(longitude);\\n    //     var Z = (N * (1.0 - this._eccentricitySquared) + height) * sinLatitude;\\n    //     result[0] = X;\\n    //     result[1] = Y;\\n    //     result[2] = Z;\\n    let cosLong = cos(longitude);\\n    let sinLong = sin(longitude);\\n    let radiusAlt = radius + altitude;\\n    let x = radiusAlt * cosLat * cosLong;\\n    let y = radiusAlt * cosLat * sinLong;\\n    let z = radiusAlt * sinLat;\\n\\n    return vec3<f32>(x,y,z);\\n}\\n\\nfn nodeDistancePlannar(position: vec3<f32>, nodeMeta: NodeMeta) -> f32 {\\n    let nodePos = nodeMeta.center.xy + nodeMeta.offset;\\n\\n    // handle the wrap on longitude\\n    let distance0 = distance(position.xy, nodePos);\\n    let distance1 = distance(position.xy + vec2<f32>(2.0,0.0), nodePos);\\n    let distance2 = distance(position.xy - vec2<f32>(2.0,0.0), nodePos);\\n    return min(min(distance0, distance1), distance2);\\n}\\n\\nfn nodeDistance3D(position: vec3<f32>, nodeMeta: NodeMeta) -> f32 {\\n    let nodePos = nodeMeta.center.xy + nodeMeta.offset;\\n    let latLong = toLatLong(nodePos);\\n    let pos3d = convertLatLongTo3D(latLong);\\n\\n    // handle the wrap on longitude\\n    let distance0 = distance(position.xyz, pos3d);\\n    return distance0;\\n}\\n\\nfn nodeDistance(position: vec3<f32>, nodeMeta: NodeMeta) -> f32 {\\n\\n    if (config.evaluateLodIn3D == 1) {\\n        return nodeDistance3D(position, nodeMeta);\\n    }\\n    return nodeDistancePlannar(position, nodeMeta);\\n}\\n\\nfn computeMorphFactor(distance: f32, nodeMeta: NodeMeta) -> f32 {\\n    let parentSize = nodeMeta.size * 2.0;\\n    let size = NodeK * parentSize;\\n    let sdist = scaleFactor(distance);\\n    let factor = sdist / size;\\n\\n    // I evaluated the formula on https://www.desmos.com/calculator/rsztz4sxnp\\n    // the idea is to start to morph not at the beggining and not stopping at the end.\\n    // I could re evaluate to window of interpolation\\n    return clamp(3.5 * (factor - 0.6), 0.0, 1.0);\\n}\\n\";\n\n\nfunction $d333dbec302236c3$var$getQuadTreeComputeShader(workgroupSize) {\n    console.log(\"workgroup size\", workgroupSize);\n    // workgroupSize must be power of two\n    const workgroupBitShift = Math.log2(workgroupSize);\n    if (1 << workgroupBitShift !== Math.floor(workgroupSize)) throw `workgroupSize must be power of two (${workgroupSize})`;\n    const define = `\n    const WORKGROUP_BIT_SHIFT : u32 = ${workgroupBitShift};\\n\n    const WORKGROUP_SIZE : u32 = ${workgroupSize};\\n\n    `;\n    return define + (0, (/*@__PURE__*/$parcel$interopDefault($3c5ae847ce8d0006$exports))) + (0, (/*@__PURE__*/$parcel$interopDefault($85f3cc3873902ef9$exports)));\n}\nfunction $d333dbec302236c3$var$timestamp(query, encoder, label) {\n    if (!(0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.hasQueryTimer) return;\n    if (query.index == query.capacity) {\n        console.error(\"too many query\", query.index, label);\n        return;\n    }\n    encoder.writeTimestamp(query.querySet, query.index);\n    query.labelMap.set(label, query.index);\n    query.index++;\n}\nfunction $d333dbec302236c3$var$createQuadGeometry(grid) {\n    const positionBuffer = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBuffer({\n        size: Float32Array.BYTES_PER_ELEMENT * grid.vertices.length,\n        usage: GPUBufferUsage.VERTEX,\n        mappedAtCreation: true\n    });\n    new Float32Array(positionBuffer.getMappedRange()).set(grid.vertices);\n    positionBuffer.unmap();\n    // Create the model index buffer.\n    const triangleIndexBuffer = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBuffer({\n        size: grid.triangles.length * Uint16Array.BYTES_PER_ELEMENT,\n        usage: GPUBufferUsage.INDEX,\n        mappedAtCreation: true\n    });\n    new Uint16Array(triangleIndexBuffer.getMappedRange()).set(grid.triangles);\n    triangleIndexBuffer.unmap();\n    // Create the model index buffer.\n    const wireframeIndexBuffer = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBuffer({\n        size: grid.lines.length * Uint16Array.BYTES_PER_ELEMENT,\n        usage: GPUBufferUsage.INDEX,\n        mappedAtCreation: true\n    });\n    new Uint16Array(wireframeIndexBuffer.getMappedRange()).set(grid.lines);\n    wireframeIndexBuffer.unmap();\n    let triangles = {\n        index: triangleIndexBuffer,\n        position: positionBuffer,\n        numIndices: grid.triangles.length\n    };\n    let wireframes = {\n        index: wireframeIndexBuffer,\n        position: positionBuffer,\n        numIndices: grid.lines.length\n    };\n    return {\n        solid: triangles,\n        wireframe: wireframes\n    };\n}\n// * https://jadkhoury.github.io/files/MasterThesisFinal.pdf\n// * https://github.com/jadkhoury/TessellationDemo\nfunction $d333dbec302236c3$var$createQuadtreeData(maxLevel, elevationTexture, earthTexture, annotationTexture) {\n    const device = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device;\n    const computeShader = $d333dbec302236c3$var$getQuadTreeComputeShader(32);\n    // helper to create buffer for nodes\n    // one buffer to write the indirect call + one buffer for the node\n    const createDispatchBuffer = function(usage, label) {\n        const buffer = device.createBuffer({\n            label: label,\n            size: 4 * Uint32Array.BYTES_PER_ELEMENT,\n            usage: usage,\n            mappedAtCreation: true\n        });\n        const mappedBuffer = new Uint32Array(buffer.getMappedRange());\n        mappedBuffer[0] = 1;\n        mappedBuffer[1] = 1;\n        mappedBuffer[2] = 1;\n        mappedBuffer[3] = 2;\n        buffer.unmap();\n        return buffer;\n    };\n    const createNodeBuffer = function(numElements, usage, label) {\n        const buffer = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBuffer({\n            label: label,\n            size: (0, $2fbafa2571df286a$export$d7101d2a8b0d91b1) * numElements,\n            usage: usage,\n            mappedAtCreation: true\n        });\n        const mappedBuffer = new Uint32Array(buffer.getMappedRange());\n        // look to QuadNodeSize for explanation\n        // first quad\n        mappedBuffer[0] = 1;\n        mappedBuffer[1] = 0;\n        // second quad\n        mappedBuffer[2] = 1;\n        mappedBuffer[3] = 1;\n        for(let i = 4; i < mappedBuffer.length; i++)mappedBuffer[i] = 0xffffffff;\n        buffer.unmap();\n        return buffer;\n    };\n    const maxNodes = 1 << 2 * maxLevel + 1;\n    // create 2 instances to do pingpong\n    const nodeBuffers = [\n        {\n            nodeBuffer: createNodeBuffer(maxNodes, GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST, \"bufferNodeA\"),\n            dispatchIndirect: createDispatchBuffer(GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.INDIRECT, \"drawIndirectA\")\n        },\n        {\n            nodeBuffer: createNodeBuffer(maxNodes, GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST, \"bufferNodeB\"),\n            dispatchIndirect: createDispatchBuffer(GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.INDIRECT, \"drawIndirectB\")\n        }\n    ];\n    // this buffer is used for instance gometry\n    // contains the node + index of the node\n    const instanceBuffer = device.createBuffer({\n        label: \"instances\",\n        size: maxNodes * Uint32Array.BYTES_PER_ELEMENT * 2,\n        usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.VERTEX\n    });\n    // create buffer for the indirect draw call\n    // for quads and wireframe ( 8 * 2)\n    const drawIndirect = device.createBuffer({\n        label: \"drawIndirect(quads/wireframes)\",\n        size: 16 * Uint32Array.BYTES_PER_ELEMENT,\n        usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.INDIRECT\n    });\n    // in KB\n    const nodeBufferSize = 4 * maxNodes / 1024;\n    console.info(`init quadtree with ${maxNodes} nodes (${nodeBufferSize}KB)`);\n    // buffer for data / uniform\n    const quadTreeConfigBuffer = device.createBuffer({\n        size: (0, $2fbafa2571df286a$export$5fbe264087b547e8),\n        usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        mappedAtCreation: false\n    });\n    const computePipeline = device.createComputePipeline({\n        layout: \"auto\",\n        compute: {\n            module: device.createShaderModule({\n                code: computeShader\n            }),\n            entryPoint: \"main\"\n        }\n    });\n    const bindGroupLayout = computePipeline.getBindGroupLayout(0);\n    const createBindGroup = function(previousNodeBuffer, previousDispatchIndirect, outputNodeBuffer, outputDispatchIndirect, uniform, instanceBuffer, drawIndirect) {\n        const bindGroup = device.createBindGroup({\n            layout: bindGroupLayout,\n            entries: [\n                {\n                    binding: 0,\n                    resource: {\n                        buffer: previousNodeBuffer\n                    }\n                },\n                {\n                    binding: 1,\n                    resource: {\n                        buffer: previousDispatchIndirect\n                    }\n                },\n                {\n                    binding: 2,\n                    resource: {\n                        buffer: outputNodeBuffer\n                    }\n                },\n                {\n                    binding: 3,\n                    resource: {\n                        buffer: outputDispatchIndirect\n                    }\n                },\n                {\n                    binding: 4,\n                    resource: {\n                        buffer: uniform\n                    }\n                },\n                {\n                    binding: 5,\n                    resource: {\n                        buffer: instanceBuffer\n                    }\n                },\n                {\n                    binding: 6,\n                    resource: {\n                        buffer: drawIndirect\n                    }\n                }\n            ]\n        });\n        return bindGroup;\n    };\n    const computeBindGroups = [\n        createBindGroup(nodeBuffers[0].nodeBuffer, nodeBuffers[0].dispatchIndirect, nodeBuffers[1].nodeBuffer, nodeBuffers[1].dispatchIndirect, quadTreeConfigBuffer, instanceBuffer, drawIndirect),\n        createBindGroup(nodeBuffers[1].nodeBuffer, nodeBuffers[1].dispatchIndirect, nodeBuffers[0].nodeBuffer, nodeBuffers[0].dispatchIndirect, quadTreeConfigBuffer, instanceBuffer, drawIndirect)\n    ];\n    // sampler for\n    const sampler = device.createSampler({\n        magFilter: \"linear\",\n        minFilter: \"linear\"\n    });\n    const createRenderGeometry = function(primitive, shaderModule) {\n        const pipeline = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createRenderPipeline({\n            layout: \"auto\",\n            vertex: {\n                module: shaderModule,\n                entryPoint: \"vertex_main\",\n                buffers: [\n                    {\n                        arrayStride: 16,\n                        attributes: [\n                            {\n                                shaderLocation: 0,\n                                format: \"float32x4\",\n                                offset: 0\n                            }\n                        ]\n                    }\n                ]\n            },\n            fragment: {\n                module: shaderModule,\n                entryPoint: \"fragment_main\",\n                targets: [\n                    {\n                        format: navigator.gpu.getPreferredCanvasFormat()\n                    }\n                ]\n            },\n            primitive: {\n                topology: primitive,\n                cullMode: \"back\",\n                frontFace: \"ccw\"\n            },\n            depthStencil: {\n                depthWriteEnabled: true,\n                depthCompare: \"less\",\n                format: \"depth24plus\"\n            }\n        });\n        const layout = pipeline.getBindGroupLayout(0);\n        const bindGroup = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createBindGroup({\n            layout: layout,\n            entries: [\n                {\n                    binding: 0,\n                    resource: {\n                        buffer: instanceBuffer\n                    }\n                },\n                {\n                    binding: 1,\n                    resource: {\n                        buffer: quadTreeConfigBuffer\n                    }\n                },\n                {\n                    binding: 2,\n                    resource: sampler\n                },\n                {\n                    binding: 3,\n                    resource: elevationTexture.createView()\n                },\n                {\n                    binding: 4,\n                    resource: earthTexture.createView()\n                }\n            ]\n        });\n        return {\n            pipeline: pipeline,\n            bindGroup: bindGroup\n        };\n    };\n    const geometry1 = $d333dbec302236c3$var$createQuadGeometry((0, $2fbafa2571df286a$export$30880409f0d88fa1));\n    const geometry4 = $d333dbec302236c3$var$createQuadGeometry((0, $2fbafa2571df286a$export$f8417bee550c7247));\n    // create one pipeline for solid and wireframe\n    const drawQuadPipeline = createRenderGeometry(\"triangle-list\", (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createShaderModule({\n        code: \"const COLOR_FACTOR : f32 = 1.0;\\n\" + (0, (/*@__PURE__*/$parcel$interopDefault($3c5ae847ce8d0006$exports))) + (0, (/*@__PURE__*/$parcel$interopDefault($2cb80031daad6395$exports)))\n    }));\n    const drawWireframePipeline = createRenderGeometry(\"line-list\", (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createShaderModule({\n        code: \"const COLOR_FACTOR : f32 = 0.1;\\n\" + (0, (/*@__PURE__*/$parcel$interopDefault($3c5ae847ce8d0006$exports))) + (0, (/*@__PURE__*/$parcel$interopDefault($2cb80031daad6395$exports)))\n    }));\n    const createQuery = function(capacity) {\n        if (!(0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.hasQueryTimer) return {\n            capacity: 0,\n            counters: null,\n            querySet: null,\n            labelMap: new Map(),\n            index: 0\n        };\n        const querySet = device.createQuerySet({\n            type: \"timestamp\",\n            count: capacity\n        });\n        const queryBuffer = device.createBuffer({\n            size: 8 * capacity,\n            usage: GPUBufferUsage.QUERY_RESOLVE | GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST\n        });\n        return {\n            capacity: capacity,\n            counters: queryBuffer,\n            querySet: querySet,\n            labelMap: new Map(),\n            index: 0\n        };\n    };\n    // I wanted to test implement annotation on the globe but it will be for another time\n    // const annotations = createAnnotations(quadTreeConfigBuffer, annotationTexture);\n    const quadTree = {\n        frame: 0,\n        maxNodes: maxNodes,\n        nodeBuffers: nodeBuffers,\n        computeBindGroups: computeBindGroups,\n        computePipeline: computePipeline,\n        drawIndirect: drawIndirect,\n        instanceBuffer: instanceBuffer,\n        gridGeometries: [\n            geometry1,\n            geometry4\n        ],\n        renderQuad: drawQuadPipeline,\n        renderWireframe: drawWireframePipeline,\n        configBuffer: quadTreeConfigBuffer,\n        annotations: null,\n        config: {\n            projectionMatrix: null,\n            modelMatrix: null,\n            cameraPosition: null,\n            projectToEarth: true,\n            evaluateLodIn3D: false,\n            evaluateRealCamera: false,\n            displayTexture: 0,\n            elevationScale: 1.0,\n            lodScaleFactor: 2.0\n        },\n        depthTexture: null,\n        query: createQuery(4)\n    };\n    return quadTree;\n}\nfunction $d333dbec302236c3$var$initUpdate(pingPongBuffer) {\n    pingPongBuffer.query.index = 0;\n}\nfunction $d333dbec302236c3$var$updateDataBuffer(config, buffer) {\n    // need to try shader reflexion when I will have time\n    // https://brendan-duncan.github.io/wgsl_reflect/example.html\n    const endianness = true;\n    let tmpBuffer = new ArrayBuffer((0, $2fbafa2571df286a$export$5fbe264087b547e8));\n    let tmpView = new DataView(tmpBuffer);\n    // see https://vscode.dev/github/cedricpinson/webgpu-experiment/blob/8b10d67ee4addc918006c7360e0f9667f8c04d60/src/quadtree-types.ts#L46\n    let offset = 0;\n    for(let i = 0; i < 16; i++){\n        tmpView.setFloat32(offset, config.projectionMatrix[i], endianness);\n        offset += 4;\n    }\n    for(let i = 0; i < 16; i++){\n        tmpView.setFloat32(offset, config.modelMatrix[i], endianness);\n        offset += 4;\n    }\n    for(let i = 0; i < 4; i++){\n        tmpView.setFloat32(offset, config.cameraPosition[i], endianness);\n        offset += 4;\n    }\n    tmpView.setUint32(offset + 0, config.projectToEarth == true ? 1 : 0, endianness);\n    tmpView.setUint32(offset + 4, config.evaluateLodIn3D == true ? 1 : 0, endianness);\n    tmpView.setUint32(offset + 8, config.displayTexture, endianness);\n    tmpView.setFloat32(offset + 12, config.elevationScale, endianness);\n    tmpView.setUint32(offset + 16, config.evaluateRealCamera == true ? 1 : 0, endianness);\n    tmpView.setFloat32(offset + 20, config.lodScaleFactor, endianness);\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.queue.writeBuffer(buffer, 0, tmpView, 0, (0, $2fbafa2571df286a$export$5fbe264087b547e8));\n}\nasync function $d333dbec302236c3$var$updateQuadTree(pingPongBuffer) {\n    const device = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device;\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.frameNumber = pingPongBuffer.frame;\n    const index = pingPongBuffer.frame;\n    pingPongBuffer.frame += 1;\n    // data set from the application\n    $d333dbec302236c3$var$updateDataBuffer(pingPongBuffer.config, pingPongBuffer.configBuffer);\n    // reset the count of the next buffer to write the new node results\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.queue.writeBuffer(pingPongBuffer.nodeBuffers[(index + 1) % 2].dispatchIndirect, 0, new Uint32Array([\n        0,\n        1,\n        1,\n        0\n    ]));\n    const geometry = pingPongBuffer.gridGeometries[(0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.gridResolution];\n    // reset the drawIndirect buffer\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.queue.writeBuffer(pingPongBuffer.drawIndirect, 0, new Uint32Array([\n        geometry.solid.numIndices,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.wireframe === true ? geometry.wireframe.numIndices : 0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0\n    ]));\n    const commandEncoder = device.createCommandEncoder();\n    $d333dbec302236c3$var$timestamp(pingPongBuffer.query, commandEncoder, \"updateStart\");\n    const pass = commandEncoder.beginComputePass();\n    pass.setPipeline(pingPongBuffer.computePipeline);\n    // bind groups\n    pass.setBindGroup(0, pingPongBuffer.computeBindGroups[index % 2]);\n    pass.dispatchWorkgroupsIndirect(pingPongBuffer.nodeBuffers[index % 2].dispatchIndirect, 0);\n    pass.end();\n    let debugBuffers = null;\n    if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.debugBuffers) debugBuffers = (0, $9eb94756a2bdee36$export$11c5c94a76e900b4)(commandEncoder, pingPongBuffer, index % 2, (index + 1) % 2);\n    $d333dbec302236c3$var$timestamp(pingPongBuffer.query, commandEncoder, \"updateEnd\");\n    device.queue.submit([\n        commandEncoder.finish()\n    ]);\n    if (debugBuffers) (0, $9eb94756a2bdee36$export$1a4bdd241c653de4)(debugBuffers, pingPongBuffer.maxNodes, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.frameNumber);\n    return true;\n}\nfunction $d333dbec302236c3$var$getRendePassDesc(quadTree) {\n    const colorView = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.context.getCurrentTexture().createView();\n    // create / update depthTexture\n    if (quadTree.depthTexture == null || quadTree.depthTexture.width !== (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.context.getCurrentTexture().width || quadTree.depthTexture.height !== (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.context.getCurrentTexture().height) {\n        const depthTextureDesc = {\n            size: [\n                (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.context.getCurrentTexture().width,\n                (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.context.getCurrentTexture().height,\n                1\n            ],\n            dimension: \"2d\",\n            format: \"depth24plus\",\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\n        };\n        if (quadTree.depthTexture) quadTree.depthTexture.destroy();\n        quadTree.depthTexture = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createTexture(depthTextureDesc);\n    }\n    let depthView = quadTree.depthTexture.createView();\n    const colorAttachment = {\n        view: colorView,\n        clearValue: [\n            0,\n            0,\n            0,\n            1\n        ],\n        loadOp: \"clear\",\n        storeOp: \"store\"\n    };\n    const depthAttachment = {\n        view: depthView,\n        depthClearValue: 1,\n        depthLoadOp: \"clear\",\n        depthStoreOp: \"store\"\n    };\n    const renderPassDesc = {\n        colorAttachments: [\n            colorAttachment\n        ],\n        depthStencilAttachment: depthAttachment\n    };\n    return renderPassDesc;\n}\nasync function $d333dbec302236c3$var$renderQuads(pingPongBuffer) {\n    const commandEncoder = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.createCommandEncoder();\n    $d333dbec302236c3$var$timestamp(pingPongBuffer.query, commandEncoder, \"renderStart\");\n    const index = pingPongBuffer.frame;\n    const pass = commandEncoder.beginRenderPass($d333dbec302236c3$var$getRendePassDesc(pingPongBuffer));\n    const geometry = pingPongBuffer.gridGeometries[(0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.gridResolution];\n    pass.setPipeline(pingPongBuffer.renderQuad.pipeline);\n    pass.setVertexBuffer(0, geometry.solid.position);\n    pass.setIndexBuffer(geometry.solid.index, \"uint16\", 0);\n    pass.setBindGroup(0, pingPongBuffer.renderQuad.bindGroup);\n    pass.drawIndexedIndirect(pingPongBuffer.drawIndirect, 0);\n    // wireframe\n    pass.setPipeline(pingPongBuffer.renderWireframe.pipeline);\n    pass.setVertexBuffer(0, geometry.wireframe.position);\n    pass.setIndexBuffer(geometry.wireframe.index, \"uint16\", 0);\n    pass.setBindGroup(0, pingPongBuffer.renderWireframe.bindGroup);\n    pass.drawIndexedIndirect(pingPongBuffer.drawIndirect, 32);\n    pass.end();\n    // debug code\n    let debugBuffer = null;\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.debugBuffers;\n    $d333dbec302236c3$var$timestamp(pingPongBuffer.query, commandEncoder, \"renderEnd\");\n    if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.hasQueryTimer) commandEncoder.resolveQuerySet(pingPongBuffer.query.querySet, 0, pingPongBuffer.query.capacity, pingPongBuffer.query.counters, 0); // destination offset\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device.queue.submit([\n        commandEncoder.finish()\n    ]);\n    if (debugBuffer) (0, $9eb94756a2bdee36$export$5e2add62028aae40)(debugBuffer, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.frameNumber);\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.debugBuffers = false;\n    if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.hasQueryTimer) {\n        // get counter back\n        const bufferRead = (0, $df5bef30413a053b$export$29e6d74775fd6f12)((0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.device, pingPongBuffer.query.counters);\n        await bufferRead.mapAsync(GPUMapMode.READ);\n        const arrayBuffer = bufferRead.getMappedRange();\n        // Decode it into an array of timestamps in nanoseconds\n        const timingsNanoseconds = new BigInt64Array(arrayBuffer);\n        const timeUpdateQuadTreeInMS = Number(timingsNanoseconds[pingPongBuffer.query.labelMap.get(\"updateEnd\")] - timingsNanoseconds[pingPongBuffer.query.labelMap.get(\"updateStart\")]) / 1000000;\n        const timeRenderQuadTreeInMS = Number(timingsNanoseconds[pingPongBuffer.query.labelMap.get(\"renderEnd\")] - timingsNanoseconds[pingPongBuffer.query.labelMap.get(\"renderStart\")]) / 1000000;\n        bufferRead.unmap();\n        bufferRead.destroy();\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.updateQuadTree = timeUpdateQuadTreeInMS;\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.renderQuadTree = timeRenderQuadTreeInMS;\n    }\n    return true;\n}\nfunction $d333dbec302236c3$export$97b3e5f57dadf554(elevationTexture, earthTexture, annotationTexture) {\n    const quadTreeData = $d333dbec302236c3$var$createQuadtreeData((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.maxLod, elevationTexture, earthTexture, annotationTexture);\n    return {\n        quadTreeData: quadTreeData,\n        initUpdate: $d333dbec302236c3$var$initUpdate,\n        updateQuadTree: $d333dbec302236c3$var$updateQuadTree,\n        renderQuadTree: $d333dbec302236c3$var$renderQuads\n    };\n}\n\n\nvar $c398a0ea03e027b6$exports = {};\n/*! Tweakpane 3.1.9 (c) 2016 cocopon, licensed under the MIT license. */ (function(global, factory) {\n    factory($c398a0ea03e027b6$exports);\n})($c398a0ea03e027b6$exports, function(exports1) {\n    \"use strict\";\n    /***\n     * A simple semantic versioning perser.\n     */ class Semver {\n        /**\n         * @hidden\n         */ constructor(text){\n            const [core, prerelease] = text.split(\"-\");\n            const coreComps = core.split(\".\");\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [\n                this.major,\n                this.minor,\n                this.patch\n            ].join(\".\");\n            return this.prerelease !== null ? [\n                core,\n                this.prerelease\n            ].join(\"-\") : core;\n        }\n    }\n    class BladeApi {\n        constructor(controller){\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get(\"disabled\");\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set(\"disabled\", disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get(\"hidden\");\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set(\"hidden\", hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set(\"disposed\", true);\n        }\n    }\n    class TpEvent {\n        constructor(target){\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last){\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey){\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded){\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index){\n            super(target);\n            this.index = index;\n        }\n    }\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) return false;\n        for(let i = 0; i < a1.length; i++){\n            if (a1[i] !== a2[i]) return false;\n        }\n        return true;\n    }\n    function isPropertyWritable(obj, key) {\n        let target = obj;\n        do {\n            const d = Object.getOwnPropertyDescriptor(target, key);\n            if (d && (d.set !== undefined || d.writable === true)) return true;\n            target = Object.getPrototypeOf(target);\n        }while (target !== null);\n        return false;\n    }\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: ()=>\"View has been already disposed\",\n        invalidparams: (context)=>`Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context)=>`No matching controller for '${context.key}'`,\n        nomatchingview: (context)=>`No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: ()=>`Value is not bindable`,\n        propertynotfound: (context)=>`Property '${context.name}' not found`,\n        shouldneverhappen: ()=>\"This error should never happen\"\n    };\n    class TpError {\n        static alreadyDisposed() {\n            return new TpError({\n                type: \"alreadydisposed\"\n            });\n        }\n        static notBindable() {\n            return new TpError({\n                type: \"notbindable\"\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: \"propertynotfound\",\n                context: {\n                    name: name\n                }\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({\n                type: \"shouldneverhappen\"\n            });\n        }\n        constructor(config){\n            var _a;\n            this.message = (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : \"Unexpected error\";\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n    }\n    class BindingTarget {\n        constructor(obj, key, opt_id){\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) return false;\n            if (typeof obj !== \"object\" && typeof obj !== \"function\") return false;\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) throw TpError.notBindable();\n            if (!(name in valueObj)) throw TpError.propertyNotFound(name);\n            valueObj[name] = value;\n        }\n    }\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get(\"label\");\n        }\n        set label(label) {\n            this.controller_.props.set(\"label\", label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get(\"title\")) !== null && _a !== void 0 ? _a : \"\";\n        }\n        set title(title) {\n            this.controller_.valueController.props.set(\"title\", title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, ()=>{\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n    class Emitter {\n        constructor(){\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) observers = this.observers_[eventName] = [];\n            observers.push({\n                handler: handler\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) this.observers_[eventName] = observers.filter((observer)=>{\n                return observer.handler !== handler;\n            });\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) return;\n            observers.forEach((observer)=>{\n                observer.handler(event);\n            });\n        }\n    }\n    const PREFIX = \"tp\";\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier)=>{\n            return [\n                PREFIX,\n                \"-\",\n                viewName,\n                \"v\",\n                opt_elementName ? `_${opt_elementName}` : \"\",\n                opt_modifier ? `-${opt_modifier}` : \"\"\n            ].join(\"\");\n        };\n        return fn;\n    }\n    function compose(h1, h2) {\n        return (input)=>h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on(\"change\", compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n    function applyClass(elem, className, active) {\n        if (active) elem.classList.add(className);\n        else elem.classList.remove(className);\n    }\n    function valueToClassName(elem, className) {\n        return (value)=>{\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text)=>{\n            elem.textContent = text !== null && text !== void 0 ? text : \"\";\n        });\n    }\n    const className$q = ClassName(\"btn\");\n    class ButtonView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement(\"button\");\n            buttonElem.classList.add(className$q(\"b\"));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement(\"div\");\n            titleElem.classList.add(className$q(\"t\"));\n            bindValueToTextContent(config.props.value(\"title\"), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n    class ButtonController {\n        constructor(doc, config){\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps\n            });\n            this.view.buttonElement.addEventListener(\"click\", this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit(\"click\", {\n                sender: this\n            });\n        }\n    }\n    class BoundValue {\n        constructor(initialValue, config){\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : (v1, v2)=>v1 === v2;\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true\n            };\n            const constrainedValue = this.constraint_ ? this.constraint_.constrain(rawValue) : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) return;\n            this.emitter.emit(\"beforechange\", {\n                sender: this\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit(\"change\", {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this\n            });\n        }\n    }\n    class PrimitiveValue {\n        constructor(initialValue){\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) return;\n            this.emitter.emit(\"beforechange\", {\n                sender: this\n            });\n            this.value_ = value;\n            this.emitter.emit(\"change\", {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this\n            });\n        }\n    }\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) return new PrimitiveValue(initialValue);\n        return new BoundValue(initialValue, config);\n    }\n    class ValueMap {\n        constructor(valueMap){\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for(const key in this.valMap_){\n                const v = this.valMap_[key];\n                v.emitter.on(\"change\", ()=>{\n                    this.emitter.emit(\"change\", {\n                        key: key,\n                        sender: this\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key)=>{\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key])\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key)=>{\n            if (tmp === undefined) return undefined;\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded ? Object.assign(Object.assign({}, tmp), {\n                [key]: result.value\n            }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item)=>{\n            if (tmp === undefined) return undefined;\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) return undefined;\n            return [\n                ...tmp,\n                result.value\n            ];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) return false;\n        return typeof value === \"object\";\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional)=>(v)=>{\n                if (!optional && v === undefined) return {\n                    succeeded: false,\n                    value: undefined\n                };\n                if (optional && v === undefined) return {\n                    succeeded: true,\n                    value: undefined\n                };\n                const result = parse(v);\n                return result !== undefined ? {\n                    succeeded: true,\n                    value: result\n                } : {\n                    succeeded: false,\n                    value: undefined\n                };\n            };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse)=>createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v)=>typeof v === \"boolean\" ? v : undefined)(optional),\n            number: createParamsParserBuilder((v)=>typeof v === \"number\" ? v : undefined)(optional),\n            string: createParamsParserBuilder((v)=>typeof v === \"string\" ? v : undefined)(optional),\n            function: createParamsParserBuilder((v)=>typeof v === \"function\" ? v : undefined)(optional),\n            constant: (value)=>createParamsParserBuilder((v)=>v === value ? value : undefined)(optional),\n            raw: createParamsParserBuilder((v)=>v)(optional),\n            object: (keyToParserMap)=>createParamsParserBuilder((v)=>{\n                    if (!isObject(v)) return undefined;\n                    return parseObject(v, keyToParserMap);\n                })(optional),\n            array: (itemParser)=>createParamsParserBuilder((v)=>{\n                    if (!Array.isArray(v)) return undefined;\n                    return parseArray(v, itemParser);\n                })(optional)\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false)\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            \"Please rebuild plugins with the latest core package.\"\n        ].join(\" \"));\n    }\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) elem.parentElement.removeChild(elem);\n        return null;\n    }\n    class ReadonlyValue {\n        constructor(value){\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options)=>{\n                    value.setRawValue(rawValue, options);\n                }\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n    const className$p = ClassName(\"\");\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$p(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap){\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ = this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value(\"disabled\").emitter.on(\"change\", this.onDisabledChange_);\n            this.value(\"parent\").emitter.on(\"change\", this.onParentChange_);\n            (_a = this.get(\"parent\")) === null || _a === void 0 || _a.globalDisabled.emitter.on(\"change\", this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, \"disabled\"));\n            bindValueMap(this, \"hidden\", valueToModifier(elem, \"hidden\"));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled)=>{\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled)=>{\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value(\"disposed\").emitter.on(\"change\", (disposed)=>{\n                if (disposed) callback();\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get(\"parent\");\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get(\"disabled\");\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 || prevParent.globalDisabled.emitter.off(\"change\", this.onParentGlobalDisabledChange_);\n            (_a = this.get(\"parent\")) === null || _a === void 0 || _a.globalDisabled.emitter.on(\"change\", this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n    function getAllBladePositions() {\n        return [\n            \"veryfirst\",\n            \"first\",\n            \"last\",\n            \"verylast\"\n        ];\n    }\n    const className$o = ClassName(\"\");\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: \"vfst\",\n        first: \"fst\",\n        last: \"lst\",\n        verylast: \"vlst\"\n    };\n    class BladeController {\n        constructor(config){\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value(\"positions\").emitter.on(\"change\", ()=>{\n                getAllBladePositions().forEach((pos)=>{\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get(\"positions\").forEach((pos)=>{\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(()=>{\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!(\"parent\" in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: \"parent\",\n                    target: ViewProps.name,\n                    place: \"BladeController.parent\"\n                });\n                return;\n            }\n            this.viewProps.set(\"parent\", this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n    const SVG_NS = \"http://www.w3.org/2000/svg\";\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = \"none\";\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return globalThis;\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) return null;\n        const isBrowser = \"document\" in win;\n        return isBrowser ? canvasElement.getContext(\"2d\", {\n            willReadFrequently: true\n        }) : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>'\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, \"svg\");\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) element.parentElement.removeChild(element);\n    }\n    function removeChildElements(element) {\n        while(element.children.length > 0)element.removeChild(element.children[0]);\n    }\n    function removeChildNodes(element) {\n        while(element.childNodes.length > 0)element.removeChild(element.childNodes[0]);\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) return forceCast(ev.relatedTarget);\n        if (\"explicitOriginalTarget\" in ev) return ev.explicitOriginalTarget;\n        return null;\n    }\n    const className$n = ClassName(\"lbl\");\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split(\"\\n\").map((line)=>{\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index)=>{\n            if (index > 0) frag.appendChild(doc.createElement(\"br\"));\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement(\"div\");\n            labelElem.classList.add(className$n(\"l\"));\n            bindValueMap(config.props, \"label\", (value)=>{\n                if (isEmpty(value)) this.element.classList.add(className$n(undefined, \"nol\"));\n                else {\n                    this.element.classList.remove(className$n(undefined, \"nol\"));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement(\"div\");\n            valueElem.classList.add(className$n(\"v\"));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n    class LabelController extends BladeController {\n        constructor(doc, config){\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), {\n                view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps\n                }),\n                viewProps: viewProps\n            }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n    const ButtonBladePlugin = {\n        id: \"button\",\n        type: \"blade\",\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant(\"button\"),\n                label: p.optional.string\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title\n                    }),\n                    viewProps: args.viewProps\n                })\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof LabelController)) return null;\n            if (!(args.controller.valueController instanceof ButtonController)) return null;\n            return new ButtonApi(args.controller);\n        }\n    };\n    class ValueBladeController extends BladeController {\n        constructor(config){\n            super(config);\n            this.value = config.value;\n        }\n    }\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray\n            })\n        });\n    }\n    class Foldable extends ValueMap {\n        constructor(valueMap){\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get(\"temporaryExpanded\")) !== null && _a !== void 0 ? _a : this.get(\"expanded\");\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) return \"0\";\n            const exHeight = this.get(\"expandedHeight\");\n            if (this.get(\"shouldFixHeight\") && !isEmpty(exHeight)) return `${exHeight}px`;\n            return \"auto\";\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = ()=>{\n                const expanded = this.styleExpanded;\n                if (expanded) elem.classList.add(expandedClassName);\n                else elem.classList.remove(expandedClassName);\n            };\n            bindValueMap(this, \"expanded\", onExpand);\n            bindValueMap(this, \"temporaryExpanded\", onExpand);\n        }\n        cleanUpTransition() {\n            this.set(\"shouldFixHeight\", false);\n            this.set(\"expandedHeight\", null);\n            this.set(\"completed\", true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, ()=>{\n            folder.set(\"expandedHeight\", null);\n            folder.set(\"temporaryExpanded\", true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set(\"temporaryExpanded\", null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value(\"expanded\").emitter.on(\"beforechange\", ()=>{\n            foldable.set(\"completed\", false);\n            if (isEmpty(foldable.get(\"expandedHeight\"))) {\n                const h = computeExpandedFolderHeight(foldable, elem);\n                if (h > 0) foldable.set(\"expandedHeight\", h);\n            }\n            foldable.set(\"shouldFixHeight\", true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on(\"change\", ()=>{\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener(\"transitionend\", (ev)=>{\n            if (ev.propertyName !== \"height\") return;\n            foldable.cleanUpTransition();\n        });\n    }\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi){\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: \"button\"\n        }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: \"folder\"\n        }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: \"separator\"\n        }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), {\n            view: \"tab\"\n        }));\n    }\n    class NestedOrderedSet {\n        constructor(extract){\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()){\n                if (callback(item)) return item;\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) throw TpError.shouldNeverHappen();\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on(\"add\", this.onSubListAdd_);\n                subList.emitter.on(\"remove\", this.onSubListRemove_);\n                subList.allItems().forEach((item)=>{\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit(\"add\", {\n                index: index,\n                item: item,\n                root: this,\n                target: this\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) return;\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off(\"add\", this.onSubListAdd_);\n                subList.emitter.off(\"remove\", this.onSubListRemove_);\n            }\n            this.emitter.emit(\"remove\", {\n                index: index,\n                item: item,\n                root: this,\n                target: this\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit(\"add\", {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit(\"remove\", {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target\n            });\n        }\n    }\n    class InputBindingApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on(\"change\", this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get(\"label\");\n        }\n        set label(label) {\n            this.controller_.props.set(\"label\", label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit(\"change\", {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last)\n            });\n        }\n    }\n    class InputBindingController extends LabelController {\n        constructor(doc, config){\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on(\"update\", this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get(\"label\");\n        }\n        set label(label) {\n            this.controller_.props.set(\"label\", label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit(\"update\", {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey)\n            });\n        }\n    }\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config){\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(()=>{\n                this.binding.dispose();\n            });\n        }\n    }\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) return api[\"apiSet_\"];\n        if (api instanceof RackLikeApi) return api[\"rackApi_\"][\"apiSet_\"];\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api)=>api.controller_ === controller);\n        if (!api) throw TpError.shouldNeverHappen();\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) throw TpError.notBindable();\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool){\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on(\"add\", this.onRackAdd_);\n            rack.emitter.on(\"remove\", this.onRackRemove_);\n            rack.emitter.on(\"inputchange\", this.onRackInputChange_);\n            rack.emitter.on(\"monitorupdate\", this.onRackMonitorUpdate_);\n            rack.children.forEach((bc)=>{\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc)=>getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a)=>a.controller_ === api.controller_);\n            if (gapi) this.apiSet_.remove(gapi);\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api)=>api.controller_ === bc);\n            if (!api) this.apiSet_.add(this.pool_.createBladeApi(bc));\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit(\"change\", {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last)\n                });\n            } else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit(\"change\", {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last)\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) throw TpError.shouldNeverHappen();\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit(\"update\", {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey)\n            });\n        }\n    }\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool){\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable.value(\"expanded\").emitter.on(\"change\", (ev)=>{\n                this.emitter_.emit(\"fold\", {\n                    event: new TpFoldEvent(this, ev.sender.rawValue)\n                });\n            });\n            this.rackApi_.on(\"change\", (ev)=>{\n                this.emitter_.emit(\"change\", {\n                    event: ev\n                });\n            });\n            this.rackApi_.on(\"update\", (ev)=>{\n                this.emitter_.emit(\"update\", {\n                    event: ev\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get(\"expanded\");\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set(\"expanded\", expanded);\n        }\n        get title() {\n            return this.controller_.props.get(\"title\");\n        }\n        set title(title) {\n            this.controller_.props.set(\"title\", title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    class RackLikeController extends BladeController {\n        constructor(config){\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps\n            });\n            this.rackController = config.rackController;\n        }\n    }\n    class PlainView {\n        constructor(doc, config){\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n    function findInputBindingController(bcs, b) {\n        for(let i = 0; i < bcs.length; i++){\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) return bc;\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for(let i = 0; i < bcs.length; i++){\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) return bc;\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for(let i = 0; i < bcs.length; i++){\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) return bc;\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) return bc.rack;\n        if (bc instanceof RackLikeController) return bc.rackController.rack;\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack[\"bcSet_\"] : null;\n    }\n    class BladeRack {\n        constructor(config){\n            var _a, _b;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ = this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n            (_b = this.blade_) === null || _b === void 0 || _b.value(\"positions\").emitter.on(\"change\", this.onBladePositionsChange_);\n            this.viewProps = config.viewProps;\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on(\"add\", this.onSetAdd_);\n            this.bcSet_.emitter.on(\"remove\", this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            var _a;\n            (_a = bc.parent) === null || _a === void 0 || _a.remove(bc);\n            if (isPropertyWritable(bc, \"parent\")) bc.parent = this;\n            else {\n                bc[\"parent_\"] = this;\n                warnMissing({\n                    key: \"parent\",\n                    target: \"BladeController\",\n                    place: \"BladeRack.add\"\n                });\n            }\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            if (isPropertyWritable(bc, \"parent\")) bc.parent = null;\n            else {\n                bc[\"parent_\"] = null;\n                warnMissing({\n                    key: \"parent\",\n                    target: \"BladeController\",\n                    place: \"BladeRack.remove\"\n                });\n            }\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc)=>{\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit(\"add\", {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this\n            });\n            if (!isRoot) return;\n            const bc = ev.item;\n            bc.viewProps.emitter.on(\"change\", this.onChildViewPropsChange_);\n            bc.blade.value(\"positions\").emitter.on(\"change\", this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) bc.binding.emitter.on(\"change\", this.onChildInputChange_);\n            else if (bc instanceof MonitorBindingController) bc.binding.emitter.on(\"update\", this.onChildMonitorUpdate_);\n            else if (bc instanceof ValueBladeController) bc.value.emitter.on(\"change\", this.onChildValueChange_);\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on(\"layout\", this.onDescendantLayout_);\n                    emitter.on(\"inputchange\", this.onDescendantInputChange_);\n                    emitter.on(\"monitorupdate\", this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit(\"remove\", {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this\n            });\n            if (!isRoot) return;\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) bc.binding.emitter.off(\"change\", this.onChildInputChange_);\n            else if (bc instanceof MonitorBindingController) bc.binding.emitter.off(\"update\", this.onChildMonitorUpdate_);\n            else if (bc instanceof ValueBladeController) bc.value.emitter.off(\"change\", this.onChildValueChange_);\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off(\"layout\", this.onDescendantLayout_);\n                    emitter.off(\"inputchange\", this.onDescendantInputChange_);\n                    emitter.off(\"monitorupdate\", this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc)=>!bc.viewProps.get(\"hidden\"));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc)=>{\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push(\"first\");\n                    if (!this.blade_ || this.blade_.get(\"positions\").includes(\"veryfirst\")) ps.push(\"veryfirst\");\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push(\"last\");\n                    if (!this.blade_ || this.blade_.get(\"positions\").includes(\"verylast\")) ps.push(\"verylast\");\n                }\n                bc.blade.set(\"positions\", ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit(\"layout\", {\n                sender: this\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit(\"layout\", {\n                sender: this\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc)=>{\n                return bc.viewProps.get(\"disposed\");\n            });\n            disposedUcs.forEach((bc)=>{\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) throw TpError.alreadyDisposed();\n            this.emitter.emit(\"inputchange\", {\n                bladeController: bc,\n                options: ev.options,\n                sender: this\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) throw TpError.alreadyDisposed();\n            this.emitter.emit(\"monitorupdate\", {\n                bladeController: bc,\n                sender: this\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) throw TpError.alreadyDisposed();\n            this.emitter.emit(\"inputchange\", {\n                bladeController: bc,\n                options: ev.options,\n                sender: this\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit(\"layout\", {\n                sender: this\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit(\"inputchange\", {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit(\"monitorupdate\", {\n                bladeController: ev.bladeController,\n                sender: this\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n    class RackController extends BladeController {\n        constructor(doc, config){\n            super(Object.assign(Object.assign({}, config), {\n                view: new PlainView(doc, {\n                    viewName: \"brk\",\n                    viewProps: config.viewProps\n                })\n            }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack({\n                blade: config.root ? undefined : config.blade,\n                viewProps: config.viewProps\n            });\n            rack.emitter.on(\"add\", this.onRackAdd_);\n            rack.emitter.on(\"remove\", this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(()=>{\n                for(let i = this.rack.children.length - 1; i >= 0; i--){\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set(\"disposed\", true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) return;\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) return;\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n    const bladeContainerClassName = ClassName(\"cnt\");\n    class FolderView {\n        constructor(doc, config){\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : \"fld\");\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, \"expanded\"));\n            bindValueMap(this.foldable_, \"completed\", valueToClassName(this.element, this.className_(undefined, \"cpl\")));\n            const buttonElem = doc.createElement(\"button\");\n            buttonElem.classList.add(this.className_(\"b\"));\n            bindValueMap(config.props, \"title\", (title)=>{\n                if (isEmpty(title)) this.element.classList.add(this.className_(undefined, \"not\"));\n                else this.element.classList.remove(this.className_(undefined, \"not\"));\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const indentElem = doc.createElement(\"div\");\n            indentElem.classList.add(this.className_(\"i\"));\n            this.element.appendChild(indentElem);\n            const titleElem = doc.createElement(\"div\");\n            titleElem.classList.add(this.className_(\"t\"));\n            bindValueToTextContent(config.props.value(\"title\"), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement(\"div\");\n            markElem.classList.add(this.className_(\"m\"));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_(\"c\"));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n    class FolderController extends RackLikeController {\n        constructor(doc, config){\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps\n            });\n            super(Object.assign(Object.assign({}, config), {\n                rackController: rc,\n                view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? \"rot\" : undefined,\n                    viewProps: config.viewProps\n                })\n            }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on(\"add\", ()=>{\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on(\"remove\", ()=>{\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener(\"click\", this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set(\"expanded\", !this.foldable.get(\"expanded\"));\n        }\n    }\n    const FolderBladePlugin = {\n        id: \"folder\",\n        type: \"blade\",\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant(\"folder\"),\n                expanded: p.optional.boolean\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title\n                }),\n                viewProps: args.viewProps\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof FolderController)) return null;\n            return new FolderApi(args.controller, args.pool);\n        }\n    };\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config){\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), {\n                value: config.valueController.value,\n                view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps\n                }),\n                viewProps: viewProps\n            }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n    class SeparatorApi extends BladeApi {\n    }\n    const className$m = ClassName(\"spr\");\n    class SeparatorView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$m());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement(\"hr\");\n            hrElem.classList.add(className$m(\"r\"));\n            this.element.appendChild(hrElem);\n        }\n    }\n    class SeparatorController extends BladeController {\n        constructor(doc, config){\n            super(Object.assign(Object.assign({}, config), {\n                view: new SeparatorView(doc, {\n                    viewProps: config.viewProps\n                })\n            }));\n        }\n    }\n    const SeparatorBladePlugin = {\n        id: \"separator\",\n        type: \"blade\",\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant(\"separator\")\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof SeparatorController)) return null;\n            return new SeparatorApi(args.controller);\n        }\n    };\n    const className$l = ClassName(\"tbi\");\n    class TabItemView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, \"selected\", (selected)=>{\n                if (selected) this.element.classList.add(className$l(undefined, \"sel\"));\n                else this.element.classList.remove(className$l(undefined, \"sel\"));\n            });\n            const buttonElem = doc.createElement(\"button\");\n            buttonElem.classList.add(className$l(\"b\"));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement(\"div\");\n            titleElem.classList.add(className$l(\"t\"));\n            bindValueToTextContent(config.props.value(\"title\"), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n    class TabItemController {\n        constructor(doc, config){\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps\n            });\n            this.view.buttonElement.addEventListener(\"click\", this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit(\"click\", {\n                sender: this\n            });\n        }\n    }\n    class TabPageController {\n        constructor(doc, config){\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create()\n            });\n            this.ic_.emitter.on(\"click\", this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create()\n            });\n            this.props = config.props;\n            bindValueMap(this.props, \"selected\", (selected)=>{\n                this.itemController.props.set(\"selected\", selected);\n                this.contentController.viewProps.set(\"hidden\", !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set(\"selected\", true);\n        }\n    }\n    class TabPageApi {\n        constructor(controller, contentRackApi){\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get(\"title\")) !== null && _a !== void 0 ? _a : \"\";\n        }\n        set title(title) {\n            this.controller_.itemController.props.set(\"title\", title);\n        }\n        get selected() {\n            return this.controller_.props.get(\"selected\");\n        }\n        set selected(selected) {\n            this.controller_.props.set(\"selected\", selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool){\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on(\"change\", (ev)=>{\n                this.emitter_.emit(\"change\", {\n                    event: ev\n                });\n            });\n            this.rackApi_.on(\"update\", (ev)=>{\n                this.emitter_.emit(\"update\", {\n                    event: ev\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on(\"change\", this.onSelect_);\n            this.controller_.pageSet.emitter.on(\"add\", this.onPageAdd_);\n            this.controller_.pageSet.emitter.on(\"remove\", this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc)=>{\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc)=>{\n                const api = this.pageApiMap_.get(pc);\n                if (!api) throw TpError.shouldNeverHappen();\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title\n                }),\n                props: ValueMap.fromObject({\n                    selected: false\n                })\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) throw TpError.shouldNeverHappen();\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_[\"apiSet_\"].find((api)=>api.controller_ === pc.contentController);\n            if (!rackApi) throw TpError.shouldNeverHappen();\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) throw TpError.shouldNeverHappen();\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit(\"select\", {\n                event: new TpTabSelectEvent(this, ev.rawValue)\n            });\n        }\n    }\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor(){\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on(\"change\", this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) return;\n            this.items_.splice(index, 1);\n            item.emitter.off(\"change\", this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s)=>s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i)=>{\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            } else {\n                this.items_.forEach((s, i)=>{\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s)=>s === ev.sender);\n                this.items_.forEach((s, i)=>{\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            } else this.keepSelection_();\n        }\n    }\n    const className$k = ClassName(\"tab\");\n    class TabView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, \"nop\")));\n            const titleElem = doc.createElement(\"div\");\n            titleElem.classList.add(className$k(\"t\"));\n            this.element.appendChild(titleElem);\n            this.itemsElement = titleElem;\n            const indentElem = doc.createElement(\"div\");\n            indentElem.classList.add(className$k(\"i\"));\n            this.element.appendChild(indentElem);\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k(\"c\"));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n    class TabController extends RackLikeController {\n        constructor(doc, config){\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps\n                })\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(()=>null);\n            this.pageSet_.emitter.on(\"add\", this.onPageAdd_);\n            this.pageSet_.emitter.on(\"remove\", this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            pc.itemController.viewProps.set(\"parent\", this.viewProps);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value(\"selected\"));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            pc.itemController.viewProps.set(\"parent\", null);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value(\"selected\"));\n        }\n    }\n    const TabBladePlugin = {\n        id: \"tab\",\n        type: \"blade\",\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({\n                    title: p.required.string\n                })),\n                view: p.required.constant(\"tab\")\n            });\n            if (!result || result.pages.length === 0) return null;\n            return {\n                params: result\n            };\n        },\n        controller (args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps\n            });\n            args.params.pages.forEach((p)=>{\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false\n                    })\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api (args) {\n            if (!(args.controller instanceof TabController)) return null;\n            return new TabApi(args.controller, args.pool);\n        }\n    };\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) return null;\n        const disabled = ParamsParsers.optional.boolean(args.params[\"disabled\"]).value;\n        const hidden = ParamsParsers.optional.boolean(args.params[\"hidden\"]).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), {\n                disabled: disabled,\n                hidden: hidden\n            })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden\n            })\n        });\n    }\n    class ManualTicker {\n        constructor(){\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() {}\n        tick() {\n            if (this.disabled) return;\n            this.emitter.emit(\"tick\", {\n                sender: this\n            });\n        }\n    }\n    class IntervalTicker {\n        constructor(doc, interval){\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) this.clearTimer_();\n            else this.setTimer_();\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) return;\n            const win = this.doc_.defaultView;\n            if (win) win.clearInterval(this.timerId_);\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) return;\n            const win = this.doc_.defaultView;\n            if (win) this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n        onTick_() {\n            if (this.disabled_) return;\n            this.emitter.emit(\"tick\", {\n                sender: this\n            });\n        }\n    }\n    class InputBinding {\n        constructor(config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on(\"change\", this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) this.value.rawValue = this.reader(targetValue);\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit(\"change\", {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this\n            });\n        }\n    }\n    function fillBuffer(buffer, bufferSize) {\n        while(buffer.length < bufferSize)buffer.push(undefined);\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [\n            ...createTrimmedBuffer(buffer),\n            newValue\n        ];\n        if (newBuffer.length > buffer.length) newBuffer.splice(0, newBuffer.length - buffer.length);\n        else fillBuffer(newBuffer, buffer.length);\n        return newBuffer;\n    }\n    class MonitorBinding {\n        constructor(config){\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on(\"tick\", this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) return;\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit(\"update\", {\n                rawValue: newValue,\n                sender: this\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n    class CompositeConstraint {\n        constructor(constraints){\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c)=>{\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) return c;\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc)=>{\n                if (tmpResult) return tmpResult;\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) return result;\n        }\n        return null;\n    }\n    class DefiniteRangeConstraint {\n        constructor(config){\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min\n            });\n        }\n        constrain(value) {\n            const max = this.values.get(\"max\");\n            const min = this.values.get(\"min\");\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n    class ListConstraint {\n        constructor(options){\n            this.values = ValueMap.fromObject({\n                options: options\n            });\n        }\n        get options() {\n            return this.values.get(\"options\");\n        }\n        constrain(value) {\n            const opts = this.values.get(\"options\");\n            if (opts.length === 0) return value;\n            const matched = opts.filter((item)=>{\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n    class RangeConstraint {\n        constructor(config){\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min\n            });\n        }\n        get maxValue() {\n            return this.values.get(\"max\");\n        }\n        get minValue() {\n            return this.values.get(\"min\");\n        }\n        constrain(value) {\n            const max = this.values.get(\"max\");\n            const min = this.values.get(\"min\");\n            let result = value;\n            if (!isEmpty(min)) result = Math.max(result, min);\n            if (!isEmpty(max)) result = Math.min(result, max);\n            return result;\n        }\n    }\n    class StepConstraint {\n        constructor(step, origin = 0){\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n    const className$j = ClassName(\"lst\");\n    class ListView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement(\"select\");\n            selectElem.classList.add(className$j(\"s\"));\n            bindValueMap(this.props_, \"options\", (opts)=>{\n                removeChildElements(selectElem);\n                opts.forEach((item, index)=>{\n                    const optionElem = doc.createElement(\"option\");\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement(\"div\");\n            markElem.classList.add(className$j(\"m\"));\n            markElem.appendChild(createSvgIconElement(doc, \"dropdown\"));\n            this.element.appendChild(markElem);\n            config.value.emitter.on(\"change\", this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class ListController {\n        constructor(doc, config){\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.selectElement.addEventListener(\"change\", this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) return;\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get(\"options\")[itemIndex].value;\n        }\n    }\n    const className$i = ClassName(\"pop\");\n    class PopupView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, \"v\")));\n        }\n    }\n    class PopupController {\n        constructor(doc, config){\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    const className$h = ClassName(\"txt\");\n    class TextView {\n        constructor(doc, config){\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on(\"change\", this.onChange_);\n            const inputElem = doc.createElement(\"input\");\n            inputElem.classList.add(className$h(\"i\"));\n            inputElem.type = \"text\";\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on(\"change\", this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get(\"formatter\");\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n    class TextController {\n        constructor(doc, config){\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.inputElement.addEventListener(\"change\", this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) this.value.rawValue = parsedValue;\n            this.view.refresh();\n        }\n    }\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === \"false\") return false;\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n    class NumberLiteralNode {\n        constructor(text){\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        \"**\": (v1, v2)=>Math.pow(v1, v2),\n        \"*\": (v1, v2)=>v1 * v2,\n        \"/\": (v1, v2)=>v1 / v2,\n        \"%\": (v1, v2)=>v1 % v2,\n        \"+\": (v1, v2)=>v1 + v2,\n        \"-\": (v1, v2)=>v1 - v2,\n        \"<<\": (v1, v2)=>v1 << v2,\n        \">>\": (v1, v2)=>v1 >> v2,\n        \">>>\": (v1, v2)=>v1 >>> v2,\n        \"&\": (v1, v2)=>v1 & v2,\n        \"^\": (v1, v2)=>v1 ^ v2,\n        \"|\": (v1, v2)=>v1 | v2\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right){\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) throw new Error(`unexpected binary operator: '${this.operator}`);\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                \"b(\",\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                \")\"\n            ].join(\" \");\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        \"+\": (v)=>v,\n        \"-\": (v)=>-v,\n        \"~\": (v)=>~v\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr){\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) throw new Error(`unexpected unary operator: '${this.operator}`);\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return [\n                \"u(\",\n                this.operator,\n                this.expression.toString(),\n                \")\"\n            ].join(\" \");\n        }\n    }\n    function combineReader(parsers) {\n        return (text, cursor)=>{\n            for(let i = 0; i < parsers.length; i++){\n                const result = parsers[i](text, cursor);\n                if (result !== \"\") return result;\n            }\n            return \"\";\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : \"\";\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : \"\";\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : \"\";\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== \"\") return ds;\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== \"-\" && sign !== \"+\") return \"\";\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === \"\") return \"\";\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== \"e\") return \"\";\n        const si = readSignedInteger(text, cursor);\n        if (si === \"\") return \"\";\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === \"0\") return ch;\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === \"\") return \"\";\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === \"\") return \"\";\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== \".\") return \"\";\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== \".\") return \"\";\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === \"\") return \"\";\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === \"\") return \"\";\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : \"\";\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== \"0b\") return \"\";\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === \"\") return \"\";\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : \"\";\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== \"0o\") return \"\";\n        const ods = readOctalDigits(text, cursor);\n        if (ods === \"\") return \"\";\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = m && m[0]) !== null && _a !== void 0 ? _a : \"\";\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== \"0x\") return \"\";\n        const hds = readHexDigits(text, cursor);\n        if (hds === \"\") return \"\";\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral\n    ]);\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === \"\") return null;\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== \"(\") return null;\n        const expr = parseExpression(text, cursor);\n        if (!expr) return null;\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== \")\") return null;\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return (_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor);\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) return expr;\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== \"+\" && op !== \"-\" && op !== \"~\") return null;\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) return null;\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable)\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op)=>text.startsWith(op, cursor))[0];\n        if (!op) return null;\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor)=>{\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) return null;\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for(;;){\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) break;\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) return null;\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr ? {\n                cursor: cursor,\n                evaluable: expr\n            } : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        [\n            \"**\"\n        ],\n        [\n            \"*\",\n            \"/\",\n            \"%\"\n        ],\n        [\n            \"+\",\n            \"-\"\n        ],\n        [\n            \"<<\",\n            \">>>\",\n            \">>\"\n        ],\n        [\n            \"&\"\n        ],\n        [\n            \"^\"\n        ],\n        [\n            \"|\"\n        ]\n    ].reduce((parser, ops)=>{\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) return null;\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) return null;\n        return expr.evaluable;\n    }\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === \"number\") return value;\n        if (typeof value === \"string\") {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) return pv;\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value)=>{\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + \"%\";\n    }\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n    function connectValues({ primary: primary , secondary: secondary , forward: forward , backward: backward  }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) return;\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on(\"change\", (ev)=>{\n            preventFeedback(()=>{\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on(\"change\", (ev)=>{\n            preventFeedback(()=>{\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(()=>{\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(()=>{\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true\n            });\n        });\n    }\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) return +step;\n        else if (keys.downKey) return -step;\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === \"ArrowDown\",\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === \"ArrowUp\"\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === \"ArrowLeft\",\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === \"ArrowRight\"\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === \"ArrowUp\" || key === \"ArrowDown\";\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === \"ArrowLeft\" || key === \"ArrowRight\";\n    }\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = win && win.scrollX) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = win && win.scrollY) !== null && _b !== void 0 ? _b : 0) + rect.top)\n        };\n    }\n    class PointerHandler {\n        constructor(element){\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener(\"touchstart\", this.onTouchStart_, {\n                passive: false\n            });\n            element.addEventListener(\"touchmove\", this.onTouchMove_, {\n                passive: true\n            });\n            element.addEventListener(\"touchend\", this.onTouchEnd_);\n            element.addEventListener(\"mousedown\", this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height\n                },\n                point: offset ? {\n                    x: offset.x,\n                    y: offset.y\n                } : null\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 || _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener(\"mousemove\", this.onDocumentMouseMove_);\n            doc.addEventListener(\"mouseup\", this.onDocumentMouseUp_);\n            this.emitter.emit(\"down\", {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit(\"move\", {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener(\"mousemove\", this.onDocumentMouseMove_);\n            doc.removeEventListener(\"mouseup\", this.onDocumentMouseUp_);\n            this.emitter.emit(\"up\", {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit(\"down\", {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top\n                } : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit(\"move\", {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top\n                } : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit(\"up\", {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top\n                } : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey\n            });\n        }\n    }\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split(\".\")[1];\n        return frac.replace(/0+$/, \"\").length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return (value % max + max) % max;\n    }\n    const className$g = ClassName(\"txt\");\n    class NumberTextView {\n        constructor(doc, config){\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on(\"change\", this.onChange_);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$g(), className$g(undefined, \"num\"));\n            if (config.arrayPosition) this.element.classList.add(className$g(undefined, config.arrayPosition));\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement(\"input\");\n            inputElem.classList.add(className$g(\"i\"));\n            inputElem.type = \"text\";\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on(\"change\", this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g(\"i\"));\n            const knobElem = doc.createElement(\"div\");\n            knobElem.classList.add(className$g(\"k\"));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, \"svg\");\n            guideElem.classList.add(className$g(\"g\"));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, \"path\");\n            bodyElem.classList.add(className$g(\"gb\"));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, \"path\");\n            headElem.classList.add(className$g(\"gh\"));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement(\"div\");\n            tooltipElem.classList.add(ClassName(\"tt\")());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on(\"change\", this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, \"drg\"));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, \"drg\"));\n            const x = ev.rawValue / this.props_.get(\"draggingScale\");\n            const aox = x + (x > 0 ? -1 : x < 0 ? 1 : 0);\n            const adx = constrainRange(-aox, -4, 4);\n            this.guideHeadElem_.setAttributeNS(null, \"d\", [\n                `M ${aox + adx},0 L${aox},4 L${aox + adx},8`,\n                `M ${x},-1 L${x},9`\n            ].join(\" \"));\n            this.guideBodyElem_.setAttributeNS(null, \"d\", `M 0,4 L${x},4`);\n            const formatter = this.props_.get(\"formatter\");\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get(\"formatter\");\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n    class NumberTextController {\n        constructor(doc, config){\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.inputElement.addEventListener(\"change\", this.onInputChange_);\n            this.view.inputElement.addEventListener(\"keydown\", this.onInputKeyDown_);\n            this.view.inputElement.addEventListener(\"keyup\", this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on(\"down\", this.onPointerDown_);\n            ph.emitter.on(\"move\", this.onPointerMove_);\n            ph.emitter.on(\"up\", this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get(\"minValue\");\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get(\"maxValue\");\n            let v = value;\n            if (min !== undefined) v = Math.max(v, min);\n            if (max !== undefined) v = Math.min(v, max);\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) this.value.rawValue = this.constrainValue_(parsedValue);\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) return null;\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get(\"draggingScale\"));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) return;\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) return;\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n    const className$f = ClassName(\"sld\");\n    class SliderView {\n        constructor(doc, config){\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on(\"change\", this.onChange_);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement(\"div\");\n            trackElem.classList.add(className$f(\"t\"));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement(\"div\");\n            knobElem.classList.add(className$f(\"k\"));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on(\"change\", this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get(\"minValue\"), this.props_.get(\"maxValue\"), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n    class SliderController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on(\"down\", this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on(\"move\", this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on(\"up\", this.onPointerUp_);\n            this.view.trackElement.addEventListener(\"keydown\", this.onKeyDown_);\n            this.view.trackElement.addEventListener(\"keyup\", this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get(\"minValue\"), this.props.get(\"maxValue\")), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    const className$e = ClassName(\"sldtxt\");\n    class SliderTextView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement(\"div\");\n            sliderElem.classList.add(className$e(\"s\"));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement(\"div\");\n            textElem.classList.add(className$e(\"t\"));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n    class SliderTextController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) return p.required.array(p.required.object({\n            text: p.required.string,\n            value: p.required.raw\n        }))(value).value;\n        if (typeof value === \"object\") return p.required.raw(value).value;\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === \"inline\" || value === \"popup\") return value;\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) return options;\n        const items = [];\n        Object.keys(options).forEach((text)=>{\n            items.push({\n                text: text,\n                value: options[text]\n            });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options) ? new ListConstraint(normalizeListOptions(forceCast(options))) : null;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) return null;\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) return getDecimalDigits(sc.step);\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n    const className$d = ClassName(\"ckb\");\n    class CheckboxView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement(\"label\");\n            labelElem.classList.add(className$d(\"l\"));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement(\"input\");\n            inputElem.classList.add(className$d(\"i\"));\n            inputElem.type = \"checkbox\";\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement(\"div\");\n            wrapperElem.classList.add(className$d(\"w\"));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, \"check\");\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on(\"change\", this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class CheckboxController {\n        constructor(doc, config){\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view.inputElement.addEventListener(\"change\", this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) constraints.push(lc);\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: \"input-bool\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (typeof value !== \"boolean\") return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>boolFromUnknown,\n            constraint: (args)=>createConstraint$6(args.params),\n            writer: (_args)=>writePrimitive\n        },\n        controller: (args)=>{\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value(\"options\")\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const className$c = ClassName(\"col\");\n    class ColorView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, \"expanded\"));\n            bindValueMap(config.foldable, \"completed\", valueToClassName(this.element, className$c(undefined, \"cpl\")));\n            const headElem = doc.createElement(\"div\");\n            headElem.classList.add(className$c(\"h\"));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement(\"div\");\n            swatchElem.classList.add(className$c(\"s\"));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement(\"div\");\n            textElem.classList.add(className$c(\"t\"));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === \"inline\") {\n                const pickerElem = doc.createElement(\"div\");\n                pickerElem.classList.add(className$c(\"p\"));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            } else this.pickerElement = null;\n        }\n    }\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) h = (gp - bp) / c;\n            else if (gp === cmax) h = 2 + (bp - rp) / c;\n            else h = 4 + (rp - gp) / c;\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [\n            h * 360,\n            s * 100,\n            l * 100\n        ];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = (h % 360 + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) [rp, gp, bp] = [\n            c,\n            x,\n            0\n        ];\n        else if (hp >= 60 && hp < 120) [rp, gp, bp] = [\n            x,\n            c,\n            0\n        ];\n        else if (hp >= 120 && hp < 180) [rp, gp, bp] = [\n            0,\n            c,\n            x\n        ];\n        else if (hp >= 180 && hp < 240) [rp, gp, bp] = [\n            0,\n            x,\n            c\n        ];\n        else if (hp >= 240 && hp < 300) [rp, gp, bp] = [\n            x,\n            0,\n            c\n        ];\n        else [rp, gp, bp] = [\n            c,\n            0,\n            x\n        ];\n        return [\n            (rp + m) * 255,\n            (gp + m) * 255,\n            (bp + m) * 255\n        ];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) h = 0;\n        else if (cmax === rp) h = 60 * (((gp - bp) / d % 6 + 6) % 6);\n        else if (cmax === gp) h = 60 * ((bp - rp) / d + 2);\n        else h = 60 * ((rp - gp) / d + 4);\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [\n            h,\n            s * 100,\n            v * 100\n        ];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(hp / 60 % 2 - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) [rp, gp, bp] = [\n            c,\n            x,\n            0\n        ];\n        else if (hp >= 60 && hp < 120) [rp, gp, bp] = [\n            x,\n            c,\n            0\n        ];\n        else if (hp >= 120 && hp < 180) [rp, gp, bp] = [\n            0,\n            c,\n            x\n        ];\n        else if (hp >= 180 && hp < 240) [rp, gp, bp] = [\n            0,\n            x,\n            c\n        ];\n        else if (hp >= 240 && hp < 300) [rp, gp, bp] = [\n            x,\n            0,\n            c\n        ];\n        else [rp, gp, bp] = [\n            c,\n            0,\n            x\n        ];\n        return [\n            (rp + m) * 255,\n            (gp + m) * 255,\n            (bp + m) * 255\n        ];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + s * (100 - Math.abs(2 * l - 100)) / 200;\n        return [\n            h,\n            sd !== 0 ? s * (100 - Math.abs(2 * l - 100)) / sd : 0,\n            l + s * (100 - Math.abs(2 * l - 100)) / 200\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs(v * (200 - s) / 100 - 100);\n        return [\n            h,\n            sd !== 0 ? s * v / sd : 0,\n            v * (200 - s) / 200\n        ];\n    }\n    function removeAlphaComponent(comps) {\n        return [\n            comps[0],\n            comps[1],\n            comps[2]\n        ];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [\n            comps[0],\n            comps[1],\n            comps[2],\n            alpha\n        ];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l)=>[\n                    h,\n                    s,\n                    l\n                ],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v)=>[\n                    h,\n                    s,\n                    v\n                ],\n            rgb: hsvToRgbInt\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b)=>[\n                    r,\n                    g,\n                    b\n                ]\n        }\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === \"float\" ? 1 : mode === \"rgb\" ? 255 : 360,\n            type === \"float\" ? 1 : mode === \"rgb\" ? 255 : 100,\n            type === \"float\" ? 1 : mode === \"rgb\" ? 255 : 100\n        ];\n    }\n    function loopHueRange(hue, max) {\n        return hue === max ? max : loopRange(hue, max);\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === \"rgb\" ? constrainRange(components[0], 0, ms[0]) : loopHueRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1)\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index)=>c / fms[index] * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, \"int\");\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, \"int\", to.type);\n    }\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== \"object\" || isEmpty(obj)) return false;\n        return key in obj && typeof obj[key] === \"number\";\n    }\n    class Color {\n        static black(type = \"int\") {\n            return new Color([\n                0,\n                0,\n                0\n            ], \"rgb\", type);\n        }\n        static fromObject(obj, type = \"int\") {\n            const comps = \"a\" in obj ? [\n                obj.r,\n                obj.g,\n                obj.b,\n                obj.a\n            ] : [\n                obj.r,\n                obj.g,\n                obj.b\n            ];\n            return new Color(comps, \"rgb\", type);\n        }\n        static toRgbaObject(color, type = \"int\") {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return isRgbColorComponent(obj, \"r\") && isRgbColorComponent(obj, \"g\") && isRgbColorComponent(obj, \"b\");\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, \"a\");\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) return false;\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for(let i = 0; i < comps1.length; i++){\n                if (comps1[i] !== comps2[i]) return false;\n            }\n            return true;\n        }\n        constructor(comps, mode, type = \"int\"){\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        getComponents(opt_mode, type = \"int\") {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), {\n                mode: this.mode,\n                type: this.type\n            }, {\n                mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode,\n                type: type\n            }), this.comps_[3]);\n        }\n        toRgbaObject(type = \"int\") {\n            const rgbComps = this.getComponents(\"rgb\", type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3]\n            };\n        }\n    }\n    const className$b = ClassName(\"colp\");\n    class ColorPickerView {\n        constructor(doc, config){\n            this.alphaViews_ = null;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            const hsvElem = doc.createElement(\"div\");\n            hsvElem.classList.add(className$b(\"hsv\"));\n            const svElem = doc.createElement(\"div\");\n            svElem.classList.add(className$b(\"sv\"));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement(\"div\");\n            hElem.classList.add(className$b(\"h\"));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement(\"div\");\n            rgbElem.classList.add(className$b(\"rgb\"));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text\n                };\n                const aElem = doc.createElement(\"div\");\n                aElem.classList.add(className$b(\"a\"));\n                const apElem = doc.createElement(\"div\");\n                apElem.classList.add(className$b(\"ap\"));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement(\"div\");\n                atElem.classList.add(className$b(\"at\"));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v)=>v.inputElement)\n            ];\n            if (this.alphaViews_) elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            return elems;\n        }\n    }\n    function parseColorType(value) {\n        return value === \"int\" ? \"int\" : value === \"float\" ? \"float\" : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType)\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout)\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n    function equalsStringColorFormat(f1, f2) {\n        return f1.alpha === f2.alpha && f1.mode === f2.mode && f1.notation === f2.notation && f1.type === f2.type;\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) return Math.min(parseFloat(text), maxValue);\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle)=>angle,\n        grad: (angle)=>angle * 360 / 400,\n        rad: (angle)=>angle * 360 / (2 * Math.PI),\n        turn: (angle)=>angle * 360\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) return parseFloat(text);\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) return null;\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text)=>{\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, \"rgb\", type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) return null;\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text)=>{\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, \"rgb\", type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) return null;\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text)=>{\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, \"hsl\", type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) return null;\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1)\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) return null;\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text)=>{\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, \"hsl\", type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16)\n        ];\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16)\n        ];\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, \"rgb\", \"int\") : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1)\n        ];\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1)\n        ];\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, \"rgb\", \"int\") : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) return null;\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3])\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) return null;\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text)=>{\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, \"rgb\", type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) return null;\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4])\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) return null;\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text)=>{\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, \"rgb\", type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: \"rgb\",\n                notation: \"hex\"\n            }\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: \"rgb\",\n                notation: \"hex\"\n            }\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: \"rgb\",\n                notation: \"func\"\n            }\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: \"rgb\",\n                notation: \"func\"\n            }\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: \"hsl\",\n                notation: \"func\"\n            }\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: \"hsl\",\n                notation: \"func\"\n            }\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: \"rgb\",\n                notation: \"object\"\n            }\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: \"rgb\",\n                notation: \"object\"\n            }\n        }\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser: parser , result: detection  })=>{\n            if (prev) return prev;\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = \"int\") {\n        const r = detectStringColor(text);\n        if (!r) return null;\n        if (r.notation === \"hex\" && type !== \"float\") return Object.assign(Object.assign({}, r), {\n            type: \"int\"\n        });\n        if (r.notation === \"func\") return Object.assign(Object.assign({}, r), {\n            type: type\n        });\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser(\"int\"),\n            createFunctionalRgbaColorParser(\"int\"),\n            createHslColorParser(\"int\"),\n            createHslaColorParser(\"int\"),\n            createObjectRgbColorParser(\"int\"),\n            createObjectRgbaColorParser(\"int\")\n        ],\n        float: [\n            createFunctionalRgbColorParser(\"float\"),\n            createFunctionalRgbaColorParser(\"float\"),\n            createHslColorParser(\"float\"),\n            createHslaColorParser(\"float\"),\n            createObjectRgbColorParser(\"float\"),\n            createObjectRgbaColorParser(\"float\")\n        ]\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value)=>{\n            if (typeof value !== \"string\") return Color.black(type);\n            const result = parsers.reduce((prev, parser)=>{\n                if (prev) return prev;\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value)=>{\n            return parsers.reduce((prev, parser)=>{\n                if (prev) return prev;\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = \"#\") {\n        const hexes = removeAlphaComponent(value.getComponents(\"rgb\")).map(zerofill).join(\"\");\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = \"#\") {\n        const rgbaComps = value.getComponents(\"rgb\");\n        const hexes = [\n            rgbaComps[0],\n            rgbaComps[1],\n            rgbaComps[2],\n            rgbaComps[3] * 255\n        ].map(zerofill).join(\"\");\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === \"float\" ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents(\"rgb\", opt_type)).map((comp)=>formatter(comp));\n        return `rgb(${comps.join(\", \")})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value)=>{\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === \"float\" ? 2 : 0);\n        const comps = value.getComponents(\"rgb\", opt_type).map((comp, index)=>{\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(\", \")})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value)=>{\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage\n        ];\n        const comps = removeAlphaComponent(value.getComponents(\"hsl\")).map((comp, index)=>formatters[index](comp));\n        return `hsl(${comps.join(\", \")})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2)\n        ];\n        const comps = value.getComponents(\"hsl\").map((comp, index)=>formatters[index](comp));\n        return `hsla(${comps.join(\", \")})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === \"float\" ? 2 : 0);\n        const names = [\n            \"r\",\n            \"g\",\n            \"b\"\n        ];\n        const comps = removeAlphaComponent(value.getComponents(\"rgb\", type)).map((comp, index)=>`${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(\", \")}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value)=>colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === \"float\" ? 2 : 0);\n        const names = [\n            \"r\",\n            \"g\",\n            \"b\",\n            \"a\"\n        ];\n        const comps = value.getComponents(\"rgb\", type).map((comp, index)=>{\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(\", \")}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value)=>colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: \"rgb\",\n                notation: \"hex\",\n                type: \"int\"\n            },\n            stringifier: colorToHexRgbString\n        },\n        {\n            format: {\n                alpha: true,\n                mode: \"rgb\",\n                notation: \"hex\",\n                type: \"int\"\n            },\n            stringifier: colorToHexRgbaString\n        },\n        {\n            format: {\n                alpha: false,\n                mode: \"hsl\",\n                notation: \"func\",\n                type: \"int\"\n            },\n            stringifier: colorToFunctionalHslString\n        },\n        {\n            format: {\n                alpha: true,\n                mode: \"hsl\",\n                notation: \"func\",\n                type: \"int\"\n            },\n            stringifier: colorToFunctionalHslaString\n        },\n        ...[\n            \"int\",\n            \"float\"\n        ].reduce((prev, type)=>{\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: \"rgb\",\n                        notation: \"func\",\n                        type: type\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type)\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: \"rgb\",\n                        notation: \"func\",\n                        type: type\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type)\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: \"rgb\",\n                        notation: \"object\",\n                        type: type\n                    },\n                    stringifier: createObjectRgbColorFormatter(type)\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: \"rgb\",\n                        notation: \"object\",\n                        type: type\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type)\n                }\n            ];\n        }, [])\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas)=>{\n            if (prev) return prev;\n            return equalsStringColorFormat(fas.format, format) ? fas.stringifier : null;\n        }, null);\n    }\n    const className$a = ClassName(\"apl\");\n    class APaletteView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on(\"change\", this.onValueChange_);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$a());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement(\"div\");\n            barElem.classList.add(className$a(\"b\"));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement(\"div\");\n            colorElem.classList.add(className$a(\"c\"));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement(\"div\");\n            markerElem.classList.add(className$a(\"m\"));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement(\"div\");\n            previewElem.classList.add(className$a(\"p\"));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents(\"rgb\");\n            const leftColor = new Color([\n                rgbaComps[0],\n                rgbaComps[1],\n                rgbaComps[2],\n                0\n            ], \"rgb\");\n            const rightColor = new Color([\n                rgbaComps[0],\n                rgbaComps[1],\n                rgbaComps[2],\n                255\n            ], \"rgb\");\n            const gradientComps = [\n                \"to right\",\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor)\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(\",\")})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class APaletteController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on(\"down\", this.onPointerDown_);\n            this.ptHandler_.emitter.on(\"move\", this.onPointerMove_);\n            this.ptHandler_.emitter.on(\"up\", this.onPointerUp_);\n            this.view.element.addEventListener(\"keydown\", this.onKeyDown_);\n            this.view.element.addEventListener(\"keyup\", this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents(\"hsv\");\n            this.value.setRawValue(new Color([\n                h,\n                s,\n                v,\n                alpha\n            ], \"hsv\"), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents(\"hsv\");\n            this.value.setRawValue(new Color([\n                h,\n                s,\n                v,\n                a + step\n            ], \"hsv\"), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    const className$9 = ClassName(\"coltxt\");\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement(\"select\");\n        const items = [\n            {\n                text: \"RGB\",\n                value: \"rgb\"\n            },\n            {\n                text: \"HSL\",\n                value: \"hsl\"\n            },\n            {\n                text: \"HSV\",\n                value: \"hsv\"\n            }\n        ];\n        selectElem.appendChild(items.reduce((frag, item)=>{\n            const optElem = doc.createElement(\"option\");\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$9());\n            config.viewProps.bindClassModifiers(this.element);\n            const modeElem = doc.createElement(\"div\");\n            modeElem.classList.add(className$9(\"m\"));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9(\"ms\"));\n            modeElem.appendChild(this.modeSelectElement);\n            config.viewProps.bindDisabled(this.modeElem_);\n            const modeMarkerElem = doc.createElement(\"div\");\n            modeMarkerElem.classList.add(className$9(\"mm\"));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, \"dropdown\"));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement(\"div\");\n            textsElem.classList.add(className$9(\"w\"));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode)=>{\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v)=>{\n                const compElem = doc.createElement(\"div\");\n                compElem.classList.add(className$9(\"c\"));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === \"float\" ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new DefiniteRangeConstraint({\n            min: 0,\n            max: max\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? \"fst\" : index === 2 ? \"lst\" : \"mid\",\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === \"float\" ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType)\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index)\n            }),\n            viewProps: config.viewProps\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config){\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [\n                    this.ccs_[0].view,\n                    this.ccs_[1].view,\n                    this.ccs_[2].view\n                ],\n                viewProps: this.viewProps\n            });\n            this.view.modeSelectElement.addEventListener(\"change\", this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2)\n            ];\n            ccs.forEach((cs, index)=>{\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p)=>{\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s)=>{\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    }\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view\n            ];\n        }\n    }\n    const className$8 = ClassName(\"hpl\");\n    class HPaletteView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on(\"change\", this.onValueChange_);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement(\"div\");\n            colorElem.classList.add(className$8(\"c\"));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement(\"div\");\n            markerElem.classList.add(className$8(\"m\"));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents(\"hsv\");\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([\n                h,\n                100,\n                100\n            ], \"hsv\"));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class HPaletteController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on(\"down\", this.onPointerDown_);\n            this.ptHandler_.emitter.on(\"move\", this.onPointerMove_);\n            this.ptHandler_.emitter.on(\"up\", this.onPointerUp_);\n            this.view.element.addEventListener(\"keydown\", this.onKeyDown_);\n            this.view.element.addEventListener(\"keyup\", this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents(\"hsv\");\n            this.value.setRawValue(new Color([\n                hue,\n                s,\n                v,\n                a\n            ], \"hsv\"), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents(\"hsv\");\n            this.value.setRawValue(new Color([\n                h + step,\n                s,\n                v,\n                a\n            ], \"hsv\"), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    const className$7 = ClassName(\"svp\");\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on(\"change\", this.onValueChange_);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement(\"canvas\");\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7(\"c\"));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement(\"div\");\n            markerElem.classList.add(className$7(\"m\"));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) return;\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents(\"hsv\");\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for(let iy = 0; iy < height; iy++)for(let ix = 0; ix < width; ix++){\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class SvPaletteController {\n        constructor(doc, config){\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on(\"down\", this.onPointerDown_);\n            this.ptHandler_.emitter.on(\"move\", this.onPointerMove_);\n            this.ptHandler_.emitter.on(\"up\", this.onPointerUp_);\n            this.view.element.addEventListener(\"keydown\", this.onKeyDown_);\n            this.view.element.addEventListener(\"keyup\", this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents(\"hsv\");\n            this.value.setRawValue(new Color([\n                h,\n                saturation,\n                value,\n                a\n            ], \"hsv\"), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) ev.preventDefault();\n            const [h, s, v, a] = this.value.rawValue.getComponents(\"hsv\");\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) return;\n            this.value.setRawValue(new Color([\n                h,\n                s + ds,\n                v + dv,\n                a\n            ], \"hsv\"), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    class ColorPickerController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.alphaIcs_ = config.supportsAlpha ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    baseStep: 0.1,\n                    props: ValueMap.fromObject({\n                        draggingScale: 0.01,\n                        formatter: createNumberFormatter(2)\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({\n                            min: 0,\n                            max: 1\n                        })\n                    }),\n                    viewProps: this.viewProps\n                })\n            } : null;\n            if (this.alphaIcs_) connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p)=>{\n                    return p.rawValue.getComponents()[3];\n                },\n                backward: (p, s)=>{\n                    const comps = p.rawValue.getComponents();\n                    comps[3] = s.rawValue;\n                    return new Color(comps, p.rawValue.mode);\n                }\n            });\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_ ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view\n                } : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n                viewProps: this.viewProps\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n    const className$6 = ClassName(\"colsw\");\n    class ColorSwatchView {\n        constructor(doc, config){\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on(\"change\", this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement(\"div\");\n            swatchElem.classList.add(className$6(\"sw\"));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement(\"button\");\n            buttonElem.classList.add(className$6(\"b\"));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n    class ColorSwatchController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    class ColorController {\n        constructor(doc, config){\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener(\"blur\", this.onButtonBlur_);\n            buttonElem.addEventListener(\"click\", this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter\n                }),\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ = config.pickerLayout === \"popup\" ? new PopupController(doc, {\n                viewProps: this.viewProps\n            }) : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            pickerC.view.allFocusableElements.forEach((elem)=>{\n                elem.addEventListener(\"blur\", this.onPopupChildBlur_);\n                elem.addEventListener(\"keydown\", this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value(\"expanded\"),\n                    secondary: this.popC_.shows,\n                    forward: (p)=>p.rawValue,\n                    backward: (_, s)=>s.rawValue\n                });\n            } else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) return;\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) this.popC_.shows.rawValue = false;\n        }\n        onButtonClick_() {\n            this.foldable_.set(\"expanded\", !this.foldable_.get(\"expanded\"));\n            if (this.foldable_.get(\"expanded\")) this.pickerC_.view.allFocusableElements[0].focus();\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) return;\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) return;\n            if (nextTarget && nextTarget === this.swatchC_.view.buttonElement && !supportsTouch(elem.ownerDocument)) return;\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === \"Escape\") this.popC_.shows.rawValue = false;\n            } else if (this.view.pickerElement) {\n                if (ev.key === \"Escape\") this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) return Color.fromObject(value, opt_type);\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents(\"rgb\")).reduce((result, comp)=>{\n            return result << 8 | Math.floor(comp) & 0xff;\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return value.getComponents(\"rgb\").reduce((result, comp, index)=>{\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return result << 8 | hex;\n        }, 0) >>> 0;\n    }\n    function numberToRgbColor(num) {\n        return new Color([\n            num >> 16 & 0xff,\n            num >> 8 & 0xff,\n            num & 0xff\n        ], \"rgb\");\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            num >> 24 & 0xff,\n            num >> 16 & 0xff,\n            num >> 8 & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1)\n        ], \"rgb\");\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== \"number\") return Color.black();\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== \"number\") return Color.black();\n        return numberToRgbaColor(value);\n    }\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify ? (target, value)=>{\n            writePrimitive(target, stringify(value));\n        } : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value)=>{\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty(\"r\", obj.r);\n        target.writeProperty(\"g\", obj.g);\n        target.writeProperty(\"b\", obj.b);\n        target.writeProperty(\"a\", obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty(\"r\", obj.r);\n        target.writeProperty(\"g\", obj.g);\n        target.writeProperty(\"b\", obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue)=>{\n            if (supportsAlpha) writeRgbaColorObject(target, inValue, opt_type);\n            else writeRgbColorObject(target, inValue, opt_type);\n        };\n    }\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) return true;\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha ? (v)=>colorToHexRgbaString(v, \"0x\") : (v)=>colorToHexRgbString(v, \"0x\");\n    }\n    function isForColor(params) {\n        if (\"color\" in params) return true;\n        if (\"view\" in params && params.view === \"color\") return true;\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: \"input-color-number\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (typeof value !== \"number\") return null;\n            if (!isForColor(params)) return null;\n            const result = parseColorInputParams(params);\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (args)=>{\n                return shouldSupportAlpha$1(args.params) ? colorFromRgbaNumber : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args)=>{\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            }\n        },\n        controller: (args)=>{\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = \"expanded\" in args.params ? args.params.expanded : undefined;\n            const picker = \"picker\" in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: \"int\",\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser(\"int\"),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : \"popup\",\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value)=>{\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value)=>{\n            if (supportsAlpha) return colorToObjectRgbaString(value, type);\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: \"input-color-object\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (!Color.isColorObject(value)) return null;\n            const result = parseColorInputParams(params);\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (args)=>createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args)=>createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params))\n        },\n        controller: (args)=>{\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = \"expanded\" in args.params ? args.params.expanded : undefined;\n            const picker = \"picker\" in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : \"int\";\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : \"popup\",\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const StringColorInputPlugin = {\n        id: \"input-color-string\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (typeof value !== \"string\") return null;\n            if (\"view\" in params && params.view === \"text\") return null;\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) return null;\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) return null;\n            const result = parseColorInputParams(params);\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (args)=>{\n                var _a;\n                return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : \"int\");\n            },\n            equals: Color.equals,\n            writer: (args)=>{\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) throw TpError.shouldNeverHappen();\n                const writer = createColorStringWriter(format);\n                if (!writer) throw TpError.notBindable();\n                return writer;\n            }\n        },\n        controller: (args)=>{\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) throw TpError.shouldNeverHappen();\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) throw TpError.shouldNeverHappen();\n            const expanded = \"expanded\" in args.params ? args.params.expanded : undefined;\n            const picker = \"picker\" in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : \"popup\",\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class PointNdConstraint {\n        constructor(config){\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_.toComponents(value).map((comp, index)=>{\n                var _a, _b;\n                return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp;\n            });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n    const className$5 = ClassName(\"pndtxt\");\n    class PointNdTextView {\n        constructor(doc, config){\n            this.textViews = config.textViews;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v)=>{\n                const axisElem = doc.createElement(\"div\");\n                axisElem.classList.add(className$5(\"a\"));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? \"fst\" : index === config.axes.length - 1 ? \"lst\" : \"mid\",\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint\n            }),\n            viewProps: config.viewProps\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index)=>createAxisController(doc, config, index));\n            this.acs_.forEach((c, index)=>{\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p)=>{\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s)=>{\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    }\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac)=>ac.view)\n            });\n        }\n    }\n    function createStepConstraint(params, initialValue) {\n        if (\"step\" in params && !isEmpty(params.step)) return new StepConstraint(params.step, initialValue);\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min\n        });\n        if (!isEmpty(params.max) || !isEmpty(params.min)) return new RangeConstraint({\n            max: params.max,\n            min: params.min\n        });\n        return null;\n    }\n    function findNumberRange(c) {\n        const drc = findConstraint(c, DefiniteRangeConstraint);\n        if (drc) return [\n            drc.values.get(\"min\"),\n            drc.values.get(\"max\")\n        ];\n        const rc = findConstraint(c, RangeConstraint);\n        if (rc) return [\n            rc.minValue,\n            rc.maxValue\n        ];\n        return [\n            undefined,\n            undefined\n        ];\n    }\n    function createConstraint$4(params, initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) constraints.push(sc);\n        const rc = createRangeConstraint(params);\n        if (rc) constraints.push(rc);\n        const lc = createListConstraint(params.options);\n        if (lc) constraints.push(lc);\n        return new CompositeConstraint(constraints);\n    }\n    const NumberInputPlugin = {\n        id: \"input-number\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (typeof value !== \"number\") return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>numberFromUnknown,\n            constraint: (args)=>createConstraint$4(args.params, args.initialValue),\n            writer: (_args)=>writePrimitive\n        },\n        controller: (args)=>{\n            var _a;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value(\"options\")\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            const formatter = (_a = \"format\" in args.params ? args.params.format : undefined) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\n            if (drc) return new SliderTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value(\"max\"),\n                    minValue: drc.values.value(\"min\")\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class Point2d {\n        constructor(x = 0, y = 0){\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [\n                this.x,\n                this.y\n            ];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) return false;\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== \"number\" || typeof y !== \"number\") return false;\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p)=>p.getComponents(),\n        fromComponents: (comps)=>new Point2d(...comps)\n    };\n    const className$4 = ClassName(\"p2d\");\n    class Point2dView {\n        constructor(doc, config){\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, \"expanded\")));\n            const headElem = doc.createElement(\"div\");\n            headElem.classList.add(className$4(\"h\"));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement(\"button\");\n            buttonElem.classList.add(className$4(\"b\"));\n            buttonElem.appendChild(createSvgIconElement(doc, \"p2dpad\"));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement(\"div\");\n            textElem.classList.add(className$4(\"t\"));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === \"inline\") {\n                const pickerElem = doc.createElement(\"div\");\n                pickerElem.classList.add(className$4(\"p\"));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            } else this.pickerElement = null;\n        }\n    }\n    const className$3 = ClassName(\"p2dp\");\n    class Point2dPickerView {\n        constructor(doc, config){\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$3());\n            if (config.layout === \"popup\") this.element.classList.add(className$3(undefined, \"p\"));\n            config.viewProps.bindClassModifiers(this.element);\n            const padElem = doc.createElement(\"div\");\n            padElem.classList.add(className$3(\"p\"));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, \"svg\");\n            svgElem.classList.add(className$3(\"g\"));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, \"line\");\n            xAxisElem.classList.add(className$3(\"ax\"));\n            xAxisElem.setAttributeNS(null, \"x1\", \"0\");\n            xAxisElem.setAttributeNS(null, \"y1\", \"50%\");\n            xAxisElem.setAttributeNS(null, \"x2\", \"100%\");\n            xAxisElem.setAttributeNS(null, \"y2\", \"50%\");\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, \"line\");\n            yAxisElem.classList.add(className$3(\"ax\"));\n            yAxisElem.setAttributeNS(null, \"x1\", \"50%\");\n            yAxisElem.setAttributeNS(null, \"y1\", \"0\");\n            yAxisElem.setAttributeNS(null, \"x2\", \"50%\");\n            yAxisElem.setAttributeNS(null, \"y2\", \"100%\");\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, \"line\");\n            lineElem.classList.add(className$3(\"l\"));\n            lineElem.setAttributeNS(null, \"x1\", \"50%\");\n            lineElem.setAttributeNS(null, \"y1\", \"50%\");\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement(\"div\");\n            markerElem.classList.add(className$3(\"m\"));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on(\"change\", this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [\n                this.padElement\n            ];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, \"x2\", `${px}%`);\n            this.lineElem_.setAttributeNS(null, \"y2\", `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1)\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config){\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on(\"down\", this.onPointerDown_);\n            this.ptHandler_.emitter.on(\"move\", this.onPointerMove_);\n            this.ptHandler_.emitter.on(\"up\", this.onPointerUp_);\n            this.view.padElement.addEventListener(\"keydown\", this.onPadKeyDown_);\n            this.view.padElement.addEventListener(\"keyup\", this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) return;\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) ev.preventDefault();\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) return;\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) return;\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true\n            });\n        }\n    }\n    class Point2dController {\n        constructor(doc, config){\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ = config.pickerLayout === \"popup\" ? new PopupController(doc, {\n                viewProps: this.viewProps\n            }) : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [\n                    config.axes[0].baseStep,\n                    config.axes[1].baseStep\n                ],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            padC.view.allFocusableElements.forEach((elem)=>{\n                elem.addEventListener(\"blur\", this.onPopupChildBlur_);\n                elem.addEventListener(\"keydown\", this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value(\"expanded\"),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 || _a.addEventListener(\"blur\", this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 || _b.addEventListener(\"click\", this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value(\"expanded\"),\n                    secondary: this.popC_.shows,\n                    forward: (p)=>p.rawValue,\n                    backward: (_, s)=>s.rawValue\n                });\n            } else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) return;\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) this.popC_.shows.rawValue = false;\n        }\n        onPadButtonClick_() {\n            this.foldable_.set(\"expanded\", !this.foldable_.get(\"expanded\"));\n            if (this.foldable_.get(\"expanded\")) this.pickerC_.view.allFocusableElements[0].focus();\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) return;\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) return;\n            if (nextTarget && nextTarget === this.view.buttonElement && !supportsTouch(elem.ownerDocument)) return;\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === \"Escape\") this.popC_.shows.rawValue = false;\n            } else if (this.view.pickerElement) {\n                if (ev.key === \"Escape\") this.view.buttonElement.focus();\n            }\n        }\n    }\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0){\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [\n                this.x,\n                this.y,\n                this.z\n            ];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) return false;\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== \"number\" || typeof y !== \"number\" || typeof z !== \"number\") return false;\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p)=>p.getComponents(),\n        fromComponents: (comps)=>new Point3d(...comps)\n    };\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value) ? new Point3d(value.x, value.y, value.z) : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty(\"x\", value.x);\n        target.writeProperty(\"y\", value.y);\n        target.writeProperty(\"z\", value.z);\n    }\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint(\"x\" in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint(\"y\" in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint(\"z\" in params ? params.z : undefined, initialValue.z)\n            ]\n        });\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue))\n            })\n        };\n    }\n    const Point3dInputPlugin = {\n        id: \"input-point3d\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (!Point3d.isObject(value)) return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>point3dFromUnknown,\n            constraint: (args)=>createConstraint$3(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args)=>writePoint3d\n        },\n        controller: (args)=>{\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) throw TpError.shouldNeverHappen();\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                    createAxis$2(value.rawValue.z, c.components[2])\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0){\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [\n                this.x,\n                this.y,\n                this.z,\n                this.w\n            ];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) return false;\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== \"number\" || typeof y !== \"number\" || typeof z !== \"number\" || typeof w !== \"number\") return false;\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p)=>p.getComponents(),\n        fromComponents: (comps)=>new Point4d(...comps)\n    };\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value) ? new Point4d(value.x, value.y, value.z, value.w) : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty(\"x\", value.x);\n        target.writeProperty(\"y\", value.y);\n        target.writeProperty(\"z\", value.z);\n        target.writeProperty(\"w\", value.w);\n    }\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint(\"x\" in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint(\"y\" in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint(\"z\" in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint(\"w\" in params ? params.w : undefined, initialValue.w)\n            ]\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue))\n            })\n        };\n    }\n    const Point4dInputPlugin = {\n        id: \"input-point4d\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (!Point4d.isObject(value)) return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>point4dFromUnknown,\n            constraint: (args)=>createConstraint$2(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args)=>writePoint4d\n        },\n        controller: (args)=>{\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) throw TpError.shouldNeverHappen();\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue.getComponents().map((comp, index)=>createAxis$1(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    function createConstraint$1(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) constraints.push(lc);\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: \"input-string\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (typeof value !== \"string\") return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions)\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>stringFromUnknown,\n            constraint: (args)=>createConstraint$1(args.params),\n            writer: (_args)=>writePrimitive\n        },\n        controller: (args)=>{\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value(\"options\")\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new TextController(doc, {\n                parser: (v)=>v,\n                props: ValueMap.fromObject({\n                    formatter: formatString\n                }),\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3\n        }\n    };\n    const className$2 = ClassName(\"mll\");\n    class MultiLogView {\n        constructor(doc, config){\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement(\"textarea\");\n            textareaElem.classList.add(className$2(\"i\"));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on(\"change\", this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value)=>{\n                if (value !== undefined) lines.push(this.formatter_(value));\n            });\n            elem.textContent = lines.join(\"\\n\");\n            if (shouldScroll) elem.scrollTop = elem.scrollHeight;\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n    class MultiLogController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    const className$1 = ClassName(\"sgl\");\n    class SingleLogView {\n        constructor(doc, config){\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement(\"input\");\n            inputElem.classList.add(className$1(\"i\"));\n            inputElem.readOnly = true;\n            inputElem.type = \"text\";\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on(\"change\", this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value = lastValue !== undefined ? this.formatter_(lastValue) : \"\";\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n    class SingleLogController {\n        constructor(doc, config){\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n        }\n    }\n    const BooleanMonitorPlugin = {\n        id: \"monitor-bool\",\n        type: \"monitor\",\n        accept: (value, params)=>{\n            if (typeof value !== \"boolean\") return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>boolFromUnknown\n        },\n        controller: (args)=>{\n            var _a;\n            if (args.value.rawValue.length === 1) return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    const className = ClassName(\"grl\");\n    class GraphLogView {\n        constructor(doc, config){\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement(\"div\");\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on(\"change\", this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, \"svg\");\n            svgElem.classList.add(className(\"g\"));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, \"polyline\");\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement(\"div\");\n            tooltipElem.classList.add(className(\"t\"), ClassName(\"tt\")());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on(\"change\", this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get(\"minValue\");\n            const max = this.props_.get(\"maxValue\");\n            const points = [];\n            this.value.rawValue.forEach((v, index)=>{\n                if (v === undefined) return;\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([\n                    x,\n                    y\n                ].join(\",\"));\n            });\n            this.lineElem_.setAttributeNS(null, \"points\", points.join(\" \"));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className(\"t\", \"a\"));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className(\"t\", \"a\"))) {\n                tooltipElem.classList.add(className(\"t\", \"a\"), className(\"t\", \"in\"));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className(\"t\", \"in\"));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n    class GraphLogController {\n        constructor(doc, config){\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener(\"mousemove\", this.onGraphMouseMove_);\n                this.view.element.addEventListener(\"mouseleave\", this.onGraphMouseLeave_);\n            } else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on(\"down\", this.onGraphPointerDown_);\n                ph.emitter.on(\"move\", this.onGraphPointerMove_);\n                ph.emitter.on(\"up\", this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n    function createFormatter(params) {\n        return \"format\" in params && !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps\n        });\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = \"max\" in args.params ? args.params.max : null) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = \"min\" in args.params ? args.params.min : null) !== null && _c !== void 0 ? _c : 0\n            }),\n            value: args.value,\n            viewProps: args.viewProps\n        });\n    }\n    function shouldShowGraph(params) {\n        return \"view\" in params && params.view === \"graph\";\n    }\n    const NumberMonitorPlugin = {\n        id: \"monitor-number\",\n        type: \"monitor\",\n        accept: (value, params)=>{\n            if (typeof value !== \"number\") return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            defaultBufferSize: (params)=>shouldShowGraph(params) ? 64 : 1,\n            reader: (_args)=>numberFromUnknown\n        },\n        controller: (args)=>{\n            if (shouldShowGraph(args.params)) return createGraphMonitor(args);\n            return createTextMonitor(args);\n        }\n    };\n    const StringMonitorPlugin = {\n        id: \"monitor-string\",\n        type: \"monitor\",\n        accept: (value, params)=>{\n            if (typeof value !== \"string\") return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>stringFromUnknown\n        },\n        controller: (args)=>{\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 || \"multiline\" in args.params && args.params.multiline;\n            if (multiline) return new MultiLogController(args.document, {\n                formatter: formatString,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: value,\n                viewProps: args.viewProps\n            });\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    function createInputBindingController(plugin, args) {\n        var _a;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) return null;\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint ? plugin.binding.constraint(valueArgs) : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs)\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden\n            })\n        });\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: \"label\" in args.params ? (_a = p.optional.string(args.params.label).value) !== null && _a !== void 0 ? _a : null : args.target.key\n            }),\n            valueController: controller\n        });\n    }\n    function createTicker(document, interval) {\n        return interval === 0 ? new ManualTicker() : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const p = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) return null;\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = p.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : plugin.binding.defaultBufferSize && plugin.binding.defaultBufferSize(result.params)) !== null && _b !== void 0 ? _b : 1;\n        const interval = p.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize)\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden\n            })\n        });\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: \"label\" in args.params ? (_c = p.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : null : args.target.key\n            }),\n            valueController: controller\n        });\n    }\n    class PluginPool {\n        constructor(){\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: []\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors\n            ];\n        }\n        register(r) {\n            if (r.type === \"blade\") this.pluginsMap_.blades.unshift(r);\n            else if (r.type === \"input\") this.pluginsMap_.inputs.unshift(r);\n            else if (r.type === \"monitor\") this.pluginsMap_.monitors.unshift(r);\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) throw new TpError({\n                context: {\n                    key: target.key\n                },\n                type: \"nomatchingcontroller\"\n            });\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin)=>result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params\n                }), null);\n            if (bc) return bc;\n            throw new TpError({\n                context: {\n                    key: target.key\n                },\n                type: \"nomatchingcontroller\"\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin)=>result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target\n                }), null);\n            if (bc) return bc;\n            throw new TpError({\n                context: {\n                    key: target.key\n                },\n                type: \"nomatchingcontroller\"\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin)=>result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                    document: document,\n                    params: params\n                }), null);\n            if (!bc) throw new TpError({\n                type: \"nomatchingview\",\n                context: {\n                    params: params\n                }\n            });\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) return new InputBindingApi(bc);\n            if (bc instanceof MonitorBindingController) return new MonitorBindingApi(bc);\n            if (bc instanceof RackController) return new RackApi(bc, this);\n            const api = this.pluginsMap_.blades.reduce((result, plugin)=>result !== null && result !== void 0 ? result : plugin.api({\n                    controller: bc,\n                    pool: this\n                }), null);\n            if (!api) throw TpError.shouldNeverHappen();\n            return api;\n        }\n    }\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin\n        ].forEach((p)=>{\n            pool.register(p);\n        });\n        return pool;\n    }\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value) ? new Point2d(value.x, value.y) : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty(\"x\", value.x);\n        target.writeProperty(\"y\", value.y);\n    }\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) return undefined;\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) constraints.push(cs);\n        const rs = createRangeConstraint(params);\n        if (rs) constraints.push(rs);\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint(\"x\" in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint(\"y\" in params ? params.y : undefined, initialValue.y)\n            ]\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\n        if (!isEmpty(min) || !isEmpty(max)) return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint ? constraint.components[0] : undefined;\n        const yc = constraint instanceof PointNdConstraint ? constraint.components[1] : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue))\n            })\n        };\n    }\n    function shouldInvertY(params) {\n        if (!(\"y\" in params)) return false;\n        const yParams = params.y;\n        if (!yParams) return false;\n        return \"inverted\" in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: \"input-point2d\",\n        type: \"input\",\n        accept: (value, params)=>{\n            if (!Point2d.isObject(value)) return null;\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number\n                })\n            });\n            return result ? {\n                initialValue: value,\n                params: result\n            } : null;\n        },\n        binding: {\n            reader: (_args)=>point2dFromUnknown,\n            constraint: (args)=>createConstraint(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args)=>writePoint2d\n        },\n        controller: (args)=>{\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) throw TpError.shouldNeverHappen();\n            const expanded = \"expanded\" in args.params ? args.params.expanded : undefined;\n            const picker = \"picker\" in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis(value.rawValue.x, c.components[0]),\n                    createAxis(value.rawValue.y, c.components[1])\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : \"popup\",\n                value: value,\n                viewProps: args.viewProps\n            });\n        }\n    };\n    class ListApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on(\"change\", (ev)=>{\n                this.emitter_.emit(\"change\", {\n                    event: new TpChangeEvent(this, ev.rawValue)\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get(\"label\");\n        }\n        set label(label) {\n            this.controller_.props.set(\"label\", label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get(\"options\");\n        }\n        set options(options) {\n            this.controller_.valueController.props.set(\"options\", options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    class SliderApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on(\"change\", (ev)=>{\n                this.emitter_.emit(\"change\", {\n                    event: new TpChangeEvent(this, ev.rawValue)\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get(\"label\");\n        }\n        set label(label) {\n            this.controller_.props.set(\"label\", label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get(\"maxValue\");\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set(\"maxValue\", maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get(\"minValue\");\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set(\"minValue\", minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    class TextApi extends BladeApi {\n        constructor(controller){\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on(\"change\", (ev)=>{\n                this.emitter_.emit(\"change\", {\n                    event: new TpChangeEvent(this, ev.rawValue)\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get(\"label\");\n        }\n        set label(label) {\n            this.controller_.props.set(\"label\", label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get(\"formatter\");\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set(\"formatter\", formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev)=>{\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n    const ListBladePlugin = function() {\n        return {\n            id: \"list\",\n            type: \"blade\",\n            accept (params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant(\"list\"),\n                    label: p.optional.string\n                });\n                return result ? {\n                    params: result\n                } : null;\n            },\n            controller (args) {\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\n                const value = createValue(args.params.value, {\n                    constraint: lc\n                });\n                const ic = new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value(\"options\")\n                    }),\n                    value: value,\n                    viewProps: args.viewProps\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label\n                    }),\n                    valueController: ic\n                });\n            },\n            api (args) {\n                if (!(args.controller instanceof LabeledValueController)) return null;\n                if (!(args.controller.valueController instanceof ListController)) return null;\n                return new ListApi(args.controller);\n            }\n        };\n    }();\n    /**\n     * @hidden\n     */ function exportPresetJson(targets) {\n        return targets.reduce((result, target)=>{\n            return Object.assign(result, {\n                [target.presetKey]: target.read()\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */ function importPresetJson(bindings, preset) {\n        bindings.forEach((binding)=>{\n            const value = preset[binding.target.presetKey];\n            if (value !== undefined) binding.writer(binding.target, binding.reader(value));\n        });\n    }\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */ constructor(controller, pool){\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */ importPreset(preset) {\n            const bindings = this.controller_.rackController.rack.find(InputBindingController).map((ibc)=>{\n                return ibc.binding;\n            });\n            importPresetJson(bindings, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */ exportPreset() {\n            const targets = this.controller_.rackController.rack.find(InputBindingController).map((ibc)=>{\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */ refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack.find(InputBindingController).forEach((ibc)=>{\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack.find(MonitorBindingController).forEach((mbc)=>{\n                mbc.binding.read();\n            });\n        }\n    }\n    class RootController extends FolderController {\n        constructor(doc, config){\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps\n            });\n        }\n    }\n    const SliderBladePlugin = {\n        id: \"slider\",\n        type: \"blade\",\n        accept (params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant(\"slider\"),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number\n            });\n            return result ? {\n                params: result\n            } : null;\n        },\n        controller (args) {\n            var _a, _b;\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const drc = new DefiniteRangeConstraint({\n                max: args.params.max,\n                min: args.params.min\n            });\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value(\"max\"),\n                    minValue: drc.values.value(\"min\")\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString\n                }),\n                value: createValue(initialValue, {\n                    constraint: drc\n                }),\n                viewProps: args.viewProps\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label\n                }),\n                valueController: vc\n            });\n        },\n        api (args) {\n            if (!(args.controller instanceof LabeledValueController)) return null;\n            if (!(args.controller.valueController instanceof SliderTextController)) return null;\n            return new SliderApi(args.controller);\n        }\n    };\n    const TextBladePlugin = function() {\n        return {\n            id: \"text\",\n            type: \"blade\",\n            accept (params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant(\"text\"),\n                    format: p.optional.function,\n                    label: p.optional.string\n                });\n                return result ? {\n                    params: result\n                } : null;\n            },\n            controller (args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : (v)=>String(v)\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label\n                    }),\n                    valueController: ic\n                });\n            },\n            api (args) {\n                if (!(args.controller instanceof LabeledValueController)) return null;\n                if (!(args.controller.valueController instanceof TextController)) return null;\n                return new TextApi(args.controller);\n            }\n        };\n    }();\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement(\"div\");\n        elem.classList.add(ClassName(\"dfw\")());\n        if (doc.body) doc.body.appendChild(elem);\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) return;\n        const styleElem = doc.createElement(\"style\");\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */ class Pane extends RootApi {\n        constructor(opt_config){\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title\n                }),\n                viewProps: ViewProps.create()\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) throw TpError.alreadyDisposed();\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) throw TpError.alreadyDisposed();\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) parentElem.removeChild(containerElem);\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = \"plugin\" in bundle ? [\n                bundle.plugin\n            ] : \"plugins\" in bundle ? bundle.plugins : [];\n            plugins.forEach((p)=>{\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, \"default\", '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin)=>{\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin\n                ]\n            });\n        }\n    }\n    const VERSION = new Semver(\"3.1.9\");\n    exports1.BladeApi = BladeApi;\n    exports1.ButtonApi = ButtonApi;\n    exports1.FolderApi = FolderApi;\n    exports1.InputBindingApi = InputBindingApi;\n    exports1.ListApi = ListApi;\n    exports1.MonitorBindingApi = MonitorBindingApi;\n    exports1.Pane = Pane;\n    exports1.SeparatorApi = SeparatorApi;\n    exports1.SliderApi = SliderApi;\n    exports1.TabApi = TabApi;\n    exports1.TabPageApi = TabPageApi;\n    exports1.TextApi = TextApi;\n    exports1.TpChangeEvent = TpChangeEvent;\n    exports1.VERSION = VERSION;\n    Object.defineProperty(exports1, \"__esModule\", {\n        value: true\n    });\n});\n\n\n// it's initialized at the beginning of the app\n// it uses dragData locally to this file\nconst $262c31a93dbc3ee6$var$dragData = {\n    dragItem: null,\n    initialY: 0,\n    initialX: 0,\n    currentX: 0,\n    currentY: 0,\n    xOffset: 0,\n    yOffset: 0\n};\nfunction $262c31a93dbc3ee6$var$setTranslate(x, y) {\n    $262c31a93dbc3ee6$var$dragData.dragItem.style.transform = \"translate3d(\" + x + \"px, \" + y + \"px, 0)\";\n}\nfunction $262c31a93dbc3ee6$export$ae5814d89d1fd7f6(x, y) {\n    const y2 = y - window.innerHeight;\n    $262c31a93dbc3ee6$var$dragData.initialX = $262c31a93dbc3ee6$var$dragData.xOffset = $262c31a93dbc3ee6$var$dragData.currentX = x;\n    $262c31a93dbc3ee6$var$dragData.initialY = $262c31a93dbc3ee6$var$dragData.yOffset = $262c31a93dbc3ee6$var$dragData.currentY = y2;\n    $262c31a93dbc3ee6$var$setTranslate(x, y2);\n}\nfunction $262c31a93dbc3ee6$export$134cc5952cfc796e(pane) {\n    $262c31a93dbc3ee6$var$dragData.dragItem = document.getElementById(\"ui\");\n    //    #ui > div.tp-rotv.tp-cntv.tp-rotv-expanded.tp-rotv-cpl > button\n    //    const selector = \"#ui > div > button\";\n    const selector = \"#ui > div > button > div.tp-rotv_t\";\n    let targetDragItem = document.querySelector(selector);\n    const targetEvent = targetDragItem;\n    document.addEventListener(\"mousedown\", dragStart, false);\n    document.addEventListener(\"mouseup\", dragEnd, false);\n    document.addEventListener(\"mousemove\", drag, false);\n    let active = false;\n    let isDragging = false;\n    function fakeClick(e) {\n        if (isDragging) {\n            e.stopPropagation();\n            isDragging = false;\n        }\n    }\n    // overwrite the click event\n    pane.controller_.view.buttonElement.addEventListener(\"click\", fakeClick, true);\n    function dragStart(e) {\n        if (e.type === \"touchstart\") {\n            $262c31a93dbc3ee6$var$dragData.initialX = e.touches[0].clientX - $262c31a93dbc3ee6$var$dragData.xOffset;\n            $262c31a93dbc3ee6$var$dragData.initialY = e.touches[0].clientY - $262c31a93dbc3ee6$var$dragData.yOffset;\n        } else {\n            $262c31a93dbc3ee6$var$dragData.initialX = e.clientX - $262c31a93dbc3ee6$var$dragData.xOffset;\n            $262c31a93dbc3ee6$var$dragData.initialY = e.clientY - $262c31a93dbc3ee6$var$dragData.yOffset;\n        }\n        if (e.target === targetDragItem) active = true;\n    }\n    function dragEnd(e) {\n        $262c31a93dbc3ee6$var$dragData.initialX = $262c31a93dbc3ee6$var$dragData.currentX;\n        $262c31a93dbc3ee6$var$dragData.initialY = $262c31a93dbc3ee6$var$dragData.currentY;\n        active = false;\n    }\n    function drag(e) {\n        if (active) {\n            e.preventDefault();\n            isDragging = true;\n            if (e.type === \"touchmove\") {\n                $262c31a93dbc3ee6$var$dragData.currentX = e.touches[0].clientX - $262c31a93dbc3ee6$var$dragData.initialX;\n                $262c31a93dbc3ee6$var$dragData.currentY = e.touches[0].clientY - $262c31a93dbc3ee6$var$dragData.initialY;\n            } else {\n                $262c31a93dbc3ee6$var$dragData.currentX = e.clientX - $262c31a93dbc3ee6$var$dragData.initialX;\n                $262c31a93dbc3ee6$var$dragData.currentY = e.clientY - $262c31a93dbc3ee6$var$dragData.initialY;\n            }\n            $262c31a93dbc3ee6$var$dragData.xOffset = $262c31a93dbc3ee6$var$dragData.currentX;\n            $262c31a93dbc3ee6$var$dragData.yOffset = $262c31a93dbc3ee6$var$dragData.currentY;\n            $262c31a93dbc3ee6$var$setTranslate($262c31a93dbc3ee6$var$dragData.currentX, $262c31a93dbc3ee6$var$dragData.currentY);\n        }\n    }\n}\n\n\nfunction $39fe34838e40a6ee$export$638f90ec6c8962dd(list, dt, delay) {\n    for(let i = 0; i < list.length; i++){\n        const d = (list[i].target - list[i].current) * delay;\n        list[i].delta = d;\n        list[i].current += d;\n    }\n}\nfunction $39fe34838e40a6ee$export$96cab11a8a0b8676(list, values) {\n    for(let i = 0; i < list.length; i++){\n        list[i].current = list[i].target = values[i];\n        list[i].delta = 0.0;\n    }\n}\nfunction $39fe34838e40a6ee$export$8025de2eaad148b3(list, values) {\n    for(let i = 0; i < list.length; i++)list[i].target = values[i];\n}\n\n\nfunction $7b209ffefa4ce57b$export$6e470dc5a850be72(manipulator, dt) {\n    (0, $39fe34838e40a6ee$export$638f90ec6c8962dd)([\n        manipulator.x,\n        manipulator.y,\n        manipulator.zoom\n    ], dt, 0.1);\n// console.log(\"distance \", manipulator.zoom.current);\n}\nfunction $7b209ffefa4ce57b$export$c2d343401dbde5f7(manipulator) {\n    (0, $39fe34838e40a6ee$export$96cab11a8a0b8676)([\n        manipulator.x,\n        manipulator.y\n    ], [\n        0,\n        0\n    ]);\n}\nlet $7b209ffefa4ce57b$var$wheel = 0;\nfunction $7b209ffefa4ce57b$export$ac12f90bdc1d9b7(manipulator, zoomValue, sceneRadius, sceneCenter) {\n    (0, $39fe34838e40a6ee$export$96cab11a8a0b8676)([\n        manipulator.zoom\n    ], [\n        zoomValue\n    ]);\n    manipulator.sceneRadius = sceneRadius;\n    manipulator.sceneCenter = sceneCenter;\n    $7b209ffefa4ce57b$var$wheel = zoomValue;\n}\nfunction $7b209ffefa4ce57b$var$smoothStep(x) {\n    if (x < 0) x = 0;\n    if (x > 1.0) x = 1.0;\n    return x * x * (3 - 2 * x);\n}\nfunction $7b209ffefa4ce57b$export$213404cf1aade590(element, manipulator, sceneRadius, sceneCenter) {\n    manipulator.x = {\n        current: 0,\n        delta: 0,\n        target: 0\n    };\n    manipulator.y = {\n        current: 0,\n        delta: 0,\n        target: 0\n    };\n    manipulator.zoom = {\n        current: 0,\n        delta: 0,\n        target: 0\n    };\n    manipulator.sceneRadius = sceneRadius;\n    manipulator.sceneCenter = sceneCenter;\n    $7b209ffefa4ce57b$export$ac12f90bdc1d9b7(manipulator, sceneRadius * 2, sceneRadius, sceneCenter);\n    const scaleFromDistance = function() {\n        let distMin = manipulator.sceneCenter;\n        let distMax = 2.0 * manipulator.sceneRadius;\n        let range = distMax - distMin;\n        let value = (manipulator.zoom.current - distMin) / range;\n        let smooth = $7b209ffefa4ce57b$var$smoothStep(value);\n        return Math.max(0.001, value);\n    };\n    // connect weel event\n    const onWeelEvent = function(event) {\n        let scaler = 0.001 * manipulator.sceneRadius;\n        const distance = scaler * scaleFromDistance();\n        $7b209ffefa4ce57b$var$wheel += event.deltaY * distance;\n        $7b209ffefa4ce57b$var$wheel = Math.max($7b209ffefa4ce57b$var$wheel, manipulator.sceneCenter);\n        $7b209ffefa4ce57b$var$wheel = Math.min($7b209ffefa4ce57b$var$wheel, manipulator.sceneRadius * 3.0);\n        // //Math.max(0.001, manipulator.zoom.current + (distance * event.deltaY * scale))\n        // console.log(wheel, distance, event.deltaY * distance, \"zoom value\", manipulator.zoom.current);\n        (0, $39fe34838e40a6ee$export$8025de2eaad148b3)([\n            manipulator.zoom\n        ], [\n            $7b209ffefa4ce57b$var$wheel\n        ]);\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n    };\n    let mouseDown = false;\n    let x = 0;\n    let y = 0;\n    let xglobal = 0;\n    let yglobal = 0;\n    // connect mouse x/y\n    const onMouseMoveEvent = function(event) {\n        if (!mouseDown) return false;\n        const distance = scaleFromDistance() * 0.4;\n        xglobal += distance * (event.offsetX - x);\n        yglobal += distance * (event.offsetY - y);\n        x = event.offsetX;\n        y = event.offsetY;\n        (0, $39fe34838e40a6ee$export$8025de2eaad148b3)([\n            manipulator.x,\n            manipulator.y\n        ], [\n            xglobal,\n            yglobal\n        ]);\n        return false;\n    };\n    // connect mouse x/y\n    const onMouseDownEvent = function(event) {\n        mouseDown = true;\n        x = event.offsetX;\n        y = event.offsetY;\n        return false;\n    };\n    // connect mouse x/y\n    const onMouseUpEvent = function(event) {\n        mouseDown = false;\n        return false;\n    };\n    window.addEventListener(\"wheel\", onWeelEvent, {\n        passive: false\n    });\n    element.addEventListener(\"mousemove\", onMouseMoveEvent);\n    element.addEventListener(\"mousedown\", onMouseDownEvent);\n    element.addEventListener(\"mouseup\", onMouseUpEvent);\n}\n\n\nconst $ad2bcec7a0192558$var$EarthRadius = 6396137;\nconst $ad2bcec7a0192558$var$ModelConfig = {\n    plane: {\n        name: \"plane\",\n        radius: 2.0,\n        center: 0.0,\n        lodScaleFactor: {\n            min: 0.5,\n            max: 2,\n            format: (v)=>v.toFixed(5),\n            lodScaleFactor: 1\n        }\n    },\n    earth: {\n        name: \"earth\",\n        radius: $ad2bcec7a0192558$var$EarthRadius,\n        center: $ad2bcec7a0192558$var$EarthRadius,\n        lodScaleFactor: {\n            min: 0.00000002,\n            // min: 0.00000005\n            max: 0.0000005,\n            lodScaleFactor: 0.00000025,\n            format: (v)=>v.toFixed(10)\n        },\n        evaluateRealCamera: false,\n        k: 16\n    }\n};\nfunction $ad2bcec7a0192558$var$getModelConfig() {\n    if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.projectToEarth) return $ad2bcec7a0192558$var$ModelConfig.earth;\n    return $ad2bcec7a0192558$var$ModelConfig.plane;\n}\nfunction $ad2bcec7a0192558$var$setupUI() {\n    const precision5 = {\n        format: (v)=>v.toFixed(5)\n    };\n    const pane = new (0, $c398a0ea03e027b6$exports.Pane)({\n        title: \"Parameters\",\n        expanded: true,\n        container: document.getElementById(\"ui\")\n    });\n    (0, $262c31a93dbc3ee6$export$134cc5952cfc796e)(pane);\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"frameNumber\", {\n        format: (v)=>v.toFixed(0)\n    });\n    pane.addButton({\n        title: \"debugBuffers\"\n    }).on(\"click\", ()=>{\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.debugBuffers = true;\n    });\n    pane.addButton({\n        title: \"reset camera\"\n    }).on(\"click\", ()=>{\n        (0, $7b209ffefa4ce57b$export$c2d343401dbde5f7)((0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator);\n    });\n    const setupTabModel = function(config, tabIndex) {\n        tab.pages[tabIndex].addInput(config, \"lodScaleFactor\", {\n            min: config.min,\n            max: config.max,\n            format: config.format\n        }).on(\"change\", (ev)=>{\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.lodScaleFactor = ev.value;\n        });\n    };\n    const tab = pane.addTab({\n        pages: [\n            {\n                title: \"plane\"\n            },\n            {\n                title: \"earth\"\n            }\n        ]\n    }).on(\"select\", (ev)=>{\n        let config = null;\n        if (ev.index == 0) {\n            config = $ad2bcec7a0192558$var$ModelConfig.plane;\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.projectToEarth = false;\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateLodIn3D = false;\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateRealCamera = false;\n        } else {\n            config = $ad2bcec7a0192558$var$ModelConfig.earth;\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.projectToEarth = true;\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateLodIn3D = true;\n            (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateRealCamera = config.evaluateRealCamera;\n        }\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.lodScaleFactor = config.lodScaleFactor.lodScaleFactor;\n        (0, $7b209ffefa4ce57b$export$ac12f90bdc1d9b7)((0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator, config.radius * 2, config.radius, config.center);\n        // pane.refresh();\n        console.log(config);\n        console.log((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config);\n    });\n    setupTabModel($ad2bcec7a0192558$var$ModelConfig.plane.lodScaleFactor, 0);\n    setupTabModel($ad2bcec7a0192558$var$ModelConfig.earth.lodScaleFactor, 1);\n    tab.pages[1].addInput($ad2bcec7a0192558$var$ModelConfig.earth, \"evaluateRealCamera\").on(\"change\", (ev)=>{\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateRealCamera = ev.value;\n    });\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"gridResolution\", {\n        options: {\n            \"grid-1\": 0,\n            \"grid-4\": 1\n        }\n    });\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"displayTexture\", {\n        options: {\n            \"earth\": 0,\n            \"elevation\": 1,\n            \"none\": 2\n        }\n    });\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"rotate\");\n    pane.addButton({\n        title: \"Random Animation\"\n    }).on(\"click\", ()=>{\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.camera.start = [\n            Math.random() - 0.5,\n            Math.random() - 0.5\n        ], (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.camera.stop = [\n            Math.random() - 0.5,\n            Math.random() - 0.5\n        ], (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.camera.t = 0.0;\n    });\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"elevationScale\", {\n        min: 0.5,\n        max: 2.0\n    });\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"position\", {\n        x: {\n            min: -1,\n            max: 1.0\n        },\n        y: {\n            inverted: true,\n            min: -0.5,\n            max: 0.5\n        }\n    }).on(\"change\", (ev)=>{\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.position[\"x\"] = ev.value[\"x\"];\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.position[\"y\"] = ev.value[\"y\"];\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.pause = true;\n        pane.refresh();\n    });\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"pause\");\n    pane.addInput((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"wireframe\");\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"frameTime\");\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"updateQuadTree\", precision5);\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"renderQuadTree\", precision5);\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"updateQuadTree\", precision5);\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config, \"renderQuadTree\", precision5);\n    pane.addMonitor((0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.zoom, \"current\");\n    pane.addButton({\n        title: \"export Preset\"\n    }).on(\"click\", ()=>{\n        const preset = pane.exportPreset();\n        console.log(preset);\n        (0, $df5bef30413a053b$export$e620933a198f7bc)(preset);\n    });\n    (0, $262c31a93dbc3ee6$export$ae5814d89d1fd7f6)(10, 10);\n    tab.pages[1].selected = true;\n    pane.refresh();\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).pane = pane;\n}\nfunction $ad2bcec7a0192558$var$updateCamera(motion, t) {\n    motion.t += t;\n    const factor = Math.min(1.0, motion.t / motion.duration);\n    const f = 1.0 - factor;\n    // interpolate\n    motion.current[0] = motion.stop[0] * factor + motion.start[0] * f;\n    motion.current[1] = motion.stop[1] * factor + motion.start[1] * f;\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.position[\"x\"] = motion.current[0];\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.position[\"y\"] = motion.current[1];\n}\nasync function $ad2bcec7a0192558$var$initApp() {\n    const canvas = document.getElementById(\"webgpu-canvas\");\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu = await (0, $df5bef30413a053b$export$ec48efc62e183f53)(canvas);\n    (0, $7b209ffefa4ce57b$export$213404cf1aade590)(canvas, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator, $ad2bcec7a0192558$var$getModelConfig().radius, $ad2bcec7a0192558$var$getModelConfig().center);\n    // init UI debug\n    $ad2bcec7a0192558$var$setupUI();\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix = (0, $26675c4f95835ef1$exports).create();\n    (0, $f43313d21d3fd8e2$export$729c8b7179294ba).projectionMatrix = (0, $26675c4f95835ef1$exports).create();\n    // setup resize\n    const resizeCallback = function(width, height) {\n        // console.log(`${width} x ${height}`);\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.canvas.width = width;\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.canvas.height = height;\n        $ad2bcec7a0192558$var$updateProjection();\n    };\n    (0, $df5bef30413a053b$export$a8f8dc61d19909b3)(canvas, resizeCallback);\n    resizeCallback((0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.canvas.width, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.canvas.height);\n    return true;\n}\nfunction $ad2bcec7a0192558$var$updateProjection() {\n    const current = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.zoom.current;\n    let radius = $ad2bcec7a0192558$var$getModelConfig().radius;\n    // compute almost optimium near plane\n    let newNear = Math.max(0.001, (current - radius) * 0.5);\n    // console.log(newNear);\n    const w = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.canvas.width;\n    const h = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).wgpu.canvas.height;\n    (0, $26675c4f95835ef1$exports).perspective((0, $f43313d21d3fd8e2$export$729c8b7179294ba).projectionMatrix, Math.PI / 180.0 * 60.0, w / h, newNear, null);\n}\nasync function $ad2bcec7a0192558$export$f22da7240b7add18() {\n    await $ad2bcec7a0192558$var$initApp();\n    const elevation = await (0, $df5bef30413a053b$export$fe58198efe02b173)(\"textures/elevation.png\");\n    const earth = await (0, $df5bef30413a053b$export$fe58198efe02b173)(\"textures/earth.jpg\");\n    // const annotation = await loadImage('textures/annotation.jpg');\n    const elevationTexture = (0, $df5bef30413a053b$export$37b981a8c575f415)(elevation, \"r8unorm\");\n    const earthTexture = (0, $df5bef30413a053b$export$37b981a8c575f415)(earth, \"rgba8unorm\");\n    const annotationTexture = null;\n    const quadTree = (0, $d333dbec302236c3$export$97b3e5f57dadf554)(elevationTexture, earthTexture, annotationTexture);\n    let rotate = 0.0;\n    let previousTime = performance.now();\n    const renderLoop = async ()=>{\n        const currentTime = performance.now();\n        const delta = currentTime - previousTime;\n        previousTime = currentTime;\n        const dt = delta / 1000.0;\n        if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.pause == false) {\n            $ad2bcec7a0192558$var$updateCamera((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.camera, dt);\n            if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.rotate) rotate += -dt * 0.03;\n        }\n        (0, $7b209ffefa4ce57b$export$6e470dc5a850be72)((0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator, dt);\n        $ad2bcec7a0192558$var$updateProjection();\n        (0, $26675c4f95835ef1$exports).identity((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix);\n        let cameraPosition;\n        // quad tree works from 0-1 so we trnaslate to -1.0 : 0.5 ( because we have 2 quads to form a panorama)\n        // there are 2 setup:\n        // projectToEarth : project the quads to sphere ...\n        // !projectToEarth: keep things plannar to debug ...\n        if (!(0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.projectToEarth) {\n            (0, $26675c4f95835ef1$exports).rotateX((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.y.current * 0.01);\n            (0, $26675c4f95835ef1$exports).rotateY((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.x.current * 0.01);\n            let camera = (0, $26675c4f95835ef1$exports).create();\n            (0, $26675c4f95835ef1$exports).translate((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, [\n                -1,\n                -0.5,\n                0.0\n            ]);\n            (0, $26675c4f95835ef1$exports).lookAt(camera, [\n                0,\n                0,\n                (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.zoom.current\n            ], [\n                0.0,\n                0.0,\n                0\n            ], [\n                0,\n                1,\n                0\n            ]);\n            (0, $26675c4f95835ef1$exports).multiply((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, camera, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix);\n        } else {\n            // const yValue = app.manipulator.y.current * 0.01;\n            const yValue = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.y.current * 0.01;\n            const xValue = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.x.current * 0.01;\n            {\n                // the camera always look at the center of earth (0,0,0)\n                // we compute a position around earth and then use a lookat\n                (0, $26675c4f95835ef1$exports).rotateX((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, Math.PI * 0.5);\n                (0, $26675c4f95835ef1$exports).rotateY((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, rotate + -xValue);\n                (0, $26675c4f95835ef1$exports).rotateX((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, -yValue);\n                const initialCameraPosition = (0, $ab7f6dc0910e1ef7$exports).fromValues(0, 0, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.zoom.current);\n                cameraPosition = (0, $ab7f6dc0910e1ef7$exports).transformMat4((0, $ab7f6dc0910e1ef7$exports).create(), initialCameraPosition, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix);\n                // console.log(cameraPosition[0], cameraPosition[1],cameraPosition[2], app.manipulator.zoom.current);\n                (0, $26675c4f95835ef1$exports).lookAt((0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix, cameraPosition, [\n                    0,\n                    0,\n                    0\n                ], [\n                    0,\n                    0,\n                    1\n                ]);\n            }\n        }\n        // update per frame\n        quadTree.quadTreeData.config.evaluateLodIn3D = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateLodIn3D;\n        quadTree.quadTreeData.config.evaluateRealCamera = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateRealCamera;\n        quadTree.quadTreeData.config.projectToEarth = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.projectToEarth;\n        quadTree.quadTreeData.config.displayTexture = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.displayTexture;\n        quadTree.quadTreeData.config.elevationScale = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.elevationScale;\n        quadTree.quadTreeData.config.lodScaleFactor = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.lodScaleFactor;\n        if ((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.evaluateRealCamera) quadTree.quadTreeData.config.cameraPosition = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.projectToEarth ? (0, $e38eb280d3b76273$exports).fromValues(cameraPosition[0], cameraPosition[1], cameraPosition[2], 0) : (0, $e38eb280d3b76273$exports).fromValues(0, 0, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).manipulator.zoom.current, 0);\n        else quadTree.quadTreeData.config.cameraPosition = (0, $e38eb280d3b76273$exports).fromValues((0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.position[\"x\"] + 1.0, (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.position[\"y\"] + 0.5, 0, 0);\n        quadTree.quadTreeData.config.projectionMatrix = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).projectionMatrix;\n        quadTree.quadTreeData.config.modelMatrix = (0, $f43313d21d3fd8e2$export$729c8b7179294ba).modelMatrix;\n        quadTree.initUpdate(quadTree.quadTreeData);\n        quadTree.updateQuadTree(quadTree.quadTreeData);\n        quadTree.renderQuadTree(quadTree.quadTreeData);\n        (0, $f43313d21d3fd8e2$export$729c8b7179294ba).config.frameTime = delta;\n        requestAnimationFrame(renderLoop);\n        return true;\n    };\n    renderLoop();\n    return true;\n}\n$ad2bcec7a0192558$export$f22da7240b7add18();\n\n\n//# sourceMappingURL=index.e0fa3ced.js.map\n","import { mat4, vec4, vec3 } from \"gl-matrix\"\nimport { createTexture, initWebGPU, loadImage, saveFile, setupResize } from \"./utils\"\nimport { app, MoveCamera } from \"./app\"\nimport { initQuadTree, QuadTreeFunctions } from \"./quadtree\"\nimport { Pane } from \"tweakpane\"\nimport { setupDragUI, translateUI } from \"./drag\"\nimport { resetZoom, setupManipulator, updateManipulator, resetManipulator } from \"./manipulator\"\n// import { TabItemController } from \"@tweakpane/core/dist/cjs/blade/tab/controller/tab-item\"\n\nexport { };\n\nconst EarthRadius = 6378137.0 + 9000 * 2;\nconst ModelConfig = {\n    plane: {\n        name: 'plane',\n        radius: 2.0,\n        center: 0.0,\n        lodScaleFactor: {\n            min: 0.5,\n            max: 2,\n            format: (v: number) => v.toFixed(5),\n            lodScaleFactor: 1,\n        }\n    },\n    earth: {\n        name: 'earth',\n        radius: EarthRadius,\n        center: EarthRadius,\n        lodScaleFactor: {\n            min: 0.00000002,\n            // min: 0.00000005\n            max: 0.0000005,\n            lodScaleFactor: 0.00000025,\n            format: (v: number) => v.toFixed(10),\n        },\n        evaluateRealCamera: false,\n        k: 16\n    }\n};\n\nfunction getModelConfig() {\n    if (app.config.projectToEarth) {\n        return ModelConfig.earth;\n    }\n    return ModelConfig.plane\n}\n\nfunction setupUI() {\n\n    const precision5 = {\n        format: (v: number) => v.toFixed(5),\n    };\n\n    const pane = new Pane({\n        title: 'Parameters',\n        expanded: true,\n        container: document.getElementById('ui')\n    });\n    setupDragUI(pane);\n\n    pane.addMonitor(app.config, 'frameNumber', {\n        format: (v: number) => v.toFixed(0),\n    });\n\n    pane.addButton({\n        title: 'debugBuffers',\n    }).on('click', () => {\n        app.config.debugBuffers = true;\n    });\n\n    pane.addButton({\n        title: 'reset camera',\n    }).on('click', () => {\n        resetManipulator(app.manipulator);\n    });\n\n\n    const setupTabModel = function(config: any, tabIndex: number) {\n        tab.pages[tabIndex].addInput(config, 'lodScaleFactor', {\n            min: config.min, max: config.max,\n            format: config.format,\n        }).on('change', (ev) => {\n            app.config.lodScaleFactor = ev.value;\n        });\n    };\n\n    const tab = pane.addTab({\n        pages: [\n            { title: 'plane' },\n            { title: 'earth' },\n        ],\n    }).on('select', (ev) => {\n        let config = null;\n        if (ev.index == 0) {\n            config = ModelConfig.plane;\n            app.config.projectToEarth = false;\n            app.config.evaluateLodIn3D = false;\n            app.config.evaluateRealCamera = false;\n        } else {\n            config =  ModelConfig.earth;\n            app.config.projectToEarth = true;\n            app.config.evaluateLodIn3D = true;\n            app.config.evaluateRealCamera = config.evaluateRealCamera;\n        }\n        app.config.lodScaleFactor = config.lodScaleFactor.lodScaleFactor ;\n        resetZoom(app.manipulator, config.radius * 2, config.radius, config.center);\n        // pane.refresh();\n        console.log(config);\n        console.log(app.config);\n    });\n\n    setupTabModel( ModelConfig.plane.lodScaleFactor, 0 );\n    setupTabModel( ModelConfig.earth.lodScaleFactor, 1 );\n    tab.pages[1].addInput(ModelConfig.earth, 'evaluateRealCamera').on('change', (ev) => {\n        app.config.evaluateRealCamera = ev.value;\n    });\n\n    pane.addInput(app.config, 'gridResolution', {\n        options: {\n            'grid-1': 0,\n            'grid-4': 1,\n        },\n    });\n\n    pane.addInput(app.config, 'displayTexture', {\n        options: {\n            'earth': 0,\n            'elevation': 1,\n            'none': 2,\n        },\n    });\n\n    pane.addInput(app.config, 'rotate');\n\n    pane.addButton({\n        title: 'Random Animation',\n    }).on('click', () => {\n        app.config.camera.start = [Math.random() - 0.5, Math.random() - 0.5],\n            app.config.camera.stop = [Math.random() - 0.5, Math.random() - 0.5],\n            app.config.camera.t = 0.0;\n    });\n\n    pane.addInput(app.config, 'elevationScale', {\n        min: 0.5, max: 2.0\n    }\n    );\n\n    pane.addInput(app.config, 'position', {\n        x: { min: -1.0, max: 1.0 },\n        y: { inverted: true, min: -0.5, max: 0.5 },\n    }).on('change', (ev) => {\n        app.config.position['x'] = ev.value['x'];\n        app.config.position['y'] = ev.value['y'];\n        app.config.pause = true;\n        pane.refresh();\n    });\n\n    pane.addInput(app.config, 'pause');\n    pane.addInput(app.config, 'wireframe');\n    pane.addMonitor(app.config, 'frameTime');\n    pane.addMonitor(app.config, 'updateQuadTree', precision5);\n    pane.addMonitor(app.config, 'renderQuadTree', precision5);\n\n    pane.addMonitor(app.config, 'updateQuadTree', precision5);\n    pane.addMonitor(app.config, 'renderQuadTree', precision5);\n    pane.addMonitor(app.manipulator.zoom, 'current');\n    pane.addButton({ title: 'export Preset' }).on('click', () => {\n        const preset = pane.exportPreset();\n        console.log(preset);\n        saveFile(preset);\n    });\n    translateUI(10, 10);\n\n    tab.pages[1].selected = true;\n    pane.refresh();\n\n\n    app.pane = pane;\n}\n\nfunction updateCamera(motion: MoveCamera, t: number) {\n    motion.t += t;\n\n    const factor = Math.min(1.0, motion.t / motion.duration);\n    const f = 1.0 - factor;\n\n    // interpolate\n    motion.current[0] = motion.stop[0] * factor + motion.start[0] * f;\n    motion.current[1] = motion.stop[1] * factor + motion.start[1] * f;\n\n    app.config.position['x'] = motion.current[0];\n    app.config.position['y'] = motion.current[1];\n}\n\nasync function initApp() {\n\n    const canvas = document.getElementById(\"webgpu-canvas\") as HTMLCanvasElement;\n    app.wgpu = await initWebGPU(canvas);\n\n    setupManipulator(canvas, app.manipulator, getModelConfig().radius, getModelConfig().center);\n\n    // init UI debug\n    setupUI();\n\n    app.modelMatrix = mat4.create();\n    app.projectionMatrix = mat4.create();\n\n    // setup resize\n    const resizeCallback = function (width: number, height: number) {\n        // console.log(`${width} x ${height}`);\n\n        app.wgpu.canvas.width = width;\n        app.wgpu.canvas.height = height;\n\n        updateProjection();\n    };\n\n    setupResize(canvas, resizeCallback);\n    resizeCallback(app.wgpu.canvas.width, app.wgpu.canvas.height);\n\n    return true;\n}\n\nfunction updateProjection() {\n\n    const current = app.manipulator.zoom.current;\n    let radius: number = getModelConfig().radius;\n\n    // compute almost optimium near plane\n    let newNear = Math.max(0.001, (current - radius) * 0.5);\n    // console.log(newNear);\n    const w = app.wgpu.canvas.width;\n    const h = app.wgpu.canvas.height;\n    mat4.perspective(app.projectionMatrix, Math.PI / 180.0 * 60.0, w / h, newNear, null);\n}\n\nexport async function main() {\n\n    await initApp();\n\n    const elevation = await loadImage('textures/elevation.png');\n    const earth = await loadImage('textures/earth.jpg');\n    // const annotation = await loadImage('textures/annotation.jpg');\n    const elevationTexture = createTexture(elevation, 'r8unorm');\n    const earthTexture = createTexture(earth, 'rgba8unorm');\n    const annotationTexture = null;\n\n    const quadTree = initQuadTree(elevationTexture, earthTexture, annotationTexture);\n\n    let rotate = 0.0;\n    let previousTime = performance.now();\n    const renderLoop = async () => {\n        const currentTime = performance.now();\n        const delta = currentTime - previousTime;\n        previousTime = currentTime;\n\n        const dt = delta / 1000.0;\n        if (app.config.pause == false) {\n            updateCamera(app.config.camera, dt);\n\n            if (app.config.rotate) {\n                rotate += -dt * 0.03;\n            }\n        }\n        updateManipulator(app.manipulator, dt);\n        updateProjection();\n\n        mat4.identity(app.modelMatrix);\n\n        let cameraPosition: vec3;\n\n        // quad tree works from 0-1 so we trnaslate to -1.0 : 0.5 ( because we have 2 quads to form a panorama)\n        // there are 2 setup:\n        // projectToEarth : project the quads to sphere ...\n        // !projectToEarth: keep things plannar to debug ...\n        if (!app.config.projectToEarth) {\n            mat4.rotateX(app.modelMatrix, app.modelMatrix, app.manipulator.y.current * 0.01);\n            mat4.rotateY(app.modelMatrix, app.modelMatrix, app.manipulator.x.current * 0.01);\n\n            let camera = mat4.create();\n            mat4.translate(app.modelMatrix, app.modelMatrix, [-1.0, -0.5, 0.0]);\n\n            mat4.lookAt(camera, [0, 0, app.manipulator.zoom.current], [0.0, 0.0, 0], [0, 1, 0]);\n            mat4.multiply(app.modelMatrix, camera, app.modelMatrix);\n        } else {\n\n            // const yValue = app.manipulator.y.current * 0.01;\n            const yValue = app.manipulator.y.current * 0.01;\n            const xValue = app.manipulator.x.current * 0.01;\n\n            // #ifdef :)\n            if (true) {\n                // the camera always look at the center of earth (0,0,0)\n                // we compute a position around earth and then use a lookat\n\n                mat4.rotateX(app.modelMatrix, app.modelMatrix, Math.PI*0.5);\n                mat4.rotateY(app.modelMatrix, app.modelMatrix, rotate + -xValue);\n                mat4.rotateX(app.modelMatrix, app.modelMatrix, -yValue);\n\n                const initialCameraPosition = vec3.fromValues(0, 0, app.manipulator.zoom.current);\n\n                cameraPosition = vec3.transformMat4(vec3.create(), initialCameraPosition, app.modelMatrix);\n                // console.log(cameraPosition[0], cameraPosition[1],cameraPosition[2], app.manipulator.zoom.current);\n\n                mat4.lookAt(app.modelMatrix, cameraPosition, [0, 0, 0], [0, 0, 1]);\n\n            } else {\n                mat4.rotateY(app.modelMatrix, app.modelMatrix, yValue);\n                mat4.rotateZ(app.modelMatrix, app.modelMatrix, rotate + xValue);\n\n                const initialCameraPosition = vec3.fromValues(app.manipulator.zoom.current, 0, 0);\n\n                cameraPosition = vec3.transformMat4(vec3.create(), initialCameraPosition, mat4.invert(mat4.create(), app.modelMatrix));\n                //console.log(cameraPosition[0], cameraPosition[1],cameraPosition[2]);\n\n                let camera = mat4.create();\n                mat4.lookAt(camera, initialCameraPosition, [1, 0, 0], [0, 0, 1]);\n                //console.log(camera);\n                mat4.multiply(app.modelMatrix, camera, app.modelMatrix);\n            }\n        }\n\n\n        // update per frame\n        quadTree.quadTreeData.config.evaluateLodIn3D = app.config.evaluateLodIn3D;\n        quadTree.quadTreeData.config.evaluateRealCamera = app.config.evaluateRealCamera;\n        quadTree.quadTreeData.config.projectToEarth = app.config.projectToEarth;\n        quadTree.quadTreeData.config.displayTexture = app.config.displayTexture;\n        quadTree.quadTreeData.config.elevationScale = app.config.elevationScale;\n        quadTree.quadTreeData.config.lodScaleFactor = app.config.lodScaleFactor;\n\n        if (app.config.evaluateRealCamera) {\n            quadTree.quadTreeData.config.cameraPosition = app.config.projectToEarth ? vec4.fromValues(cameraPosition[0], cameraPosition[1], cameraPosition[2], 0) : vec4.fromValues(0, 0, app.manipulator.zoom.current, 0);\n        } else {\n            quadTree.quadTreeData.config.cameraPosition = vec4.fromValues(app.config.position['x'] + 1.0, app.config.position['y'] + 0.5, 0, 0);\n        }\n\n        quadTree.quadTreeData.config.projectionMatrix = app.projectionMatrix;\n        quadTree.quadTreeData.config.modelMatrix = app.modelMatrix;\n\n        quadTree.initUpdate(quadTree.quadTreeData);\n        quadTree.updateQuadTree(quadTree.quadTreeData);\n        quadTree.renderQuadTree(quadTree.quadTreeData);\n\n        app.config.frameTime = delta;\n\n        requestAnimationFrame(renderLoop);\n        return true;\n    };\n\n    renderLoop();\n    return true;\n}\n\nmain();\n","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { glMatrix, mat4 } from \"gl-matrix\";\nimport { app } from \"./app\";\n\nasync function loadImage(path: string) {\n    const img = new Image();\n    img.crossOrigin = 'anonymous' // to avoid CORS if used with Canvas\n    img.src = path;\n    await img.decode();\n    const imageBitmap = await createImageBitmap(img);\n    return imageBitmap;\n}\n\nfunction createTexture(image: ImageBitmap, inputFormat: GPUTextureFormat): GPUTexture {\n\n    let textureFormat: GPUTextureFormat = 'rgba8unorm';\n    if (inputFormat) {\n        textureFormat = inputFormat;\n    }\n\n    let texture = app.wgpu.device.createTexture({\n        size: [image.width, image.height, 1],\n        format: textureFormat,\n        usage:\n            GPUTextureUsage.TEXTURE_BINDING |\n            GPUTextureUsage.COPY_DST |\n            GPUTextureUsage.RENDER_ATTACHMENT,\n    });\n\n    app.wgpu.device.queue.copyExternalImageToTexture(\n        { source: image },\n        { texture: texture },\n        [image.width, image.height]\n    );\n\n    return texture;\n}\n\nfunction checkSupport() {\n    if (!navigator.gpu) {\n        document.body.innerHTML = `\n            <h1>WebGPU not supported!</h1>\n            <div>\n                SPIR-V WebGPU is currently only supported in <a href=\"https://www.google.com/chrome/canary/\">Chrome Canary</a>\n                with the flag \"enable-unsafe-webgpu\" enabled.\n            </div>\n            <div>\n                See the <a href=\"https://github.com/gpuweb/gpuweb/wiki/Implementation-Status\">Implementation Status</a> page for more details.\n            </div>\n        `;\n\n        throw new Error(\"WebGPU not supported\");\n    }\n}\n\n// got the code from https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n// I dont get all the details but it works, I am not interested to understand the details right now\nfunction setupResize(canvas: HTMLCanvasElement, resizeCallback: Function) {\n\n    function onResize(entries: any) {\n\n        for (const entry of entries) {\n            let width: number;\n            let height: number;\n            let dpr = window.devicePixelRatio;\n            let dprSupport = false;\n            if (entry.devicePixelContentBoxSize) {\n                // NOTE: Only this path gives the correct answer\n                // The other paths are an imperfect fallback\n                // for browsers that don't provide anyway to do this\n                width = entry.devicePixelContentBoxSize[0].inlineSize;\n                height = entry.devicePixelContentBoxSize[0].blockSize;\n                dpr = 1; // it's already in width and height\n                dprSupport = true;\n\n            } else if (entry.contentBoxSize) {\n                if (entry.contentBoxSize[0]) {\n                    width = entry.contentBoxSize[0].inlineSize;\n                    height = entry.contentBoxSize[0].blockSize;\n                } else {\n                    // legacy\n                    width = entry.contentBoxSize.inlineSize;\n                    height = entry.contentBoxSize.blockSize;\n                }\n            } else {\n                // legacy\n                width = entry.contentRect.width;\n                height = entry.contentRect.height;\n            }\n            const displayWidth = Math.round(width * dpr);\n            const displayHeight = Math.round(height * dpr);\n            resizeCallback(displayWidth, displayHeight);\n            if (!dprSupport) {\n                console.log(\"no dpi support\");\n            }\n        }\n    }\n\n    const resizeObserver = new ResizeObserver(onResize);\n    resizeObserver.observe(canvas, { box: 'content-box' });\n}\n\nfunction readBuffer(device: GPUDevice, buffer: GPUBuffer) {\n    const size = buffer.size;\n    // Get a GPU buffer for reading in an unmapped state.\n    const gpuReadBuffer = device.createBuffer({\n        size,\n        usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n    });\n\n    const copyEncoder = device.createCommandEncoder();\n    copyEncoder.copyBufferToBuffer(\n        buffer /* source buffer */,\n        0 /* source offset */,\n        gpuReadBuffer /* destination buffer */,\n        0 /* destination offset */,\n        size /* size */\n    );\n\n    // Submit copy commands.\n    const copyCommands = copyEncoder.finish();\n    device.queue.submit([copyCommands]);\n\n    return gpuReadBuffer;\n}\n\nfunction computeOrthoMatrix(projection: mat4, canvas: HTMLCanvasElement) {\n    const w = canvas.width;\n    const h = canvas.height;\n    //    mat4.ortho(projection, -w * 0.5, w * 0.5, -h * 0.5, h * 0.5, -10, 10);\n    mat4.ortho(projection, -w * 0.5, w * 0.5, -h * 0.5, h * 0.5, -1000, 1000);\n}\n\nasync function initWebGPU(canvas: HTMLCanvasElement) {\n\n    checkSupport();\n\n    const adapter = await navigator.gpu.requestAdapter();\n    let device = null;\n    let hasQueryTimer = false;\n    try {\n        device = await adapter.requestDevice({\n            requiredFeatures: Array(\"timestamp-query\"),\n        });\n        hasQueryTimer = true;\n        console.info(\"timestamp enabled\");\n    } catch (err) {\n        console.error(err);\n        device = await adapter.requestDevice();\n        console.info(\"timestamp query not enabled\");\n    }\n\n    console.log(device.limits);\n    var wgpu = {\n        device: device,\n        context: canvas.getContext(\"webgpu\"),\n        adapter: adapter,\n        canvas: canvas,\n        hasQueryTimer: hasQueryTimer\n    };\n\n    wgpu.context.configure({\n        device: device,\n        format: navigator.gpu.getPreferredCanvasFormat(),\n        alphaMode: 'opaque'\n    });\n\n    return wgpu;\n}\n\nfunction saveFile(data, filename:string = 'export.json') {\n\n    if (!data) {\n        console.error('Console.save: No data')\n        return;\n    }\n\n    if (typeof data === \"object\") {\n        data = JSON.stringify(data, undefined, 4)\n    }\n\n    var blob = new Blob([data], { type: 'text/json' }),\n        e = document.createEvent('MouseEvents'),\n        a = document.createElement('a')\n\n    a.download = filename\n    a.href = window.URL.createObjectURL(blob)\n    a.dataset.downloadurl = ['text/json', a.download, a.href].join(':')\n    e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\n    a.dispatchEvent(e)\n}\n\nexport { initWebGPU, loadImage, readBuffer, computeOrthoMatrix, setupResize, createTexture, saveFile }","import { mat4 } from \"gl-matrix\";\nimport { Manipulator, setupManipulator } from \"./manipulator\";\n\ninterface WebGPUContext {\n    device: GPUDevice,\n    context: GPUCanvasContext,\n    adapter: GPUAdapter,\n    canvas: HTMLCanvasElement,\n    hasQueryTimer: boolean\n}\n\ninterface MoveCamera {\n    start: Array<number>,\n    stop: Array<number>,\n    current: Array<number>,\n    t: number,\n    duration: number\n};\n\ninterface Config {\n    maxLod: number\n    debug: boolean\n    debugBuffers: boolean\n    position: Object\n    wireframe: boolean\n    frameNumber: number\n    lodScaleFactor: number\n    projectToEarth: boolean\n    evaluateLodIn3D: boolean\n    evaluateRealCamera: boolean\n    elevationScale: number\n    pause: boolean\n    frameTime: number\n    updateQuadTree: number\n    renderQuadTree: number\n    gridResolution: number\n    displayTexture: number\n    pauseTree: number\n    camera: MoveCamera\n    rotate: boolean\n}\n\ninterface Application {\n    pane: any,\n    config: Config,\n    wgpu: WebGPUContext,\n    projectionMatrix: mat4,\n    modelMatrix: mat4,\n    manipulator: Manipulator,\n};\n\nconst app: Application = {\n    pane: null,\n    config: {\n        maxLod: 9,\n        projectToEarth: false,\n        evaluateLodIn3D: false,\n        evaluateRealCamera: false,\n        displayTexture: 0,\n        gridResolution: 1,\n        lodScaleFactor: 2.0,\n        debug: false,\n        debugBuffers: false,\n        elevationScale: 1.0,\n        position: { x: 0.0, y: 0.0 },\n        wireframe: true,\n        frameNumber: 0,\n        pause: false,\n        frameTime: 0,\n        updateQuadTree: 0,\n        renderQuadTree: 0,\n        pauseTree: 0,\n        rotate: false,\n        camera: {\n            start: [-0.5, -0.5],\n            stop: [0.5, 0.5],\n            current: [0, 0],\n            t: 0.0,\n            duration: 120.0,\n        },\n    },\n    manipulator: {} as Manipulator,\n    wgpu: null,\n    projectionMatrix: null,\n    modelMatrix: null,\n};\n\nexport { app, MoveCamera };\n","import { app } from \"./app\"\nimport { QuadTree, QuadTreeFunctions, QuadTreeConfig, QuadTreeConfigSize, QuadNodeSize, PingPongComputeBuffer, QueryCounter, IndexedGeometry, Grid1, Grid4, GridGeometry, RenderGeometry } from \"./quadtree-types\"\nimport { dumpDebugRenderData, addDebugRenderCommands, addDebugComputeCommands, dumpDebugComputeData } from \"./quadtree-debug\"\nimport { createAnnotations } from \"./annotation\"\nimport { readBuffer } from \"./utils\"\n\n// @ts-ignore\nimport DrawShader from \"bundle-text:./draw-quadtree.wgsl\"\n\n// @ts-ignore\nimport ComputeShader from \"bundle-text:./compute-quadtree.wgsl\"\n\n// @ts-ignore\nimport NodeFunctions from \"bundle-text:./node-functions.wgsl\"\n\nfunction getQuadTreeComputeShader(workgroupSize: number) {\n    console.log('workgroup size', workgroupSize);\n    // workgroupSize must be power of two\n    const workgroupBitShift = Math.log2(workgroupSize);\n    if ((1 << workgroupBitShift) !== Math.floor(workgroupSize)) {\n        throw `workgroupSize must be power of two (${workgroupSize})`;\n    }\n\n    const define = `\n    const WORKGROUP_BIT_SHIFT : u32 = ${workgroupBitShift};\\n\n    const WORKGROUP_SIZE : u32 = ${workgroupSize};\\n\n    `;\n    return define + NodeFunctions + ComputeShader;\n}\n\nfunction timestamp(query: QueryCounter, encoder: GPUCommandEncoder, label: String) {\n    if (!app.wgpu.hasQueryTimer) {\n        return;\n    }\n\n    if (query.index == query.capacity) {\n        console.error(\"too many query\", query.index, label);\n        return;\n    }\n    encoder.writeTimestamp(query.querySet, query.index);\n    query.labelMap.set(label, query.index);\n    query.index++;\n}\n\nfunction createQuadGeometry(grid: GridGeometry): any {\n    const positionBuffer = app.wgpu.device.createBuffer({\n        size: Float32Array.BYTES_PER_ELEMENT * grid.vertices.length,\n        usage: GPUBufferUsage.VERTEX,\n        mappedAtCreation: true\n    });\n    new Float32Array(positionBuffer.getMappedRange()).set(grid.vertices);\n    positionBuffer.unmap();\n\n    // Create the model index buffer.\n    const triangleIndexBuffer = app.wgpu.device.createBuffer({\n        size: grid.triangles.length * Uint16Array.BYTES_PER_ELEMENT,\n        usage: GPUBufferUsage.INDEX,\n        mappedAtCreation: true,\n    });\n    new Uint16Array(triangleIndexBuffer.getMappedRange()).set(grid.triangles);\n    triangleIndexBuffer.unmap();\n\n\n    // Create the model index buffer.\n    const wireframeIndexBuffer = app.wgpu.device.createBuffer({\n        size: grid.lines.length * Uint16Array.BYTES_PER_ELEMENT,\n        usage: GPUBufferUsage.INDEX,\n        mappedAtCreation: true,\n    });\n    new Uint16Array(wireframeIndexBuffer.getMappedRange()).set(grid.lines);\n    wireframeIndexBuffer.unmap();\n\n    let triangles: IndexedGeometry = {\n        index: triangleIndexBuffer,\n        position: positionBuffer,\n        numIndices: grid.triangles.length,\n    };\n\n    let wireframes: IndexedGeometry = {\n        index: wireframeIndexBuffer,\n        position: positionBuffer,\n        numIndices: grid.lines.length,\n    };\n\n    return {\n        solid: triangles,\n        wireframe: wireframes\n    };\n}\n\n// * https://jadkhoury.github.io/files/MasterThesisFinal.pdf\n// * https://github.com/jadkhoury/TessellationDemo\nfunction createQuadtreeData(maxLevel: number, elevationTexture: GPUTexture, earthTexture: GPUTexture, annotationTexture) {\n\n    const device = app.wgpu.device;\n    const computeShader = getQuadTreeComputeShader(32);\n\n    // helper to create buffer for nodes\n    // one buffer to write the indirect call + one buffer for the node\n    const createDispatchBuffer = function (usage: number, label: string) {\n        const buffer = device.createBuffer({\n            label: label,\n            size: 4 * Uint32Array.BYTES_PER_ELEMENT,\n            usage: usage,\n            mappedAtCreation: true,\n        });\n        const mappedBuffer = new Uint32Array(buffer.getMappedRange());\n        mappedBuffer[0] = 1;\n        mappedBuffer[1] = 1;\n        mappedBuffer[2] = 1;\n        mappedBuffer[3] = 2;\n        buffer.unmap();\n        return buffer;\n    }\n\n    const createNodeBuffer = function (numElements: number, usage: number, label: string) {\n\n        const buffer = app.wgpu.device.createBuffer({\n            label: label,\n            size: QuadNodeSize * numElements,\n            usage: usage,\n            mappedAtCreation: true,\n        });\n        const mappedBuffer = new Uint32Array(buffer.getMappedRange());\n        // look to QuadNodeSize for explanation\n        // first quad\n        mappedBuffer[0] = 1;\n        mappedBuffer[1] = 0;\n        // second quad\n        mappedBuffer[2] = 1;\n        mappedBuffer[3] = 1;\n        for (let i = 4; i < mappedBuffer.length; i++) {\n            mappedBuffer[i] = 0xffffffff;\n        }\n        buffer.unmap();\n        return buffer;\n    };\n\n    const maxNodes = 1 << (2 * (maxLevel)) + 1;\n\n    // create 2 instances to do pingpong\n    const nodeBuffers: Array<PingPongComputeBuffer> = [{\n        nodeBuffer: createNodeBuffer(maxNodes, GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST, \"bufferNodeA\"),\n        dispatchIndirect: createDispatchBuffer(GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.INDIRECT, \"drawIndirectA\")\n    },\n    {\n        nodeBuffer: createNodeBuffer(maxNodes, GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST, \"bufferNodeB\"),\n        dispatchIndirect: createDispatchBuffer(GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.INDIRECT, \"drawIndirectB\")\n    }];\n\n\n    // this buffer is used for instance gometry\n    // contains the node + index of the node\n    const instanceBuffer: GPUBuffer = device.createBuffer({\n        label: \"instances\",\n        size: maxNodes * Uint32Array.BYTES_PER_ELEMENT * 2,\n        usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.VERTEX,\n    });\n\n    // create buffer for the indirect draw call\n    // for quads and wireframe ( 8 * 2)\n    const drawIndirect = device.createBuffer({\n        label: \"drawIndirect(quads/wireframes)\",\n        size: 2 * 8 * Uint32Array.BYTES_PER_ELEMENT,\n        usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.INDIRECT\n    });\n\n    // in KB\n    const nodeBufferSize = (4 * maxNodes) / 1024;\n    console.info(`init quadtree with ${maxNodes} nodes (${nodeBufferSize}KB)`);\n\n    // buffer for data / uniform\n    const quadTreeConfigBuffer = device.createBuffer({\n        size: QuadTreeConfigSize,\n        usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        mappedAtCreation: false,\n    });\n\n    const computePipeline = device.createComputePipeline({\n        layout: 'auto',\n        compute: {\n            module: device.createShaderModule({\n                code: computeShader,\n            }),\n            entryPoint: 'main',\n        },\n    });\n\n    const bindGroupLayout = computePipeline.getBindGroupLayout(0);\n    const createBindGroup = function (\n        previousNodeBuffer: GPUBuffer,\n        previousDispatchIndirect: GPUBuffer,\n        outputNodeBuffer: GPUBuffer,\n        outputDispatchIndirect: GPUBuffer,\n        uniform: GPUBuffer,\n        instanceBuffer: GPUBuffer,\n        drawIndirect: GPUBuffer\n    ) {\n        const bindGroup = device.createBindGroup({\n            layout: bindGroupLayout,\n            entries: [{\n                binding: 0,\n                resource: {\n                    buffer: previousNodeBuffer\n                }\n            },\n            {\n                binding: 1,\n                resource: {\n                    buffer: previousDispatchIndirect\n                }\n            },\n            {\n                binding: 2,\n                resource: {\n                    buffer: outputNodeBuffer\n                }\n            },\n            {\n                binding: 3,\n                resource: {\n                    buffer: outputDispatchIndirect\n                }\n            },\n            {\n                binding: 4,\n                resource: {\n                    buffer: uniform\n                }\n            },\n            {\n                binding: 5,\n                resource: {\n                    buffer: instanceBuffer\n                }\n            },\n            {\n                binding: 6,\n                resource: {\n                    buffer: drawIndirect\n                }\n            }\n            ]\n        });\n        return bindGroup;\n    };\n    const computeBindGroups = [\n        createBindGroup(nodeBuffers[0].nodeBuffer, nodeBuffers[0].dispatchIndirect, nodeBuffers[1].nodeBuffer, nodeBuffers[1].dispatchIndirect, quadTreeConfigBuffer, instanceBuffer, drawIndirect),\n        createBindGroup(nodeBuffers[1].nodeBuffer, nodeBuffers[1].dispatchIndirect, nodeBuffers[0].nodeBuffer, nodeBuffers[0].dispatchIndirect, quadTreeConfigBuffer, instanceBuffer, drawIndirect)\n    ];\n\n    // sampler for\n    const sampler = device.createSampler({\n        magFilter: 'linear',\n        minFilter: 'linear',\n    });\n\n\n\n    const createRenderGeometry = function (primitive: GPUPrimitiveTopology, shaderModule: GPUShaderModule) : RenderGeometry {\n        const pipeline = app.wgpu.device.createRenderPipeline({\n            layout: 'auto',\n            vertex: {\n                module: shaderModule,\n                entryPoint: \"vertex_main\",\n                buffers: [{\n                    arrayStride: 16,\n                    attributes: [{\n                        shaderLocation: 0,\n                        format: \"float32x4\",\n                        offset: 0\n                    } as GPUVertexAttribute]\n                }]\n            },\n            fragment: {\n                module: shaderModule,\n                entryPoint: \"fragment_main\",\n                targets: [{\n                    format: navigator.gpu.getPreferredCanvasFormat()\n                }]\n            },\n            primitive: {\n                topology: primitive,\n                cullMode: 'back',\n                frontFace: 'ccw'\n            },\n            depthStencil: {\n                depthWriteEnabled: true,\n                depthCompare: 'less',\n                format: 'depth24plus'\n            }\n        });\n\n        const layout = pipeline.getBindGroupLayout(0);\n        const bindGroup = app.wgpu.device.createBindGroup({\n            layout: layout,\n            entries: [\n            {\n                binding: 0,\n                resource: {\n                    buffer: instanceBuffer,\n                },\n            },\n            {\n                binding: 1,\n                resource: {\n                    buffer: quadTreeConfigBuffer,\n                },\n            },\n            {\n                binding: 2,\n                resource: sampler\n            },\n            {\n                binding: 3,\n                resource: elevationTexture.createView()\n            },\n            {\n                binding: 4,\n                resource: earthTexture.createView()\n            }\n            ]\n        });\n\n        return {\n            pipeline: pipeline,\n            bindGroup: bindGroup\n        };\n    };\n\n    const geometry1 : RenderGeometry = createQuadGeometry(Grid1);\n    const geometry4 : RenderGeometry = createQuadGeometry(Grid4);\n\n    // create one pipeline for solid and wireframe\n    const drawQuadPipeline = createRenderGeometry(\"triangle-list\", app.wgpu.device.createShaderModule({\n        code: \"const COLOR_FACTOR : f32 = 1.0;\\n\" + NodeFunctions + DrawShader\n    }));\n    const drawWireframePipeline = createRenderGeometry(\"line-list\", app.wgpu.device.createShaderModule({\n        code: \"const COLOR_FACTOR : f32 = 0.1;\\n\" + NodeFunctions + DrawShader\n    }));\n\n    const createQuery = function (capacity: number) {\n        if (!app.wgpu.hasQueryTimer) {\n            return {\n                capacity: 0,\n                counters: null,\n                querySet: null,\n                labelMap: new Map<String, number>(),\n                index: 0\n            };\n        }\n\n        const querySet = device.createQuerySet({\n            type: \"timestamp\",\n            count: capacity,\n        });\n        const queryBuffer = device.createBuffer({\n            size: 8 * capacity,\n            usage: GPUBufferUsage.QUERY_RESOLVE\n                | GPUBufferUsage.STORAGE\n                | GPUBufferUsage.COPY_SRC\n                | GPUBufferUsage.COPY_DST,\n        });\n\n        return {\n            capacity: capacity,\n            counters: queryBuffer,\n            querySet: querySet,\n            labelMap: new Map<String, number>(),\n            index: 0\n        }\n    }\n\n    // I wanted to test implement annotation on the globe but it will be for another time\n    // const annotations = createAnnotations(quadTreeConfigBuffer, annotationTexture);\n\n    const quadTree: QuadTree = {\n        frame: 0,\n        maxNodes: maxNodes,\n        nodeBuffers: nodeBuffers,\n        computeBindGroups: computeBindGroups,\n        computePipeline: computePipeline,\n        drawIndirect: drawIndirect,\n        instanceBuffer: instanceBuffer,\n        gridGeometries: [geometry1, geometry4],\n        renderQuad: drawQuadPipeline,\n        renderWireframe: drawWireframePipeline,\n        configBuffer: quadTreeConfigBuffer,\n        annotations: null,\n        config: {\n            projectionMatrix: null,\n            modelMatrix: null,\n            cameraPosition: null,\n            projectToEarth: true,\n            evaluateLodIn3D: false,\n            evaluateRealCamera: false,\n            displayTexture: 0,\n            elevationScale: 1.0,\n            lodScaleFactor: 2.0,\n        },\n        depthTexture: null,\n        query: createQuery(4),\n    };\n\n    return quadTree;\n}\n\nfunction initUpdate(pingPongBuffer: QuadTree) {\n    pingPongBuffer.query.index = 0;\n}\n\nfunction updateDataBuffer(config: QuadTreeConfig, buffer: GPUBuffer) {\n\n    // need to try shader reflexion when I will have time\n    // https://brendan-duncan.github.io/wgsl_reflect/example.html\n    const endianness = true;\n    let tmpBuffer = new ArrayBuffer(QuadTreeConfigSize);\n    let tmpView = new DataView(tmpBuffer);\n\n    // see https://vscode.dev/github/cedricpinson/webgpu-experiment/blob/8b10d67ee4addc918006c7360e0f9667f8c04d60/src/quadtree-types.ts#L46\n    let offset = 0;\n    for (let i = 0; i < 16; i++) {\n        tmpView.setFloat32(offset, config.projectionMatrix[i], endianness);\n        offset += 4;\n    }\n    for (let i = 0; i < 16; i++) {\n        tmpView.setFloat32(offset, config.modelMatrix[i], endianness);\n        offset += 4;\n    }\n    for (let i = 0; i < 4; i++) {\n        tmpView.setFloat32(offset, config.cameraPosition[i], endianness);\n        offset += 4;\n    }\n\n    tmpView.setUint32 (offset +  0, config.projectToEarth == true ? 1 : 0, endianness);\n    tmpView.setUint32 (offset +  4, config.evaluateLodIn3D == true ? 1 : 0, endianness);\n    tmpView.setUint32 (offset +  8, config.displayTexture, endianness);\n    tmpView.setFloat32(offset + 12, config.elevationScale, endianness);\n    tmpView.setUint32 (offset + 16, config.evaluateRealCamera == true ? 1 : 0, endianness);\n    tmpView.setFloat32 (offset + 20, config.lodScaleFactor, endianness);\n\n    app.wgpu.device.queue.writeBuffer(buffer, 0, tmpView, 0, QuadTreeConfigSize);\n}\n\nasync function updateQuadTree(pingPongBuffer: QuadTree) {\n\n    const device = app.wgpu.device;\n\n    app.config.frameNumber = pingPongBuffer.frame;\n    const index = pingPongBuffer.frame;\n    pingPongBuffer.frame += 1;\n\n    // data set from the application\n    updateDataBuffer(pingPongBuffer.config, pingPongBuffer.configBuffer);\n\n    // reset the count of the next buffer to write the new node results\n    app.wgpu.device.queue.writeBuffer(pingPongBuffer.nodeBuffers[(index + 1) % 2].dispatchIndirect, 0, new Uint32Array([0, 1, 1, 0]));\n\n    const geometry = pingPongBuffer.gridGeometries[app.config.gridResolution];\n\n    // reset the drawIndirect buffer\n    app.wgpu.device.queue.writeBuffer(pingPongBuffer.drawIndirect, 0, new Uint32Array([\n        geometry.solid.numIndices, 0, 0, 0, 0, 0, 0, 0,\n        app.config.wireframe === true ? geometry.wireframe.numIndices : 0, 0, 0, 0, 0, 0, 0, 0,\n    ]));\n\n    const commandEncoder = device.createCommandEncoder();\n    timestamp(pingPongBuffer.query, commandEncoder, 'updateStart');\n    const pass = commandEncoder.beginComputePass();\n\n    pass.setPipeline(pingPongBuffer.computePipeline);\n\n    // bind groups\n    pass.setBindGroup(0, pingPongBuffer.computeBindGroups[index % 2]);\n    pass.dispatchWorkgroupsIndirect(pingPongBuffer.nodeBuffers[index % 2].dispatchIndirect, 0);\n    pass.end();\n\n    let debugBuffers: Array<GPUBuffer> = null;\n    if (app.config.debugBuffers) {\n        debugBuffers = addDebugComputeCommands(commandEncoder, pingPongBuffer, index % 2, (index + 1) % 2);\n    }\n\n    timestamp(pingPongBuffer.query, commandEncoder, \"updateEnd\");\n    device.queue.submit([commandEncoder.finish()]);\n\n    if (debugBuffers) {\n        dumpDebugComputeData(debugBuffers, pingPongBuffer.maxNodes, app.config.frameNumber);\n    }\n\n    return true;\n}\n\nfunction getRendePassDesc(quadTree: QuadTree) {\n    const colorView = app.wgpu.context.getCurrentTexture().createView();\n\n    // create / update depthTexture\n    if (quadTree.depthTexture == null ||\n        quadTree.depthTexture.width !== app.wgpu.context.getCurrentTexture().width ||\n        quadTree.depthTexture.height !== app.wgpu.context.getCurrentTexture().height\n    ) {\n\n        const depthTextureDesc: GPUTextureDescriptor = {\n            size: [app.wgpu.context.getCurrentTexture().width, app.wgpu.context.getCurrentTexture().height, 1],\n            dimension: '2d',\n            format: 'depth24plus',\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\n        };\n\n        if (quadTree.depthTexture) {\n            quadTree.depthTexture.destroy();\n        }\n\n        quadTree.depthTexture = app.wgpu.device.createTexture(depthTextureDesc);\n    }\n\n    let depthView = quadTree.depthTexture.createView();\n\n    const colorAttachment: GPURenderPassColorAttachment = {\n        view: colorView,\n        clearValue: [0, 0, 0, 1],\n        loadOp: 'clear',\n        storeOp: 'store',\n    };\n    const depthAttachment: GPURenderPassDepthStencilAttachment = {\n        view: depthView,\n        depthClearValue: 1,\n        depthLoadOp: 'clear',\n        depthStoreOp: 'store',\n    };\n\n    const renderPassDesc: GPURenderPassDescriptor = {\n        colorAttachments: [colorAttachment],\n        depthStencilAttachment: depthAttachment\n    };\n\n    return renderPassDesc;\n}\n\nasync function renderQuads(pingPongBuffer: QuadTree) {\n\n    const commandEncoder = app.wgpu.device.createCommandEncoder();\n\n    timestamp(pingPongBuffer.query, commandEncoder, \"renderStart\");\n\n    const index = pingPongBuffer.frame;\n\n    const pass = commandEncoder.beginRenderPass(getRendePassDesc(pingPongBuffer));\n    const geometry = pingPongBuffer.gridGeometries[app.config.gridResolution];\n\n    // solid\n    if (true) {\n    pass.setPipeline(pingPongBuffer.renderQuad.pipeline);\n    pass.setVertexBuffer(0, geometry.solid.position);\n    pass.setIndexBuffer(geometry.solid.index, 'uint16', 0);\n    pass.setBindGroup(0, pingPongBuffer.renderQuad.bindGroup);\n    pass.drawIndexedIndirect(pingPongBuffer.drawIndirect, 0);\n\n    // wireframe\n    pass.setPipeline(pingPongBuffer.renderWireframe.pipeline);\n    pass.setVertexBuffer(0, geometry.wireframe.position);\n    pass.setIndexBuffer(geometry.wireframe.index, 'uint16', 0);\n    pass.setBindGroup(0, pingPongBuffer.renderWireframe.bindGroup);\n    pass.drawIndexedIndirect(pingPongBuffer.drawIndirect, 8 * 4);\n    }\n\n    if (false) {\n        // annotations\n        pass.setPipeline(pingPongBuffer.annotations.renderAnnotation.pipeline);\n        // use single quad instance\n        const annotationGeometry = pingPongBuffer.gridGeometries[0];\n        pass.setVertexBuffer(0, annotationGeometry.solid.position);\n        pass.setIndexBuffer(annotationGeometry.solid.index, 'uint16', 0);\n        pass.setBindGroup(0, pingPongBuffer.annotations.renderAnnotation.bindGroup);\n        pass.drawIndexed(annotationGeometry.solid.numIndices, pingPongBuffer.annotations.numAnnotation);\n    }\n\n    pass.end();\n\n    // debug code\n    let debugBuffer: GPUBuffer = null;\n    if (app.config.debugBuffers) {\n        //debugBuffer = addDebugRenderCommands(commandEncoder, pingPongBuffer.vertexBuffer, pingPongBuffer.drawIndirect);\n    }\n\n    timestamp(pingPongBuffer.query, commandEncoder, \"renderEnd\");\n\n    if (app.wgpu.hasQueryTimer) {\n        commandEncoder.resolveQuerySet(\n            pingPongBuffer.query.querySet,\n            0,// index of first query to resolve\n            pingPongBuffer.query.capacity,//number of queries to resolve\n            pingPongBuffer.query.counters,\n            0);// destination offset\n    }\n\n    app.wgpu.device.queue.submit([commandEncoder.finish()]);\n\n    if (debugBuffer) {\n        dumpDebugRenderData(debugBuffer, app.config.frameNumber);\n    }\n    app.config.debugBuffers = false;\n\n    if (app.wgpu.hasQueryTimer) {\n        // get counter back\n        const bufferRead = readBuffer(app.wgpu.device, pingPongBuffer.query.counters);\n        await bufferRead.mapAsync(GPUMapMode.READ);\n        const arrayBuffer = bufferRead.getMappedRange();\n        // Decode it into an array of timestamps in nanoseconds\n        const timingsNanoseconds = new BigInt64Array(arrayBuffer);\n        const timeUpdateQuadTreeInMS = Number(timingsNanoseconds[pingPongBuffer.query.labelMap.get('updateEnd')] - timingsNanoseconds[pingPongBuffer.query.labelMap.get('updateStart')]) / 1_000_000;\n        const timeRenderQuadTreeInMS = Number(timingsNanoseconds[pingPongBuffer.query.labelMap.get('renderEnd')] - timingsNanoseconds[pingPongBuffer.query.labelMap.get('renderStart')]) / 1_000_000;\n\n        bufferRead.unmap();\n        bufferRead.destroy();\n\n        app.config.updateQuadTree = timeUpdateQuadTreeInMS;\n        app.config.renderQuadTree = timeRenderQuadTreeInMS;\n    }\n\n\n    return true;\n}\n\nfunction initQuadTree(elevationTexture: GPUTexture, earthTexture: GPUTexture, annotationTexture: GPUTexture) {\n    const quadTreeData: QuadTree = createQuadtreeData(app.config.maxLod, elevationTexture, earthTexture, annotationTexture);\n\n    return {\n        quadTreeData: quadTreeData,\n        initUpdate: initUpdate,\n        updateQuadTree: updateQuadTree,\n        renderQuadTree: renderQuads\n    };\n}\n\n\nexport { initQuadTree, QuadTreeFunctions }","import { mat4, vec4 } from \"gl-matrix\"\n\n// a node is:\n// u32 , u32\n// node, index\nconst QuadNodeSize = Uint32Array.BYTES_PER_ELEMENT * 2;\n\ninterface PingPongComputeBuffer {\n    nodeBuffer: GPUBuffer\n    dispatchIndirect: GPUBuffer\n}\n\ninterface QuadTreeFunctions {\n    quadTreeData: QuadTree\n    initUpdate: Function\n    updateQuadTree: Function\n    renderQuadTree: Function\n}\n\ninterface QueryCounter {\n    capacity: number\n    counters: GPUBuffer\n    querySet: GPUQuerySet\n    index: number\n    labelMap: Map<String, number>\n}\n\ninterface IndexedGeometry {\n    position: GPUBuffer\n    index: GPUBuffer\n    numIndices: number\n}\n\ninterface SolidWireframeGeometry {\n    solid: IndexedGeometry\n    wireframe: IndexedGeometry\n}\n\ninterface RenderGeometry {\n    pipeline: GPURenderPipeline\n    bindGroup: GPUBindGroup\n}\n\n// webgpu minimum binding is 16 bytes\nconst QuadTreeConfigSize = Math.max(Uint32Array.BYTES_PER_ELEMENT * (16*2 +4 + 7), 176);\ninterface QuadTreeConfig {\n    projectionMatrix: mat4\n    modelMatrix: mat4\n    cameraPosition: vec4\n    projectToEarth: boolean\n    evaluateLodIn3D: boolean\n    evaluateRealCamera: boolean\n    displayTexture: number\n    elevationScale: number\n    lodScaleFactor: number\n}\n\ninterface Annotation {\n    annotationBuffer: GPUBuffer\n    annotationTexture: GPUTexture\n    renderAnnotation: RenderGeometry\n    annotation: any\n    numAnnotation: number\n}\n\ninterface QuadTree {\n    frame: number,\n    maxNodes: number,\n    nodeBuffers: Array<PingPongComputeBuffer>\n    computeBindGroups: Array<GPUBindGroup>\n    computePipeline: GPUComputePipeline\n    drawIndirect: GPUBuffer\n    instanceBuffer: GPUBuffer\n    gridGeometries: Array<SolidWireframeGeometry>\n    renderQuad: RenderGeometry\n    renderWireframe: RenderGeometry\n    depthTexture: GPUTexture\n    configBuffer: GPUBuffer\n    config: QuadTreeConfig\n    query: QueryCounter,\n    annotations: Annotation\n}\n\ninterface GridGeometry {\n    vertices: Array<number>\n    lines: Array<number>\n    triangles: Array<number>\n}\n\n// 2 +-+-+     // 2 5 8\n// 1 +-+-+     // 1 4 7\n// 0 +-+-+     // 0 3 6\n// triangles: [\n//     0, 1, 4,\n//     0, 4, 3,\n//     1, 2, 5,\n//     1, 5, 4,\n\n//     3, 4, 7,\n//     3, 7, 6,\n//     4, 5, 8,\n//     4, 8, 7,\n// ],\n// triangles: [\n//     0, 4, 1,\n//     0, 3, 4,\n//     1, 5, 2,\n//     1, 4, 5,\n\n//     3, 7, 4,\n//     3, 6, 7,\n//     4, 8, 5,\n//     4, 7, 8,\n// ],\nconst Grid4: GridGeometry = {\n    vertices: [\n        0.0, 0.0, 0.0, 0.0,\n        0.0, 0.5, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.5, 0.0, 1.0, 0.0,\n        0.5, 0.5, 1.0, 1.0,\n        0.5, 1.0, 1.0, 1.0,\n        1.0, 0.0, 1.0, 0.0,\n        1.0, 0.5, 1.0, 1.0,\n        1.0, 1.0, 1.0, 1.0,\n    ],\n    triangles: [\n        0, 4, 1,\n        0, 3, 4,\n        1, 5, 2,\n        1, 4, 5,\n\n        3, 7, 4,\n        3, 6, 7,\n        4, 8, 5,\n        4, 7, 8,\n    ],\n    lines: [\n        0, 1,\n        1, 2,\n        2, 5,\n        5, 8,\n        8, 7,\n        7, 6,\n        6, 3,\n        3, 0,\n\n        0, 4,\n        1, 5,\n        4, 8,\n        3, 7,\n\n        1, 4,\n        5, 4,\n        7, 4,\n        3, 4,\n    ]\n};\n\n// 1 +-+     // 1 2\n// 0 +-+     // 0 3\nconst Grid1: GridGeometry = {\n    vertices: [\n        0.0, 0.0, 0.0, 0.0,\n        0.0, 1.0, 0.0, 1.0,\n        1.0, 1.0, 1.0, 1.0,\n        1.0, 0.0, 1.0, 0.0\n    ],\n    triangles: [\n        0, 2, 1,\n        0, 3, 2\n    ],\n    lines: [\n        0, 1,\n        1, 2,\n        2, 0,\n        2, 3,\n        3, 0\n    ]\n};\n\nexport { QuadTree, QuadTreeFunctions, QuadTreeConfig, PingPongComputeBuffer, QueryCounter, IndexedGeometry, RenderGeometry, QuadTreeConfigSize, QuadNodeSize, GridGeometry, Grid1, Grid4 };","import { app } from \"./app\"\nimport { QuadTree, QuadNodeSize } from \"./quadtree-types\"\n\n// indirect data is used to store next compute indirect dispatch\n// u32, u32, u32, u32\n// x,   y,   z,   numQuads\nconst IndirectSize = 4 * Uint32Array.BYTES_PER_ELEMENT;\n\n\n// vertex is a vec4\n// f32, f32, f32, f32\nconst VertexSize = 4 * Float32Array.BYTES_PER_ELEMENT;\nconst VertexQuadSize = 6 * VertexSize;\n\nfunction addDebugComputeCommands(commandEncoder: GPUCommandEncoder, quadTree: QuadTree, prevBufferIndex: number, currentBufferIndex: number) {\n    // node buffer size is 2 * uint32 * maxNodes + 4 uint32 for indirect dispatch\n    const nodeBufferSize = QuadNodeSize * quadTree.maxNodes;\n    const bufferSize = nodeBufferSize + IndirectSize;\n\n    // we encode node + dispatch in one debug buffer\n    const copyComputeShaderBuffer = function (commandEncoder: GPUCommandEncoder, nodeBuffer: GPUBuffer, dispatchBuffer: GPUBuffer, name: string) {\n        console.log(`write ${nodeBuffer.label} : ${name}`);\n        // dispatchIndirect buffer\n        const debugBuffer = app.wgpu.device.createBuffer({\n            size: bufferSize,\n            usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ,\n            label: nodeBuffer.label,\n        });\n\n        // Encode commands for copying buffer to buffer.\n        commandEncoder.copyBufferToBuffer(\n            nodeBuffer /* source buffer */,\n            0 /* source offset */,\n            debugBuffer /* destination buffer */,\n            0 /* destination offset */,\n            nodeBufferSize /* size */\n        );\n\n        // Encode commands for copying dispatch.\n        commandEncoder.copyBufferToBuffer(\n            dispatchBuffer /* source buffer */,\n            0 /* source offset */,\n            debugBuffer /* destination buffer */,\n            nodeBufferSize /* destination offset */,\n            IndirectSize /* size */\n        );\n\n        return debugBuffer;\n    };\n\n    const prevNodeBuffer = quadTree.nodeBuffers[prevBufferIndex].nodeBuffer;\n    const prevDispatchBuffer = quadTree.nodeBuffers[prevBufferIndex].dispatchIndirect;\n\n    const currentNodeBuffer = quadTree.nodeBuffers[currentBufferIndex].nodeBuffer;\n    const currentDispatchBuffer = quadTree.nodeBuffers[currentBufferIndex].dispatchIndirect;\n\n    return [\n        copyComputeShaderBuffer(commandEncoder, prevNodeBuffer, prevDispatchBuffer, 'previous'),\n        copyComputeShaderBuffer(commandEncoder, currentNodeBuffer, currentDispatchBuffer, 'current'),\n    ];\n}\n\n\nfunction undilate(x: number) {\n    x = (x | (x >> 1)) & 0x33333333;\n    x = (x | (x >> 2)) & 0x0f0f0f0f;\n    x = (x | (x >> 4)) & 0x00ff00ff;\n    x = (x | (x >> 8)) & 0x0000ffff;\n    return x & 0x0000ffff;\n}\n\n// # functions with 16 are the technics with the bit to start the node encoding\n// # this is this version I am interested by.\n// #\n// # ---- ---- ---- ---- ---- ---- 0111 0000\n// #                                ^ leading bit to start encoding\n// #\n// # '0b01 11 10 01'      -> 121 in the format with leading bit to start encoding\n// #     -\n\nfunction firstLeadingBit(n: number) {\n\n    if (n == 0) {\n        return -1;\n    }\n\n    let ndx = 0;\n    while (1 < n) {\n        n = (n >> 1);\n        ndx += 1;\n    }\n\n    return ndx;\n}\n\nfunction decode(key: number) {\n    let leading_bit = firstLeadingBit(key);\n    let level = leading_bit >> 1;\n    // # remove level bit\n    let k = ~(1 << leading_bit);\n    k = k & key;\n    let x = undilate(k & 0x55555555);\n    let y = undilate((k >> 1) & 0x55555555);\n    return [level, x, y];\n}\n\nfunction createCoord(key_tupple: Array<number>) {\n    let size = 1.0 / (1 << key_tupple[0]);\n    let x = key_tupple[1] * size;\n    let y = key_tupple[2] * size;\n    return [x,y, size];\n}\n\n\n\n\nasync function dumpDebugComputeData(debugBuffers: Array<GPUBuffer>, maxNodes: number, frameNumber: number) {\n\n    // node buffer size is uint32 * maxNodes + 4 uint32 for indirect dispatch\n    const nodeBufferSize = QuadNodeSize * maxNodes;\n    const bufferSize = nodeBufferSize + IndirectSize;\n\n    // const dec2bin = function (dec) {\n    //     return (dec >>> 0).toString(2);\n    // };\n    const dec2bin = function (nMask: number) {\n        // nMask must be between -2147483648 and 2147483647\n        for (var nFlag = 0, nShifted = nMask, sMask = \"\"; nFlag < 32;\n            nFlag++, sMask += String(nShifted >>> 31), nShifted <<= 1);\n        return sMask;\n    };\n\n    const dumpBuffer = async function (buffer: GPUBuffer, label: String) {\n\n        await buffer.mapAsync(GPUMapMode.READ);\n        const arrayBuffer = buffer.getMappedRange();\n\n        const nodesData = new Uint32Array(arrayBuffer, 0, nodeBufferSize / Uint32Array.BYTES_PER_ELEMENT);\n        const indirectData = new Uint32Array(arrayBuffer, nodeBufferSize, IndirectSize / Uint32Array.BYTES_PER_ELEMENT);\n\n        const numQuads = indirectData[3];\n\n        const l = `${label} : numQuads ${numQuads} : (${indirectData[0]}, ${indirectData[1]}, ${indirectData[2]}, ${indirectData[3]})`;\n        console.groupCollapsed(l);\n\n        for (let i = 0; i < numQuads; i++) {\n            const bin = dec2bin(nodesData[i * 2]);\n            const nodeData = decode(nodesData[i * 2]);\n            const coord = createCoord(nodeData);\n\n            const indx = nodesData[i * 2 + 1];\n            const data = `index ${i}: ${bin} : ${indx} : [ ${coord[0]}, ${coord[1]}, ${coord[2]}]`;\n            console.log(data);\n        }\n\n        console.groupEnd();\n\n        buffer.unmap();\n        buffer.destroy();\n\n        return true;\n    };\n\n    const label = `compute data frame: ${frameNumber}`;\n    console.groupCollapsed(label);\n\n    dumpBuffer(debugBuffers[0], 'previousBuffer');\n    dumpBuffer(debugBuffers[1], 'currentBuffer');\n\n    console.groupEnd();\n\n    return true;\n}\n\n\nfunction addDebugRenderCommands(commandEncoder: GPUCommandEncoder, vertexBuffer: GPUBuffer, indirectBuffer: GPUBuffer) {\n    // 256 quads\n    // 6 vertices -> 2 triangles\n    // 16 -> vertex size\n    // + 4 * 4 for the indirect data\n    const vertexBufferSize = 256 * VertexQuadSize;\n    const bufferSize = vertexBufferSize + IndirectSize;\n    const gpuDebugBuffer = app.wgpu.device.createBuffer({\n        size: bufferSize,\n        usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n    });\n\n    // Encode commands for copying buffer to buffer.\n    commandEncoder.copyBufferToBuffer(\n        vertexBuffer /* source buffer */,\n        0 /* source offset */,\n        gpuDebugBuffer /* destination buffer */,\n        0 /* destination offset */,\n        vertexBufferSize /* size */\n    );\n\n    // Encode commands for copying buffer to buffer.\n    commandEncoder.copyBufferToBuffer(\n        indirectBuffer /* source buffer */,\n        0 /* source offset */,\n        gpuDebugBuffer /* destination buffer */,\n        vertexBufferSize /* destination offset */,\n        IndirectSize /* size */\n    );\n\n    return gpuDebugBuffer;\n}\n\nasync function dumpDebugRenderData(debugBuffer: GPUBuffer, frameNumber: number) {\n\n    await debugBuffer.mapAsync(GPUMapMode.READ);\n    const arrayBuffer = debugBuffer.getMappedRange();\n    const verticesData = new Float32Array(arrayBuffer, 0, 256 * VertexQuadSize / Float32Array.BYTES_PER_ELEMENT);\n    const indirectData = new Uint32Array(arrayBuffer, 256 * 6 * 4 * 4, IndirectSize / Uint32Array.BYTES_PER_ELEMENT);\n\n    const label = `render data : frame ${frameNumber}`;\n    console.groupCollapsed(label);\n    for (let j = 0; j < verticesData.length / 4; j++) {\n        const x = verticesData[j * 4 + 0];\n        const y = verticesData[j * 4 + 1];\n        const z = verticesData[j * 4 + 2];\n        const index = verticesData[j * 4 + 3];\n        const vertex = `qindex ${index} : ${x}:${y}:${z}`;\n        console.log(vertex);\n    }\n\n    // vertexCount: atomic<u32>,\n    // instanceCount: u32,\n    // firstVertex: u32,\n    // firstInstance: u32,\n\n    const vertexCount = indirectData[0];\n    const instanceCount = indirectData[1];\n    const firstVertex = indirectData[2];\n    const firstInstance = indirectData[3];\n    const indirect = `vertexCount ${vertexCount} instanceCount ${instanceCount} firstVertex ${firstVertex} firstInstance ${firstInstance}`;\n    console.log(indirect);\n    console.groupEnd();\n\n    debugBuffer.unmap();\n    debugBuffer.destroy();\n\n    return true;\n}\n\nexport { dumpDebugRenderData, addDebugRenderCommands, addDebugComputeCommands, dumpDebugComputeData };\n","module.exports = \"de3bcda2d7ed610c\";","module.exports = \"72eedc7112f2d75e\";","module.exports = \"aedc2433fac2d131\";","/*! Tweakpane 3.1.9 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index) {\n            super(target);\n            this.index = index;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function isPropertyWritable(obj, key) {\n        let target = obj;\n        do {\n            const d = Object.getOwnPropertyDescriptor(target, key);\n            if (d && (d.set !== undefined || d.writable === true)) {\n                return true;\n            }\n            target = Object.getPrototypeOf(target);\n        } while (target !== null);\n        return false;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object' && typeof obj !== 'function') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.',\n        ].join(' '));\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    class ReadonlyValue {\n        constructor(value) {\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options) => {\n                    value.setRawValue(rawValue, options);\n                },\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n\n    const className$p = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$p(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ =\n                this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$o = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent',\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return globalThis;\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser\n            ? canvasElement.getContext('2d', {\n                willReadFrequently: true,\n            })\n            : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$n = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$n('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$n(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$n(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$n('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                const h = computeExpandedFolderHeight(foldable, elem);\n                if (h > 0) {\n                    foldable.set('expandedHeight', h);\n                }\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(config) {\n            var _a, _b;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n            (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.viewProps = config.viewProps;\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            var _a;\n            (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = this;\n            }\n            else {\n                bc['parent_'] = this;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.add',\n                });\n            }\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = null;\n            }\n            else {\n                bc['parent_'] = null;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.remove',\n                });\n            }\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack({\n                blade: config.root ? undefined : config.blade,\n                viewProps: config.viewProps,\n            });\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(this.className_('i'));\n            this.element.appendChild(indentElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$m = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$m('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit('select', {\n                event: new TpTabSelectEvent(this, ev.rawValue),\n            });\n        }\n    }\n\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor() {\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            item.emitter.off('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            }\n            else {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s) => s === ev.sender);\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$k('t'));\n            this.element.appendChild(titleElem);\n            this.itemsElement = titleElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(className$k('i'));\n            this.element.appendChild(indentElem);\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            pc.itemController.viewProps.set('parent', this.viewProps);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value('selected'));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            pc.itemController.viewProps.set('parent', null);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value('selected'));\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class DefiniteRangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.values = ValueMap.fromObject({\n                options: options,\n            });\n        }\n        get options() {\n            return this.values.get('options');\n        }\n        constrain(value) {\n            const opts = this.values.get('options');\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        get maxValue() {\n            return this.values.get('max');\n        }\n        get minValue() {\n            return this.values.get('min');\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            let result = value;\n            if (!isEmpty(min)) {\n                result = Math.max(result, min);\n            }\n            if (!isEmpty(max)) {\n                result = Math.min(result, max);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step, origin = 0) {\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) {\n                v = Math.max(v, min);\n            }\n            if (max !== undefined) {\n                v = Math.min(v, max);\n            }\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = this.constrainValue_(parsedValue);\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$6(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt,\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgbInt,\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        ];\n    }\n    function loopHueRange(hue, max) {\n        return hue === max ? max : loopRange(hue, max);\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === 'rgb'\n                ? constrainRange(components[0], 0, ms[0])\n                : loopHueRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index) => (c / fms[index]) * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, 'int', to.type);\n    }\n\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        static black(type = 'int') {\n            return new Color([0, 0, 0], 'rgb', type);\n        }\n        static fromObject(obj, type = 'int') {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb', type);\n        }\n        static toRgbaObject(color, type = 'int') {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        constructor(comps, mode, type = 'int') {\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        getComponents(opt_mode, type = 'int') {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type }), this.comps_[3]);\n        }\n        toRgbaObject(type = 'int') {\n            const rgbComps = this.getComponents('rgb', type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorType(value) {\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType),\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n\n    function equalsStringColorFormat(f1, f2) {\n        return (f1.alpha === f2.alpha &&\n            f1.mode === f2.mode &&\n            f1.notation === f2.notation &&\n            f1.type === f2.type);\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text) => {\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text) => {\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n                mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n                mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4]),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n            if (prev) {\n                return prev;\n            }\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = 'int') {\n        const r = detectStringColor(text);\n        if (!r) {\n            return null;\n        }\n        if (r.notation === 'hex' && type !== 'float') {\n            return Object.assign(Object.assign({}, r), { type: 'int' });\n        }\n        if (r.notation === 'func') {\n            return Object.assign(Object.assign({}, r), { type: type });\n        }\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser('int'),\n            createFunctionalRgbaColorParser('int'),\n            createHslColorParser('int'),\n            createHslaColorParser('int'),\n            createObjectRgbColorParser('int'),\n            createObjectRgbaColorParser('int'),\n        ],\n        float: [\n            createFunctionalRgbColorParser('float'),\n            createFunctionalRgbaColorParser('float'),\n            createHslColorParser('float'),\n            createHslaColorParser('float'),\n            createObjectRgbColorParser('float'),\n            createObjectRgbaColorParser('float'),\n        ],\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            if (typeof value !== 'string') {\n                return Color.black(type);\n            }\n            const result = parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            return parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n            if (prev) {\n                return prev;\n            }\n            return equalsStringColorFormat(fas.format, format)\n                ? fas.stringifier\n                : null;\n        }, null);\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            config.viewProps.bindClassModifiers(this.element);\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            config.viewProps.bindDisabled(this.modeElem_);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === 'float' ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new DefiniteRangeConstraint({\n            min: 0,\n            max: max,\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType),\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n                viewProps: this.viewProps,\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n                viewProps: this.viewProps,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value, opt_type);\n        }\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify\n            ? (target, value) => {\n                writePrimitive(target, stringify(value));\n            }\n            : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue) => {\n            if (supportsAlpha) {\n                writeRgbaColorObject(target, inValue, opt_type);\n            }\n            else {\n                writeRgbColorObject(target, inValue, opt_type);\n            }\n        };\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) {\n            return true;\n        }\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    function isForColor(params) {\n        if ('color' in params) {\n            return true;\n        }\n        if ('view' in params && params.view === 'color') {\n            return true;\n        }\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!isForColor(params)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: 'int',\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser('int'),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value) => {\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value) => {\n            if (supportsAlpha) {\n                return colorToObjectRgbaString(value, type);\n            }\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params)),\n        },\n        controller: (args) => {\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) {\n                return null;\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => { var _a; return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int'); },\n            equals: Color.equals,\n            writer: (args) => {\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) {\n                    throw TpError.shouldNeverHappen();\n                }\n                const writer = createColorStringWriter(format);\n                if (!writer) {\n                    throw TpError.notBindable();\n                }\n                return writer;\n            },\n        },\n        controller: (args) => {\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step, initialValue);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) {\n            return new DefiniteRangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function findNumberRange(c) {\n        const drc = findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return [drc.values.get('min'), drc.values.get('max')];\n        }\n        const rc = findConstraint(c, RangeConstraint);\n        if (rc) {\n            return [rc.minValue, rc.maxValue];\n        }\n        return [undefined, undefined];\n    }\n    function createConstraint$4(params,\n    initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params, args.initialValue),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_a = ('format' in args.params ? args.params.format : undefined)) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\n            if (drc) {\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: new ValueMap({\n                        maxValue: drc.values.value('max'),\n                        minValue: drc.values.value('min'),\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n            ],\n        });\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                    createAxis$2(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis$1(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint$1(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            }),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createInputBindingController(plugin, args) {\n        var _a;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: 'label' in args.params\n                    ? (_a = p.optional.string(args.params.label).value) !== null && _a !== void 0 ? _a : null\n                    : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const p = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = p.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = p.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: 'label' in args.params\n                    ? (_c = p.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : null\n                    : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                document: document,\n                target: target,\n                params: params,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                document: document,\n                params: params,\n                target: target,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                document: document,\n                params: params,\n            }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n                controller: bc,\n                pool: this,\n            }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) {\n            constraints.push(cs);\n        }\n        const rs = createRangeConstraint(params);\n        if (rs) {\n            constraints.push(rs);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\n        if (!isEmpty(min) || !isEmpty(max)) {\n            return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis(value.rawValue.x, c.components[0]),\n                    createAxis(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\n                const value = createValue(args.params.value, {\n                    constraint: lc,\n                });\n                const ic = new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(bindings, preset) {\n        bindings.forEach((binding) => {\n            const value = preset[binding.target.presetKey];\n            if (value !== undefined) {\n                binding.writer(binding.target, binding.reader(value));\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const bindings = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding;\n            });\n            importPresetJson(bindings, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const drc = new DefiniteRangeConstraint({\n                max: args.params.max,\n                min: args.params.min,\n            });\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value('max'),\n                    minValue: drc.values.value('min'),\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(initialValue, {\n                    constraint: drc,\n                }),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.1.9');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import { Pane } from \"Tweakpane\"\n\n// it's initialized at the beginning of the app\n// it uses dragData locally to this file\n\nconst dragData = {\n    dragItem: null,\n    initialY: 0,\n    initialX: 0,\n    currentX: 0,\n    currentY: 0,\n    xOffset: 0,\n    yOffset: 0,\n};\n\n\n\nfunction setTranslate(x: number, y: number) {\n    dragData.dragItem.style.transform = \"translate3d(\" + x + \"px, \" + y + \"px, 0)\";\n}\n\nfunction translateUI(x: number, y: number) {\n    const y2 = y - window.innerHeight;\n\n    dragData.initialX = dragData.xOffset = dragData.currentX = x;\n    dragData.initialY = dragData.yOffset = dragData.currentY = y2;\n\n    setTranslate(x, y2);\n}\n\nfunction setupDragUI(pane: Pane) {\n\n    dragData.dragItem = document.getElementById(\"ui\");\n\n    //    #ui > div.tp-rotv.tp-cntv.tp-rotv-expanded.tp-rotv-cpl > button\n    //    const selector = \"#ui > div > button\";\n    const selector = \"#ui > div > button > div.tp-rotv_t\";\n    let targetDragItem = document.querySelector(selector);\n    const targetEvent = targetDragItem;\n    document.addEventListener(\"mousedown\", dragStart, false);\n    document.addEventListener(\"mouseup\", dragEnd, false);\n    document.addEventListener(\"mousemove\", drag, false);\n\n    let active = false;\n    let isDragging = false;\n\n    function fakeClick(e) {\n        if (isDragging) {\n            e.stopPropagation();\n            isDragging = false;\n        }\n    };\n\n    // overwrite the click event\n    pane.controller_.view.buttonElement.addEventListener(\"click\", fakeClick, true);\n\n    function dragStart(e) {\n        if (e.type === \"touchstart\") {\n            dragData.initialX = e.touches[0].clientX - dragData.xOffset;\n            dragData.initialY = e.touches[0].clientY - dragData.yOffset;\n        } else {\n            dragData.initialX = e.clientX - dragData.xOffset;\n            dragData.initialY = e.clientY - dragData.yOffset;\n        }\n\n        if (e.target === targetDragItem) {\n            active = true;\n        }\n    }\n\n    function dragEnd(e) {\n        dragData.initialX = dragData.currentX;\n        dragData.initialY = dragData.currentY;\n        active = false;\n    }\n\n    function drag(e) {\n        if (active) {\n            e.preventDefault();\n            isDragging = true;\n\n            if (e.type === \"touchmove\") {\n                dragData.currentX = e.touches[0].clientX - dragData.initialX;\n                dragData.currentY = e.touches[0].clientY - dragData.initialY;\n            } else {\n                dragData.currentX = e.clientX - dragData.initialX;\n                dragData.currentY = e.clientY - dragData.initialY;\n            }\n\n            dragData.xOffset = dragData.currentX;\n            dragData.yOffset = dragData.currentY;\n\n            setTranslate(dragData.currentX, dragData.currentY);\n        }\n    }\n}\n\n\nexport { setupDragUI, translateUI };\n","import { ManualTicker, numberFromUnknown } from '@tweakpane/core';\nimport { vec3 } from 'gl-matrix';\nimport { setInputs, setInputTargets, SmoothInput, updateInputs } from './smooth-inputs'\n\ninterface Manipulator {\n    x: SmoothInput,\n    y: SmoothInput,\n    zoom: SmoothInput,\n    sceneRadius: number,\n    sceneCenter: number,\n\n    target: vec3,\n    eye: vec3,\n    tilt: number,\n}\n\n\n\nfunction updateManipulator(manipulator: Manipulator, dt: number) {\n    updateInputs([manipulator.x, manipulator.y, manipulator.zoom], dt, 1.0 / 10.0);\n    // console.log(\"distance \", manipulator.zoom.current);\n}\n\nfunction resetManipulator(manipulator: Manipulator) {\n    setInputs([manipulator.x, manipulator.y], [0, 0]);\n}\n\nlet wheel: number = 0;\nfunction resetZoom(manipulator: Manipulator, zoomValue: number, sceneRadius: number, sceneCenter: number) {\n    setInputs([manipulator.zoom], [zoomValue]);\n    manipulator.sceneRadius = sceneRadius;\n    manipulator.sceneCenter = sceneCenter;\n    wheel = zoomValue;\n}\n\nfunction smoothStep(x: number) {\n    if (x < 0) {\n        x = 0;\n    }\n\n    if (x > 1.0) {\n        x = 1.0;\n    }\n\n    return x * x * (3 - 2 * x);\n}\n\nfunction setupManipulator(element: HTMLCanvasElement, manipulator: Manipulator, sceneRadius: number, sceneCenter: number) {\n\n    manipulator.x = { current: 0, delta: 0, target: 0 };\n    manipulator.y = { current: 0, delta: 0, target: 0 };\n    manipulator.zoom = { current: 0, delta: 0, target: 0 };\n    manipulator.sceneRadius = sceneRadius;\n    manipulator.sceneCenter = sceneCenter;\n\n    resetZoom(manipulator, sceneRadius * 2, sceneRadius, sceneCenter);\n\n    const scaleFromDistance = function () {\n        let distMin = manipulator.sceneCenter;\n        let distMax = 2.0 * manipulator.sceneRadius;\n        let range = distMax - distMin;\n        let value =( manipulator.zoom.current - distMin) / range;\n        let smooth = smoothStep(value);\n        return Math.max(0.001, value);\n    }\n\n    // connect weel event\n    const onWeelEvent = function (event: WheelEvent) {\n        let scaler = 0.001 * manipulator.sceneRadius;\n        const distance = scaler * scaleFromDistance();\n        wheel += event.deltaY * distance;\n        wheel = Math.max(wheel, manipulator.sceneCenter);\n        wheel = Math.min(wheel, manipulator.sceneRadius * 3.0);\n        // //Math.max(0.001, manipulator.zoom.current + (distance * event.deltaY * scale))\n        // console.log(wheel, distance, event.deltaY * distance, \"zoom value\", manipulator.zoom.current);\n        setInputTargets([manipulator.zoom], [wheel]);\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n    };\n\n    let mouseDown = false;\n    let x = 0;\n    let y = 0;\n    let xglobal = 0;\n    let yglobal = 0;\n\n    // connect mouse x/y\n    const onMouseMoveEvent = function (event: MouseEvent) {\n\n        if (!mouseDown) {\n            return false;\n        }\n\n        const distance = scaleFromDistance() * 0.4;\n        xglobal += distance * (event.offsetX - x);\n        yglobal += distance * (event.offsetY - y);\n        x = event.offsetX;\n        y = event.offsetY;\n        setInputTargets([manipulator.x, manipulator.y], [xglobal, yglobal]);\n        return false;\n    };\n\n    // connect mouse x/y\n    const onMouseDownEvent = function (event: MouseEvent) {\n        mouseDown = true;\n        x = event.offsetX;\n        y = event.offsetY;\n        return false;\n    };\n\n    // connect mouse x/y\n    const onMouseUpEvent = function (event: WheelEvent) {\n        mouseDown = false;\n        return false;\n    };\n\n    window.addEventListener('wheel', onWeelEvent, { passive: false });\n    element.addEventListener('mousemove', onMouseMoveEvent);\n    element.addEventListener('mousedown', onMouseDownEvent);\n    element.addEventListener('mouseup', onMouseUpEvent);\n\n}\n\nexport { Manipulator, updateManipulator, setupManipulator, resetManipulator, resetZoom };","\ninterface SmoothInput {\n    current: number,\n    target: number,\n    delta: number,\n}\n\nfunction updateInputs(list : Array<SmoothInput>, dt: number, delay: number) {\n    for (let i = 0; i < list.length; i++) {\n        const d = (list[i].target - list[i].current) * delay;\n        list[i].delta = d;\n        list[i].current += d;\n    }\n}\n\nfunction setInputs(list : Array<SmoothInput>, values: Array<number>) {\n    for (let i = 0; i < list.length; i++) {\n        list[i].current = list[i].target = values[i];\n        list[i].delta = 0.0;\n    }\n}\n\nfunction setInputTargets(list : Array<SmoothInput>, values: Array<number>) {\n    for (let i = 0; i < list.length; i++) {\n        list[i].target = values[i];\n    }\n}\n\nexport { SmoothInput, updateInputs, setInputTargets, setInputs}\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$interopDefault","a","__esModule","default","$26675c4f95835ef1$exports","$26675c4f95835ef1$export$185802fd694ee1f5","$26675c4f95835ef1$export$9cd59f9826255e47","$26675c4f95835ef1$export$784d13d8ee351f07","$26675c4f95835ef1$export$a82be99ed2a44a7d","$26675c4f95835ef1$export$adaa4cf7ef1b65be","$26675c4f95835ef1$export$f0954fd7d5368655","$26675c4f95835ef1$export$9cb09a71b7d66923","$26675c4f95835ef1$export$6897c284b6f9f4dc","$26675c4f95835ef1$export$33f3c024b4ae00a1","$26675c4f95835ef1$export$a04698f914c55ed9","$26675c4f95835ef1$export$2060d2db72cce88f","$26675c4f95835ef1$export$d73ee8ef04f5226a","$26675c4f95835ef1$export$dcdf75081b88279d","$26675c4f95835ef1$export$bb628a54ab399bc9","$26675c4f95835ef1$export$a59c8716592e09af","$26675c4f95835ef1$export$cf71e4d4ca4d1cfd","$26675c4f95835ef1$export$ea6eae3365de5b9c","$26675c4f95835ef1$export$bc9e79e74e9fddf6","$26675c4f95835ef1$export$832ca188ffb1955d","$26675c4f95835ef1$export$926fc125ff3c666c","$26675c4f95835ef1$export$dd47cc2f828c32ef","$26675c4f95835ef1$export$7dc997d67d2b7f33","$26675c4f95835ef1$export$ad5ddaedc8f405df","$26675c4f95835ef1$export$9545ac307f2a256b","$26675c4f95835ef1$export$ff497f2be31cc6a","$26675c4f95835ef1$export$202e99f82f7f0395","$26675c4f95835ef1$export$71dc54d92bd04b57","$26675c4f95835ef1$export$df3937d3b537df0a","$26675c4f95835ef1$export$ddf9c55c9f2be172","$26675c4f95835ef1$export$1def1f860edc4b1f","$26675c4f95835ef1$export$2ff2bbe382249af7","$26675c4f95835ef1$export$89b5708c387cac6c","$26675c4f95835ef1$export$4cf19729ec9a96b8","$26675c4f95835ef1$export$541149539f3a4684","$26675c4f95835ef1$export$294bba99a6af0c0c","$26675c4f95835ef1$export$58ae211c788e338f","$26675c4f95835ef1$export$c5f65ef3eb668f27","$26675c4f95835ef1$export$4f2167e613cfc87b","$26675c4f95835ef1$export$b1d31ea7b4d854e","$26675c4f95835ef1$export$d924e14fd6d9aa66","$26675c4f95835ef1$export$aa67782f4dc9e52c","$26675c4f95835ef1$export$42d51816ce590c93","$26675c4f95835ef1$export$326827e8268e9cdb","$26675c4f95835ef1$export$e16d8520af44a096","$26675c4f95835ef1$export$4e2d2ead65e5f7e3","$26675c4f95835ef1$export$c697bed75648cdb7","$26675c4f95835ef1$export$553579f63bdd7137","$26675c4f95835ef1$export$f2599a5cf1109d8","$26675c4f95835ef1$export$e9bab7fafb253603","$26675c4f95835ef1$export$6e3a27864ab166fe","$26675c4f95835ef1$export$f93b5905241a7cca","$78ae820aa9ececfa$export$b67359430d3b1b2","Float32Array","Array","$78ae820aa9ececfa$export$5ada478c8a628231","Math","random","out","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","a01","a02","a03","a12","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","b","b0","b1","b2","b3","x","y","z","rad","axis","c","t","b12","b20","b21","b22","len","hypot","sin","cos","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","mat","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","sx","sy","sz","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","yx","zx","zy","left","right","bottom","top","near","far","rl","tb","nf","fovy","aspect","f","tan","Infinity","i","arguments","length","fov","upTan","upDegrees","PI","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","lr","bt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","target","scale","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$78ae820aa9ececfa$export$fd293b15f47e270","max","$ab7f6dc0910e1ef7$exports","$ab7f6dc0910e1ef7$export$185802fd694ee1f5","$ab7f6dc0910e1ef7$export$9cd59f9826255e47","$ab7f6dc0910e1ef7$export$f24224f1c91d8156","$ab7f6dc0910e1ef7$export$a82be99ed2a44a7d","$ab7f6dc0910e1ef7$export$784d13d8ee351f07","$ab7f6dc0910e1ef7$export$adaa4cf7ef1b65be","$ab7f6dc0910e1ef7$export$e16d8520af44a096","$ab7f6dc0910e1ef7$export$4e2d2ead65e5f7e3","$ab7f6dc0910e1ef7$export$2060d2db72cce88f","$ab7f6dc0910e1ef7$export$cd007d971a5a2143","$ab7f6dc0910e1ef7$export$803ce6b71a0a94b2","ceil","$ab7f6dc0910e1ef7$export$a3fe094919f356fd","floor","$ab7f6dc0910e1ef7$export$96ec731ed4dcb222","min","$ab7f6dc0910e1ef7$export$8960430cfd85939f","$ab7f6dc0910e1ef7$export$2077e0241d6afd3c","round","$ab7f6dc0910e1ef7$export$dcdf75081b88279d","$ab7f6dc0910e1ef7$export$19cedf1da84ba854","$ab7f6dc0910e1ef7$export$9f17032d917177de","$ab7f6dc0910e1ef7$export$88e6ebb4fe54f538","$ab7f6dc0910e1ef7$export$ab44e1323ffc8376","$ab7f6dc0910e1ef7$export$aef51622e549b8b0","$ab7f6dc0910e1ef7$export$70ae2c07e401031b","$ab7f6dc0910e1ef7$export$a3295358bff77e","$ab7f6dc0910e1ef7$export$94132a0e348806d4","$ab7f6dc0910e1ef7$export$bb646b20bb93d339","$ab7f6dc0910e1ef7$export$3a89f8d6f6bf6c9f","$ab7f6dc0910e1ef7$export$ae8865616f30561c","d","factorTimes2","factor1","factor2","factor3","factor4","$ab7f6dc0910e1ef7$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$ab7f6dc0910e1ef7$export$4385e60b38654f68","r","zScale","$ab7f6dc0910e1ef7$export$5ffbd13800309d59","m","$ab7f6dc0910e1ef7$export$f0bfa0a0024626ee","$ab7f6dc0910e1ef7$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$ab7f6dc0910e1ef7$export$a59c8716592e09af","p","$ab7f6dc0910e1ef7$export$cf71e4d4ca4d1cfd","$ab7f6dc0910e1ef7$export$ea6eae3365de5b9c","$ab7f6dc0910e1ef7$export$944b09d2ad10b378","mag","mag1","acos","$ab7f6dc0910e1ef7$export$7f9972325ebfd559","$ab7f6dc0910e1ef7$export$42d51816ce590c93","$ab7f6dc0910e1ef7$export$f2599a5cf1109d8","$ab7f6dc0910e1ef7$export$e9bab7fafb253603","$ab7f6dc0910e1ef7$export$f93b5905241a7cca","$ab7f6dc0910e1ef7$export$6e3a27864ab166fe","$ab7f6dc0910e1ef7$export$159d9494db57879b","$ab7f6dc0910e1ef7$export$6c4a311cc157c764","$ab7f6dc0910e1ef7$export$2422cd6c492a8b3a","$ab7f6dc0910e1ef7$export$fc1400facf92c78","$ab7f6dc0910e1ef7$export$99d8dd3f32a3435","$ab7f6dc0910e1ef7$export$4b80e395e36b5a56","vec","stride","offset","count","fn","arg","l","$e38eb280d3b76273$exports","$e38eb280d3b76273$export$185802fd694ee1f5","$e38eb280d3b76273$export$9cd59f9826255e47","$e38eb280d3b76273$export$a82be99ed2a44a7d","$e38eb280d3b76273$export$784d13d8ee351f07","$e38eb280d3b76273$export$adaa4cf7ef1b65be","$e38eb280d3b76273$export$e16d8520af44a096","$e38eb280d3b76273$export$4e2d2ead65e5f7e3","$e38eb280d3b76273$export$2060d2db72cce88f","$e38eb280d3b76273$export$cd007d971a5a2143","$e38eb280d3b76273$export$803ce6b71a0a94b2","$e38eb280d3b76273$export$a3fe094919f356fd","$e38eb280d3b76273$export$96ec731ed4dcb222","$e38eb280d3b76273$export$8960430cfd85939f","$e38eb280d3b76273$export$2077e0241d6afd3c","$e38eb280d3b76273$export$dcdf75081b88279d","$e38eb280d3b76273$export$19cedf1da84ba854","$e38eb280d3b76273$export$9f17032d917177de","$e38eb280d3b76273$export$88e6ebb4fe54f538","$e38eb280d3b76273$export$f24224f1c91d8156","$e38eb280d3b76273$export$ab44e1323ffc8376","$e38eb280d3b76273$export$aef51622e549b8b0","$e38eb280d3b76273$export$70ae2c07e401031b","$e38eb280d3b76273$export$a3295358bff77e","$e38eb280d3b76273$export$94132a0e348806d4","$e38eb280d3b76273$export$bb646b20bb93d339","u","A","B","C","D","E","F","G","H","I","J","$e38eb280d3b76273$export$3a89f8d6f6bf6c9f","$e38eb280d3b76273$export$4385e60b38654f68","s1","v1","v2","s2","v3","v4","$e38eb280d3b76273$export$5ffbd13800309d59","$e38eb280d3b76273$export$c32adef9e939ce85","ix","iy","iz","iw","$e38eb280d3b76273$export$7f9972325ebfd559","$e38eb280d3b76273$export$42d51816ce590c93","$e38eb280d3b76273$export$f2599a5cf1109d8","$e38eb280d3b76273$export$e9bab7fafb253603","$e38eb280d3b76273$export$f93b5905241a7cca","$e38eb280d3b76273$export$6e3a27864ab166fe","$e38eb280d3b76273$export$159d9494db57879b","$e38eb280d3b76273$export$6c4a311cc157c764","$e38eb280d3b76273$export$2422cd6c492a8b3a","$e38eb280d3b76273$export$fc1400facf92c78","$e38eb280d3b76273$export$99d8dd3f32a3435","$e38eb280d3b76273$export$4b80e395e36b5a56","$f43313d21d3fd8e2$export$729c8b7179294ba","pane","config","maxLod","projectToEarth","evaluateLodIn3D","evaluateRealCamera","displayTexture","gridResolution","lodScaleFactor","debug","debugBuffers","elevationScale","position","wireframe","frameNumber","pause","frameTime","updateQuadTree","renderQuadTree","pauseTree","rotate","camera","start","stop","current","duration","manipulator","wgpu","projectionMatrix","modelMatrix","$df5bef30413a053b$export$fe58198efe02b173","path","img","Image","crossOrigin","src","decode","imageBitmap","createImageBitmap","$df5bef30413a053b$export$37b981a8c575f415","image","inputFormat","textureFormat","texture","device","createTexture","size","width","height","format","usage","GPUTextureUsage","TEXTURE_BINDING","COPY_DST","RENDER_ATTACHMENT","queue","copyExternalImageToTexture","source","$df5bef30413a053b$export$ec48efc62e183f53","canvas","$df5bef30413a053b$var$checkSupport","navigator","gpu","document","body","innerHTML","Error","adapter","requestAdapter","hasQueryTimer","requestDevice","requiredFeatures","console","info","err","error","log","limits","context","getContext","configure","getPreferredCanvasFormat","alphaMode","$2fbafa2571df286a$export$d7101d2a8b0d91b1","Uint32Array","BYTES_PER_ELEMENT","$2fbafa2571df286a$export$5fbe264087b547e8","$2fbafa2571df286a$export$f8417bee550c7247","vertices","triangles","lines","$2fbafa2571df286a$export$30880409f0d88fa1","$9eb94756a2bdee36$var$IndirectSize","$9eb94756a2bdee36$var$VertexSize","$9eb94756a2bdee36$var$undilate","$9eb94756a2bdee36$export$1a4bdd241c653de4","maxNodes","nodeBufferSize","dec2bin","nMask","nFlag","nShifted","sMask","String","dumpBuffer","buffer","label","mapAsync","GPUMapMode","READ","arrayBuffer","getMappedRange","nodesData","indirectData","numQuads","groupCollapsed","bin","nodeData","$9eb94756a2bdee36$var$decode","key","leading_bit","$9eb94756a2bdee36$var$firstLeadingBit","ndx","k","coord","$9eb94756a2bdee36$var$createCoord","key_tupple","indx","data","groupEnd","unmap","destroy","$2cb80031daad6395$exports","$85f3cc3873902ef9$exports","$3c5ae847ce8d0006$exports","$d333dbec302236c3$var$timestamp","query","encoder","index","capacity","writeTimestamp","querySet","labelMap","$d333dbec302236c3$var$createQuadGeometry","grid","positionBuffer","createBuffer","GPUBufferUsage","VERTEX","mappedAtCreation","triangleIndexBuffer","Uint16Array","INDEX","wireframeIndexBuffer","solid","numIndices","$d333dbec302236c3$var$initUpdate","pingPongBuffer","$d333dbec302236c3$var$updateQuadTree","frame","$d333dbec302236c3$var$updateDataBuffer","tmpBuffer","ArrayBuffer","tmpView","DataView","setFloat32","cameraPosition","setUint32","writeBuffer","configBuffer","nodeBuffers","dispatchIndirect","geometry","gridGeometries","drawIndirect","commandEncoder","createCommandEncoder","pass","beginComputePass","setPipeline","computePipeline","setBindGroup","computeBindGroups","dispatchWorkgroupsIndirect","end","quadTree","prevBufferIndex","currentBufferIndex","bufferSize","copyComputeShaderBuffer","nodeBuffer","dispatchBuffer","name","debugBuffer","MAP_READ","copyBufferToBuffer","prevNodeBuffer","prevDispatchBuffer","currentNodeBuffer","currentDispatchBuffer","submit","finish","$d333dbec302236c3$var$renderQuads","beginRenderPass","$d333dbec302236c3$var$getRendePassDesc","colorView","getCurrentTexture","createView","depthTexture","depthTextureDesc","dimension","COPY_SRC","colorAttachments","view","clearValue","loadOp","storeOp","depthStencilAttachment","depthClearValue","depthLoadOp","depthStoreOp","renderQuad","pipeline","setVertexBuffer","setIndexBuffer","bindGroup","drawIndexedIndirect","renderWireframe","resolveQuerySet","counters","bufferRead","gpuReadBuffer","copyEncoder","copyCommands","timingsNanoseconds","BigInt64Array","timeUpdateQuadTreeInMS","Number","timeRenderQuadTreeInMS","$c398a0ea03e027b6$exports","factory","exports1","BladeApi","constructor","controller","controller_","element","disabled","viewProps","hidden","dispose","TpEvent","TpChangeEvent","value","presetKey","last","TpUpdateEvent","TpFoldEvent","expanded","TpTabSelectEvent","isEmpty","deepEqualsArray","isPropertyWritable","obj","getOwnPropertyDescriptor","undefined","writable","getPrototypeOf","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","alreadyDisposed","type","notBindable","propertyNotFound","shouldNeverHappen","_a","message","stack","BindingTarget","opt_id","obj_","key_","presetKey_","isBindable","read","write","writeProperty","valueObj","ButtonApi","props","title","valueController","on","eventName","handler","bh","bind","emitter","Emitter","observers_","observers","push","off","filter","observer","emit","event","forEach","ClassName","viewName","opt_elementName","opt_modifier","join","bindValue","applyValue","input","h2","ev","rawValue","bindValueMap","valueMap","valueToClassName","elem","className","classList","add","remove","bindValueToTextContent","text","textContent","className$q","ButtonView","doc","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","addEventListener","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","prevValue","changed","previousRawValue","PrimitiveValue","value_","createValue","ValueMap","valMap_","createCore","keys","reduce","assign","fromObject","core","createParamsParserBuilder","parse","optional","succeeded","result","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","object","keyToParserMap","parseObject","tmp","parser","array","itemParser","isArray","item","parseItem","ParamsParsers","required","parseParams","warnMissing","warn","place","ReadonlyValue","create","className$p","valueToModifier","modifier","ViewProps","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","globalDisabled_","setGlobalDisabled_","getGlobalDisabled_","globalDisabled","opt_initialValue","_b","_c","disposed","parent","bindTabIndex","tabIndex","handleDispose","callback","parentDisabled","updateGlobalDisabled_","prevParent","className$o","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","getAllBladePositions","pos","parentElement","removeChild","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","insertElementAt","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$n","LabelView","labelElem","removeChildNodes","childNodes","createLabelNode","frag","createDocumentFragment","lineNodes","split","map","line","createTextNode","lineNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","id","accept","args","api","ValueBladeController","createBlade","positions","Foldable","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","applyHeight","foldable","style","bindFoldable","h","disableTransitionTemporarily","transition","folder","containerElement","clientHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","items","allItems","from","find","includes","has","opt_index","splice","subList","root","indexOf","delete","InputBindingApi","onBindingChange_","emitter_","binding","refresh","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","addInput","opt_params","ownerDocument","createInput","addMonitor","createMonitor","addFolder","addBlade","addButton","addSeparator","addSeparatorAsBlade","addTab","gapi","createBladeApi","bladeController","isRoot","FolderApi","rackController","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","disposedUcs","findInputBindingController","bcs","findMonitorBindingController","findValueBladeController","_","bladeContainerClassName","FolderView","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$m","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","onSelect_","pageApiMap_","Map","tab","selectedIndex","pageSet","pc","setUpPageApi_","pages","addPage","removePage","Tab","onItemSelectedChange_","empty","keepSelection_","firstSelIndex","findIndex","className$k","TabView","itemsElement","contentsElem","contentsElement","TabController","cr","pageSet_","TabBladePlugin","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","InputBinding","onValueChange_","reader","writer","targetValue","write_","fillBuffer","MonitorBinding","reader_","newValue","createPushedBuffer","newBuffer","createTrimmedBuffer","slice","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","DefiniteRangeConstraint","values","ListConstraint","matched","RangeConstraint","maxValue","minValue","StepConstraint","step","origin","className$j","ListView","props_","selectElem","optionElem","dataset","selectElement","update_","ListController","onSelectChange_","currentTarget","optElem","selectedOptions","itemIndex","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","formatter","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","NumberLiteralNode","evaluate","toString","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","readSignedInteger","ds","sign","sds","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parseBinaryOperationExpression","ops","firstExpr","exprParser","evaluable","readBinaryOperator","startsWith","nextExpr","parseUnaryExpression","parseLiteral","num","parseParenthesizedExpression","parseExpression","cl","parseNumber","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","getBoundingClientRect","pageX","scrollX","pageY","scrollY","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","bounds","point","preventDefault","focus","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","frac","replace","constrainRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","dx","className$f","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","textProps","sliderController","textController","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","base","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","BooleanInputPlugin","_args","createConstraint$6","lc","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgbInt","rp","gp","bp","hp","sp","vp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","sd","rgb","lp","g","cmax","cmin","getColorMaxComponents","mode","convertColorType","to","fms","tms","isRgbColorComponent","Color","black","toRgbaObject","color","isRgbColorObject","isRgbaColorObject","isColorObject","comps1","comps_","comps2","constrainColorComponents","components","hue","ms","getComponents","opt_mode","convertColor","intComps","rgbComps","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","textViews","parseColorType","parseColorInputParams","picker","getBaseStepForColor","forAlpha","extractColorType","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","turn","parseCssNumberOrAngle","unit","parseFunctionalRgbColorComponents","isNaN","createFunctionalRgbColorParser","parseFunctionalRgbaColorComponents","createFunctionalRgbaColorParser","parseHslColorComponents","createHslColorParser","parseHslaColorComponents","createHslaColorParser","parseHexRgbColorComponents","mRgb","parseInt","mRrggbb","parseHexRgbaColorComponents","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","notation","detectStringColorFormat","prev","detection","TYPE_TO_PARSERS","int","float","createColorStringParser","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","opt_type","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToObjectRgbString","names","colorToObjectRgbaString","FORMAT_AND_STRINGIFIERS","stringifier","formatters","findColorStringifier","fas","f1","equalsStringColorFormat","f2","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","ColorTextView","modeElem","modeElem_","createModeSelectElement","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","createComponentController","draggingScale","colorType","createConstraint$5","ColorTextController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","cc","ccs","cs","pickedMode","className$8","HPaletteView","HPaletteController","className$7","SvPaletteView","canvasElem","canvasElement","ctx","getCanvasContext","willReadFrequently","hsvComps","imgData","getImageData","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","shouldSupportAlpha$1","inputParams","NumberColorInputPlugin","createColorNumberWriter","colorToNumber","ObjectColorInputPlugin","inValue","writeRgbaColorObject","writeRgbColorObject","StringColorInputPlugin","createColorStringBindingReader","createColorStringWriter","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","ac","createStepConstraint","createRangeConstraint","NumberInputPlugin","createConstraint$4","drc","Point2d","isObject","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","Point3d","Point3dAssembly","point3dFromUnknown","writePoint3d","createAxis$2","Point3dInputPlugin","createDimensionConstraint","Point4d","Point4dAssembly","point4dFromUnknown","writePoint4d","Point4dInputPlugin","StringInputPlugin","createConstraint$1","Constants","monitor","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","MultiLogController","className$1","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphLogView","onCursorChange_","cursor_","graphElement","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","PluginPool","pluginsMap_","blades","inputs","monitors","getAll","register","unshift","plugin","createInputBindingController","valueArgs","createMonitorBindingController","bindingArgs","initializeBuffer","createBladeController","point2dFromUnknown","writePoint2d","rs","getSuitableMaxDimensionValue","findNumberRange","createAxis","Point2dInputPlugin","inverted","shouldInvertY","yParams","getSuitableMaxValue","xc","yc","xr","yr","ListApi","SliderApi","TextApi","ListBladePlugin","ic","RootApi","importPreset","preset","bindings","ibc","importPresetJson","exportPreset","targets","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","VERSION","prerelease","coreComps","major","minor","patch","Pane","opt_config","getWindowDocument","globalObj","globalThis","createDefaultPluginPool","rootController","containerElem_","container","createDefaultWrapperElement","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","$262c31a93dbc3ee6$var$dragData","dragItem","initialY","initialX","currentX","currentY","xOffset","yOffset","$262c31a93dbc3ee6$var$setTranslate","transform","$39fe34838e40a6ee$export$96cab11a8a0b8676","list","delta","$39fe34838e40a6ee$export$8025de2eaad148b3","$7b209ffefa4ce57b$var$wheel","$7b209ffefa4ce57b$export$ac12f90bdc1d9b7","zoomValue","sceneRadius","sceneCenter","zoom","$ad2bcec7a0192558$var$ModelConfig","plane","radius","earth","$ad2bcec7a0192558$var$getModelConfig","$ad2bcec7a0192558$var$initApp","getElementById","scaleFromDistance","distMin","distMax","mouseDown","xglobal","yglobal","window","scaler","distance","deltaY","stopPropagation","offsetY","$ad2bcec7a0192558$var$setupUI","precision5","targetDragItem","touches","active","isDragging","setupTabModel","filename","blob","Blob","createEvent","download","href","URL","createObjectURL","downloadurl","initMouseEvent","dispatchEvent","innerHeight","resizeCallback","$ad2bcec7a0192558$var$updateProjection","resizeObserver","ResizeObserver","entries","entry","dpr","devicePixelRatio","dprSupport","devicePixelContentBoxSize","inlineSize","blockSize","contentBoxSize","contentRect","displayWidth","displayHeight","observe","box","newNear","perspective","$ad2bcec7a0192558$export$f22da7240b7add18","elevation","elevationTexture","earthTexture","annotationTexture","quadTreeData","$d333dbec302236c3$var$createQuadtreeData","maxLevel","computeShader","$d333dbec302236c3$var$getQuadTreeComputeShader","workgroupSize","workgroupBitShift","log2","define","createDispatchBuffer","mappedBuffer","createNodeBuffer","numElements","STORAGE","INDIRECT","instanceBuffer","quadTreeConfigBuffer","UNIFORM","createComputePipeline","compute","module","createShaderModule","code","entryPoint","bindGroupLayout","getBindGroupLayout","createBindGroup","previousNodeBuffer","previousDispatchIndirect","outputNodeBuffer","outputDispatchIndirect","uniform","resource","sampler","createSampler","magFilter","minFilter","createRenderGeometry","primitive","shaderModule","createRenderPipeline","vertex","buffers","arrayStride","attributes","shaderLocation","fragment","topology","cullMode","frontFace","depthStencil","depthWriteEnabled","depthCompare","geometry1","geometry4","drawQuadPipeline","drawWireframePipeline","annotations","createQuery","createQuerySet","queryBuffer","QUERY_RESOLVE","initUpdate","previousTime","performance","now","renderLoop","currentTime","dt","$ad2bcec7a0192558$var$updateCamera","motion","factor","delay","identity","yValue","xValue","rotateX","rotateY","initialCameraPosition","fromValues","transformMat4","lookAt","translate","multiply","requestAnimationFrame"],"version":3,"file":"index.e0fa3ced.js.map"}